<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Zero&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Love Linux ♥ Love Python. 猴赛雷">
<meta property="og:type" content="website">
<meta property="og:title" content="Zero's Blog">
<meta property="og:url" content="http://czero000.github.io/page/16/index.html">
<meta property="og:site_name" content="Zero's Blog">
<meta property="og:description" content="Love Linux ♥ Love Python. 猴赛雷">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Zero's Blog">
<meta name="twitter:description" content="Love Linux ♥ Love Python. 猴赛雷">
  
    <link rel="alternate" href="/atom.xml" title="Zero&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Zero&#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">点滴分享 多彩生活</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://czero000.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-smokeping-support-chinese" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/20/smokeping-support-chinese.html" class="article-date">
  <time datetime="2015-12-20T11:47:57.000Z" itemprop="datePublished">2015-12-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/System/">System</a>►<a class="article-category-link" href="/categories/System/Monitor/">Monitor</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/20/smokeping-support-chinese.html">Smokeping页面支持中文</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="smokeping页面和rrdtool图片支持中文"><a href="#smokeping页面和rrdtool图片支持中文" class="headerlink" title="smokeping页面和rrdtool图片支持中文"></a>smokeping页面和rrdtool图片支持中文</h3><p>smokeping默认不支持中文，只需要修改如下便可：</p>
<h4 id="页面支持中文"><a href="#页面支持中文" class="headerlink" title="页面支持中文"></a>页面支持中文</h4><p>在配置文件的<code>*** Presentation ***</code>下面添加<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">charset = utf-8</div></pre></td></tr></table></figure></p>
<h4 id="rrd图片支持中文"><a href="#rrd图片支持中文" class="headerlink" title="rrd图片支持中文"></a>rrd图片支持中文</h4><h5 id="安装中文支持"><a href="#安装中文支持" class="headerlink" title="安装中文支持"></a>安装中文支持</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum groupinstall &quot;chinese support&quot;</div></pre></td></tr></table></figure>
<h5 id="查看中文字体支持："><a href="#查看中文字体支持：" class="headerlink" title="查看中文字体支持："></a>查看中文字体支持：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">fc-list :lang=zh</div><div class="line">AR PL ZenKai Uni,文鼎PL中楷Uni:style=Medium</div><div class="line">AR PL ShanHeiSun Uni,文鼎PL細上海宋Uni,文鼎PL细上海宋Uni:style=Regular</div></pre></td></tr></table></figure>
<h5 id="修改配置文件"><a href="#修改配置文件" class="headerlink" title="修改配置文件"></a>修改配置文件</h5><p>编辑 /usr/local/smokeping/lib/Smokeping/Graphs.pm</p>
<pre><code>插入 &quot;&apos;--font TITLE:20:AR PL ShanHeiSun Uni&apos;，&quot;
if ($mode =~ /[anc]/){
        my $val = 0;
        for my $host (@hosts){
            my ($graphret,$xs,$ys) = RRDs::graph
            (&quot;dummy&quot;,
            &apos;--start&apos;, $tasks[0][1],
            &apos;--end&apos;, $tasks[0][2],
            &apos;--font TITLE:20:AR PL ShanHeiSun Uni&apos;,
            &quot;DEF:maxping=$cfg-&gt;{General}{datadir}${host}.rrd:median:AVERAGE&quot;,
            &apos;PRINT:maxping:MAX:%le&apos; );
            my $ERROR = RRDs::error();
            return &quot;
RRDtool did not understand your input: $ERROR. &quot; if $ERROR;
            $val = $graphret-&gt;[0] if $val  [0];
        }
        $val = 1e-6 if $val =~ /nan/i;
        $max = { $tasks[0][1] =&gt; $val * 1.5 };
    }
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://czero000.github.io/2015/12/20/smokeping-support-chinese.html" data-id="civlqiu7z0059c15m9uqw27ww" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/monitor/">monitor</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/smokeping/">smokeping</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-install-smokeping" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/20/install-smokeping.html" class="article-date">
  <time datetime="2015-12-20T11:41:31.000Z" itemprop="datePublished">2015-12-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/System/">System</a>►<a class="article-category-link" href="/categories/System/Monitor/">Monitor</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/20/install-smokeping.html">Smokeping-安装</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="Smokeping-监控网络质量"><a href="#Smokeping-监控网络质量" class="headerlink" title="Smokeping 监控网络质量"></a>Smokeping 监控网络质量</h3><h4 id="什么是Smokeping"><a href="#什么是Smokeping" class="headerlink" title="什么是Smokeping"></a>什么是Smokeping</h4><p>Smokeping是 rrdtool 的作者 Tobi Oetiker 的作品，所以它在图形显示方面有很大优势，也是一个很有特点的 opensource 工具：</p>
<ul>
<li>多种探测方式，包括 fping、echoping、dig、curl 等；</li>
<li>易用可扩展的插件；master/slave 的工作方式，可以在多个节点收集同一个监测点的数据；</li>
<li>很有特色的 alert 设置，不只是简单的设置一个阀值。</li>
</ul>
<h4 id="Smokeping架构组件"><a href="#Smokeping架构组件" class="headerlink" title="Smokeping架构组件"></a>Smokeping架构组件</h4><p>smokeping 是一个用 perl 写的程序，所以不需要安装，但是他需要使用一些工具。Smokeping 有以下组件组成：RRDtool、Fping、Echoping、Curl、Dig、SSh、Perl 模块，Perl、FCGI、Apache 等。</p>
<h4 id="Smokeping-相关资源"><a href="#Smokeping-相关资源" class="headerlink" title="Smokeping 相关资源"></a>Smokeping 相关资源</h4><ul>
<li>Smokeping官方网站：<a href="http://oss.oetiker.ch/smokeping/" target="_blank" rel="external">http://oss.oetiker.ch/smokeping/</a></li>
<li>Smokeping官方文档：<a href="http://oss.oetiker.ch/smokeping/doc/index.en.html" target="_blank" rel="external">http://oss.oetiker.ch/smokeping/doc/index.en.html</a></li>
</ul>
<h3 id="安装Smokeping"><a href="#安装Smokeping" class="headerlink" title="安装Smokeping"></a>安装Smokeping</h3><h4 id="安装RRDTOOL"><a href="#安装RRDTOOL" class="headerlink" title="安装RRDTOOL"></a>安装RRDTOOL</h4><p>  RRDTool 是由Tobias Oetiker 开发的开源软件，它使用RRD（Round Rebin Databases）作为存储格式，Round robin 是一种处理定量数据以及当前元素指针的技术，RRDTool 主要用来跟踪对象的变化情况，生成改对象变化的趋势图。</p>
<p>  依赖软件包：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum install cairo-devel libxml2-devel pango-devel pango libpng-devel freetype freetype-devel libart_lgpl-devel libidn libidn-devel httpd httpd-devel apr-util-devel apr-devel -y</div></pre></td></tr></table></figure></p>
<p>如果nginx作为webserver，则要安装perl模块<code>perl-Net-Telnet perl-Net-DNS perl-LDAP perl-CGI-SpeedyCGI perl-libwww-perl perl-RadiusPerl perl-IO-Socket-SSL perl-Socket</code></p>
<p>执行安装<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">wget http://oss.oetiker.ch/rrdtool/pub/rrdtool-1.4.7.tar.gz</div><div class="line">tar -zxf rrdtool-1.4.7.tar.gz</div><div class="line">cd rrdtool-1.4.7</div><div class="line">./configure --prefix=/usr/local/rrdtool</div><div class="line">make &amp;&amp; make install</div></pre></td></tr></table></figure></p>
<p> 检验安装是否成功：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">/usr/local/rrdtool/bin/rrdtool</div><div class="line">RRDtool 1.4.7  Copyright 1997-2012 by Tobias Oetiker </div><div class="line">               Compiled May 21 2013 13:42:05</div><div class="line"> </div><div class="line">Usage: rrdtool [options] command command_options</div><div class="line">Valid commands: create, update, updatev, graph, graphv,  dump, restore,</div><div class="line">                last, lastupdate, first, info, fetch, tune,</div><div class="line">                resize, xport, flushcached</div><div class="line"> </div><div class="line">RRDtool is distributed under the Terms of the GNU General</div><div class="line">Public License Version 2. (www.gnu.org/copyleft/gpl.html)</div><div class="line"> </div><div class="line">For more information read the RRD manpages</div></pre></td></tr></table></figure></p>
<p>执行命令如果出现以上输出，表示安装成功，并列出了使用该命令的帮助信息。</p>
<h4 id="安装fping"><a href="#安装fping" class="headerlink" title="安装fping"></a>安装fping</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">wget http://oss.oetiker.ch/smokeping/pub/fping-2.4b2_to3-ipv6.tar.gz</div><div class="line">tar -zxf fping-2.4b2_to3-ipv6.tar.gz</div><div class="line">cd fping-2.4b2_to3-ipv6</div><div class="line">./configure</div><div class="line">make &amp;&amp; make install</div></pre></td></tr></table></figure>
<h4 id="安装echoping"><a href="#安装echoping" class="headerlink" title="安装echoping"></a>安装echoping</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">wget http://sourceforge.net/projects/echoping/files/latest/download</div><div class="line">tar -zxf echoping-6.0.2.tar.gz</div><div class="line">cd echoping-6.0.2</div><div class="line">./configure</div><div class="line">make &amp;&amp; make install</div></pre></td></tr></table></figure>
<h4 id="安装fcgi"><a href="#安装fcgi" class="headerlink" title="安装fcgi"></a>安装fcgi</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">wget http://cpan.communilink.net/authors/id/F/FL/FLORA/FCGI-0.74.tar.gz</div><div class="line">tar -zxf FCGI-0.74.tar.gz</div><div class="line">cd FCGI-0.74</div><div class="line">perl Makefile.PL</div><div class="line">make &amp;&amp; make install</div></pre></td></tr></table></figure>
<h4 id="安装mod-fastcgi"><a href="#安装mod-fastcgi" class="headerlink" title="安装mod_fastcgi"></a>安装mod_fastcgi</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">wget http://www.fastcgi.com/dist/mod_fastcgi-2.4.6.tar.gz</div><div class="line">tar zxf mod_fastcgi-2.4.6.tar.gz</div><div class="line">cd mod_fastcgi-2.4.6</div><div class="line">	apxs -o mod_fastcgi.so -c *.c</div><div class="line">apxs -i -a -n fastcgi .libs/mod_fastcgi.so</div><div class="line">确保httpd.conf有如下配置：</div><div class="line">LoadModule fastcgi_module     /usr/lib/httpd/modules/mod_fastcgi.so</div></pre></td></tr></table></figure>
<p>如果apache为源码安装<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">wget http://www.fastcgi.com/dist/mod_fastcgi-2.4.6.tar.gz</div><div class="line">tar -zxf mod_fastcgi-2.4.6.tar.gz</div><div class="line">cd mod_fastcgi-2.4.6</div><div class="line">cp Makefile.AP2 Makefile</div><div class="line">make top_dir=/usr/local/apache</div><div class="line">make install top_dir=/usr/local/apache</div></pre></td></tr></table></figure></p>
<h4 id="安装smokeping"><a href="#安装smokeping" class="headerlink" title="安装smokeping"></a>安装smokeping</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">wget http://oss.oetiker.ch/smokeping/pub/smokeping-2.6.9.tar.gz</div><div class="line">tar -zxf smokeping-2.6.9.tar.gz</div><div class="line">cd smokeping-2.6.9</div><div class="line">./configure --prefix=/usr/local/smokeping PERL5LIB=/usr/lib/perl5/</div></pre></td></tr></table></figure>
<p>报错<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">checking checking for gnu make availablility... /usr/bin/gmake is GNU make</div><div class="line">checking checking for perl module &apos;RRDs&apos;... Failed</div><div class="line">checking checking for perl module &apos;FCGI&apos;... Ok</div><div class="line">checking checking for perl module &apos;CGI&apos;... Ok</div><div class="line">checking checking for perl module &apos;CGI::Fast&apos;... Ok</div><div class="line">checking checking for perl module &apos;Config::Grammar&apos;... Failed</div><div class="line">checking checking for perl module &apos;Digest::HMAC_MD5&apos;... Ok</div><div class="line">checking checking for perl module &apos;LWP&apos;... Ok</div></pre></td></tr></table></figure></p>
<p>解决<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"> ./setup/build-perl-modules.sh /usr/local/smokeping/thirdparty</div></pre></td></tr></table></figure></p>
<p>或者<code>yum –y install perl-[FAIL-MOUDLES]</code></p>
<p>报错<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">checking checking for perl module &apos;RRDs&apos;... Failed</div></pre></td></tr></table></figure></p>
<p>解决<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">32位：</div><div class="line">ln -s /usr/local/rrdtool/lib/perl/5.10.1/i386-linux-thread-multi/RRDs.pm /usr/lib/perl5/</div><div class="line">ln -s /usr/local/rrdtool/lib/perl/5.10.1/i386-linux-thread-multi/auto/RRDs/RRDs.so /usr/lib/perl5/</div><div class="line"> 64位：</div><div class="line">ln -s /usr/local/rrdtool/lib/perl/5.10.1/x86_64-linux-thread-multi/RRDs.pm /usr/lib64/perl5/</div><div class="line">ln -s /usr/local/rrdtool/lib/perl/5.10.1/x86_64-linux-thread-multi/auto/RRDs/RRDs.so /usr/lib64//perl5/</div></pre></td></tr></table></figure></p>
<p>在执行下面操作，完成安装<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">make clean</div><div class="line">./configure –prefix=/usr/local/smokeping</div><div class="line">/usr/bin/gmake install</div></pre></td></tr></table></figure></p>
<h3 id="配置smokeping"><a href="#配置smokeping" class="headerlink" title="配置smokeping"></a>配置smokeping</h3><h4 id="修改相关文件"><a href="#修改相关文件" class="headerlink" title="修改相关文件"></a>修改相关文件</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">/usr/local/smokeping/bin/smokeping</div><div class="line">/usr/local/smokeping/bin/smokeping_cgi</div><div class="line">将第八行         use lib qw(); # PERL5LIB</div><div class="line">修改为：         use lib qw(/usr/local/rrdtool/lib/perl); # PERL5LIB</div><div class="line"> </div><div class="line">/usr/local/smokeping/htdocs/smokeping.fcgi.dist：</div><div class="line">mv /usr/local/smokeping/htdocs/smokeping.fcgi.dist /usr/local/smokeping/htdocs/smokeping.fcgi</div><div class="line"> </div><div class="line">进入 /usr/local/smokeping/etc</div><div class="line">mv config.dist config</div><div class="line">mv basepage.html.dist basepage.html</div><div class="line">mv smokemail.dist smokemail</div><div class="line">mv tmail.dist tmail</div><div class="line">mv smokeping_secrets.dist smokeping_secrets</div></pre></td></tr></table></figure>
<h4 id="修改主配置config"><a href="#修改主配置config" class="headerlink" title="修改主配置config"></a>修改主配置config</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div></pre></td><td class="code"><pre><div class="line">*** General ***                                                         ##全局配置</div><div class="line">owner    = charlie.cui@zerounix.com                                          ##联系人（显示在网页上）</div><div class="line">contact  = charlie.cui@zerounix.com                                         ##联系人邮箱</div><div class="line">mailhost = mail.zerounix.com                                                ##邮件服务主机</div><div class="line">sendmail = /usr/sbin/sendmail                                           ##发送邮件件的二进制可执行程序</div><div class="line"># NOTE: do not put the Image Cache below cgi-bin</div><div class="line"># since all files under cgi-bin will be executed ... this is not</div><div class="line"># good for images.</div><div class="line">imgcache = /usr/local/smokeping/cache                                   ##生成图片的缓存</div><div class="line">imgurl   = cache                                                ##cache 定义cgi程序显示图片的url目录</div><div class="line">datadir  = /usr/local/smokeping/data                                    ##rrd文件的位置</div><div class="line">piddir  = /usr/local/smokeping/var</div><div class="line">cgiurl   = http://some.url/smokeping.cgi                        ##smokeping访问地址</div><div class="line">smokemail = /usr/local/smokeping/etc/smokemail                          ##发送邮件的邮件内容模板</div><div class="line">tmail = /usr/local/smokeping/etc/tmail                                  ##HTML邮件模板的路径</div><div class="line"># specify this to get syslog logging</div><div class="line">syslogfacility = local0                                                 ##syslog日志记录的设备编号</div><div class="line"># each probe is now run in its own process</div><div class="line"># disable this to revert to the old behaviour</div><div class="line"># concurrentprobes = no</div><div class="line"> </div><div class="line">*** Alerts ***                                                          ##报警配置</div><div class="line">to =  monitor@zerounix.com                                    </div><div class="line">from = mon@zerounix.com</div><div class="line"> </div><div class="line">+网络中断</div><div class="line">type = rtt</div><div class="line">pattern = !=U,==U</div><div class="line">comment = 网络中断</div><div class="line">priority = 1</div><div class="line"> </div><div class="line">+中断恢复</div><div class="line">type = rtt</div><div class="line">pattern = ==U,!=U,!=U</div><div class="line">comment = 中断恢复</div><div class="line">priority = 2</div><div class="line"> </div><div class="line">+严重丢包</div><div class="line">type = loss</div><div class="line">pattern = &gt;50%</div><div class="line">comment = 丢包大于50%</div><div class="line">priority = 3</div><div class="line"> </div><div class="line">+丢包报警</div><div class="line">type = loss</div><div class="line">pattern = &gt;10%,&gt;10%,&gt;10%</div><div class="line">comment = 连续3次丢包10%以上</div><div class="line">priority = 4</div><div class="line"> </div><div class="line">+网络延迟</div><div class="line">type = rtt</div><div class="line">pattern = &gt;180,&gt;180,&gt;180</div><div class="line">comment = 连续3次延时180以上</div><div class="line">priority = 5</div><div class="line"> </div><div class="line"> </div><div class="line">*** Database ***</div><div class="line"> </div><div class="line">step     = 60</div><div class="line">pings    = 10</div><div class="line"> </div><div class="line"># consfn mrhb steps total</div><div class="line"> </div><div class="line">AVERAGE  0.5   1  1008</div><div class="line">AVERAGE  0.5  12  4320</div><div class="line">    MIN  0.5  12  4320</div><div class="line">    MAX  0.5  12  4320</div><div class="line">AVERAGE  0.5 144   720</div><div class="line">    MAX  0.5 144   720</div><div class="line">    MIN  0.5 144   720</div><div class="line"> </div><div class="line">*** Presentation ***</div><div class="line"> </div><div class="line">template = /usr/local/smokeping/etc/basepage.html</div><div class="line"> </div><div class="line">+ charts</div><div class="line"> </div><div class="line">menu = Charts</div><div class="line">title = The most interesting destinations</div><div class="line"> </div><div class="line">++ stddev</div><div class="line">sorter = StdDev(entries=&gt;4)</div><div class="line">title = Top Standard Deviation</div><div class="line">menu = Std Deviation</div><div class="line">format = Standard Deviation %f</div><div class="line"> </div><div class="line">++ max</div><div class="line">sorter = Max(entries=&gt;5)</div><div class="line">title = Top Max Roundtrip Time</div><div class="line">menu = by Max</div><div class="line">format = Max Roundtrip Time %f seconds</div><div class="line"> </div><div class="line">++ loss</div><div class="line">sorter = Loss(entries=&gt;5)</div><div class="line">title = Top Packet Loss</div><div class="line">menu = Loss</div><div class="line">format = Packets Lost %f</div><div class="line"> </div><div class="line">++ median</div><div class="line">sorter = Median(entries=&gt;5)</div><div class="line">title = Top Median Roundtrip Time</div><div class="line">menu = by Median</div><div class="line">format = Median RTT %f seconds</div><div class="line"> </div><div class="line">+ overview</div><div class="line"> </div><div class="line">width = 600</div><div class="line">height = 50</div><div class="line">range = 10h</div><div class="line"> </div><div class="line">+ detail</div><div class="line"> </div><div class="line">width = 600</div><div class="line">height = 200</div><div class="line">unison_tolerance = 2</div><div class="line"> </div><div class="line">&quot;Last 3 Hours&quot;    3h</div><div class="line">&quot;Last 30 Hours&quot;   30h</div><div class="line">&quot;Last 10 Days&quot;    10d</div><div class="line">&quot;Last 400 Days&quot;   400d</div><div class="line"> </div><div class="line">#+ hierarchies</div><div class="line">#++ owner</div><div class="line">#title = Host Owner</div><div class="line">#++ location</div><div class="line">#title = Location</div><div class="line"> </div><div class="line">*** Probes ***</div><div class="line"> </div><div class="line">+ FPing</div><div class="line"> </div><div class="line">binary = /usr/local/sbin/fping</div><div class="line"> </div><div class="line">+ DNS</div><div class="line">binary = /usr/bin/dig</div><div class="line">lookup = name.example</div><div class="line">*** Slaves ***</div><div class="line">secrets=/usr/local/smokeping/etc/smokeping_secrets</div><div class="line">+boomer</div><div class="line">display_name=boomer</div><div class="line">color=0000ff</div><div class="line"> </div><div class="line">+slave2</div><div class="line">display_name=another</div><div class="line">color=00ff00</div><div class="line"> </div><div class="line">*** Targets ***</div><div class="line"> </div><div class="line">probe = FPing</div><div class="line"> </div><div class="line">menu = Top</div><div class="line">title = Network Latency Grapher</div><div class="line">remark = Welcome to the SmokePing website of xxx Company. \</div><div class="line">         Here you will learn all about the latency of our network.</div><div class="line"> </div><div class="line">+ Test</div><div class="line">menu= Targets</div><div class="line">#parents = owner:/Test/James location:/</div><div class="line"> </div><div class="line">++ James</div><div class="line"> </div><div class="line">menu = James</div><div class="line">title =James</div><div class="line">alerts = someloss</div><div class="line">slaves = boomer slave2</div><div class="line">host = james.address</div><div class="line"> </div><div class="line">++ MultiHost</div><div class="line"> </div><div class="line">menu = Multihost</div><div class="line">title = James and James as seen from Boomer</div><div class="line">host = /Test/James /Test/James~boomer</div></pre></td></tr></table></figure>
<p>监控主机是分层结构，用+表示<br>例如第一层“+”，第二层“++”一次类推</p>
<p>master/slave的方式，后面会介绍。</p>
<h4 id="修改其他配置"><a href="#修改其他配置" class="headerlink" title="修改其他配置"></a>修改其他配置</h4><p>根据配置文件所写的，创建数据文件目录：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mkdir /usr/local/smokeping/&#123;htdocs/var,cache,data&#125;</div></pre></td></tr></table></figure></p>
<p>修改数据文件目录的属主及属组<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">chown nobody:nobody /usr/local/smokeping/&#123;htdocs/var,cache,data&#125;</div></pre></td></tr></table></figure></p>
<p><code>/usr/local/smokeping/etc/smokeping_secrets</code>这个文件存放的是<code>master/slave</code>之间的验证密码，现在暂时不用</p>
<h4 id="启动smokeping"><a href="#启动smokeping" class="headerlink" title="启动smokeping"></a>启动smokeping</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo -u nobody /usr/local/smokeping/bin/smokeping --logfile=/var/log/smokeping.log --restart</div></pre></td></tr></table></figure>
<p>报错：<code>ERROR: FPing must be installed setuid root or it will not work
 at (eval 29) line 1</code><br>解决<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">whereis fping</div><div class="line">fping: /usr/local/sbin/fping</div><div class="line">chmod +s /usr/local/sbin/fping</div></pre></td></tr></table></figure></p>
<h4 id="配置apache的配置文件"><a href="#配置apache的配置文件" class="headerlink" title="配置apache的配置文件"></a>配置apache的配置文件</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">Alias /ping /usr/local/smokeping/htdocs/</div><div class="line">&lt;Directory &quot;/usr/local/smokeping/htdocs&quot;&gt;</div><div class="line">       DirectoryIndex index.html smokeping.fcgi</div><div class="line">       Options FollowSymLinks ExecCGI</div><div class="line">       AllowOverride None</div><div class="line">       AddHandler cgi-script .cgi .fcgi</div><div class="line">       Order allow,deny</div><div class="line">       Allow from all</div><div class="line">       AuthName &quot;Smokeping Access&quot;</div><div class="line">       AuthType Basic</div><div class="line">       AuthUserFile /usr/local/smokeping/htdocs/htpasswd.user</div><div class="line">       Require valid-user</div><div class="line">&lt;/Directory&gt;</div></pre></td></tr></table></figure>
<h3 id="FAQ："><a href="#FAQ：" class="headerlink" title="FAQ："></a>FAQ：</h3><p>不出图解决思路</p>
<ul>
<li>使用–debug方式启动smokeping，排查错误</li>
<li>查看smokeping的log</li>
<li>查看apache的error.log</li>
<li>查看文件权限，包括数据文件目录及数据文件，apache和smokeping的启动用户，rrd文件是否有数据</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://czero000.github.io/2015/12/20/install-smokeping.html" data-id="civlqiu8b005oc15mgwptgshc" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/monitor/">monitor</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/smokeping/">smokeping</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-install-rrdtool-trubleshooting" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/20/install-rrdtool-trubleshooting.html" class="article-date">
  <time datetime="2015-12-20T11:37:37.000Z" itemprop="datePublished">2015-12-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/System/">System</a>►<a class="article-category-link" href="/categories/System/RRDTOOL/">RRDTOOL</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/20/install-rrdtool-trubleshooting.html">RRDTOOL安装报错解决</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在安装rrdtool过程中，出现报错，原来是缺少perl模块</p>
<h3 id="报错信息"><a href="#报错信息" class="headerlink" title="报错信息"></a>报错信息</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">Can&apos;t locate ExtUtils/MakeMaker.pm in @INC (@INC contains: /usr/local/lib64/perl5 /usr/local/share/perl5 /usr/lib64/perl5/vendor_perl /usr/share/perl5/vendor_perl /usr/lib64/perl5 /usr/share/perl5 .) at Makefile.PL line 1.</div><div class="line">BEGIN failed--compilation aborted at Makefile.PL line 1.</div><div class="line">make[3]: *** [perl-piped/Makefile] Error 2</div><div class="line">make[3]: Leaving directory `/usr/local/src/rrdtool-1.4.9/bindings&apos;</div><div class="line">make[2]: *** [all-recursive] Error 1</div><div class="line">make[2]: Leaving directory `/usr/local/src/rrdtool-1.4.9/bindings&apos;</div><div class="line">make[1]: *** [all-recursive] Error 1</div><div class="line">make[1]: Leaving directory `/usr/local/src/rrdtool-1.4.9&apos;</div><div class="line">make: *** [all] Error 2</div></pre></td></tr></table></figure>
<h3 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum install perl-ExtUtils-CBuilder perl-ExtUtils-MakeMaker</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://czero000.github.io/2015/12/20/install-rrdtool-trubleshooting.html" data-id="civlqiu8d005rc15mo26plb6p" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/rrdtool/">rrdtool</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-cacti-monitor-switch-trubleshooting" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/20/cacti-monitor-switch-trubleshooting.html" class="article-date">
  <time datetime="2015-12-20T11:24:49.000Z" itemprop="datePublished">2015-12-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/System/">System</a>►<a class="article-category-link" href="/categories/System/Monitor/">Monitor</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/20/cacti-monitor-switch-trubleshooting.html">Cacti监控交换机不显示端口</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Cacti监控cisco设备时图表上的标题显示为GigabitEthernet而并没有指出具体的端口号,一般说来，图片的流量统计描述都是<code>|host_description| - Traffic - |query_ifName|</code>按照这个形式来描述的，对于华为的设备，Gi显示成GigabitEthernet，可能导致后面的模块号，端口好无法显示。原因是Cacti的 ” 最大域 长度(用于显示数据查询区域的最大字符数.) ” 默认为15.</p>
<p>修改方法:</p>
<h3 id="中文版"><a href="#中文版" class="headerlink" title="中文版"></a>中文版</h3><p>配置 -&gt; 设置 -&gt; 可视化 -&gt; 最大域长度 80</p>
<h3 id="英文版"><a href="#英文版" class="headerlink" title="英文版"></a>英文版</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">Console -&gt; Settings -&gt; Visual -&gt; Maximum Field Length: 默认15,修改成80就OK了。</div><div class="line"></div><div class="line">The maximum number of characters to display for a data query field.</div><div class="line"></div><div class="line">Maximum Title Length</div><div class="line"></div><div class="line">The maximum number of characters to display for a graph title.</div><div class="line"></div><div class="line">Maximum Field Length</div><div class="line"></div><div class="line">The maximum number of characters to display for a data query field.</div></pre></td></tr></table></figure>
<p>同时修改了以上2个选项，但是还是不行。</p>
<p>发现流量的绘图引用的是<code>Interface - Traffic (bits/sec)</code>这个模板，</p>
<p><code>console-Graph Templates-Interface - Traffic (bits/sec)</code></p>
<p> 在后面的框框里面加上了<code>- |query_ifName|</code>这部分内容，以前这里是没有的！</p>
<p> 最后重新添加图，发现端口已经出来了！</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://czero000.github.io/2015/12/20/cacti-monitor-switch-trubleshooting.html" data-id="civlqiu4q001rc15mhj5psxu4" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/cacti/">cacti</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/monitor/">monitor</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-iptables-table-full-dropping-packet" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/20/iptables-table-full-dropping-packet.html" class="article-date">
  <time datetime="2015-12-20T11:20:25.000Z" itemprop="datePublished">2015-12-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/System/">System</a>►<a class="article-category-link" href="/categories/System/IPTABLES/">IPTABLES</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/20/iptables-table-full-dropping-packet.html">Ip_conntrack: table full dropping packet解决方法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="问题现象"><a href="#问题现象" class="headerlink" title="问题现象"></a>问题现象</h3><p>监控报警，发现ping有持续丢包，ifconfig看到网卡dripped:xx 一直在增加，messages日志有以下内容<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">kernel: ip_conntrack: table full, dropping packet.</div><div class="line">kernel: printk: 443 messages suppressed.</div><div class="line">kernel: ip_conntrack: table full, dropping packet.</div><div class="line">kernel: printk: 431 messages suppressed.</div></pre></td></tr></table></figure></p>
<p>出现原因是ip_conntrack表满导致的，iptables开启后会加载ip_conntrack模块，来跟踪包。默认情况下ip_conntrack_max大小为65536，<code>nf_conntrack</code> 在CentOS 5 / kernel </p>
<h3 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h3><h4 id="关闭防火墙或者清除防火墙规则，简单粗暴，直接有效"><a href="#关闭防火墙或者清除防火墙规则，简单粗暴，直接有效" class="headerlink" title="关闭防火墙或者清除防火墙规则，简单粗暴，直接有效"></a>关闭防火墙或者清除防火墙规则，简单粗暴，直接有效</h4><h4 id="增加ip-conntrack表大小优化系统参数"><a href="#增加ip-conntrack表大小优化系统参数" class="headerlink" title="增加ip_conntrack表大小优化系统参数"></a>增加ip_conntrack表大小优化系统参数</h4><p>查看ip_conntrack最大大小：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cat /proc/sys/net/ipv4/ip_conntrack_max</div></pre></td></tr></table></figure></p>
<p>查看当前ip_conntrack大小：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wc -l /proc/net/ip_conntrack</div></pre></td></tr></table></figure></p>
<p>状态跟踪表的最大行数的设定，理论最大值 <code>CONNTRACK_MAX = RAMSIZE (in bytes) / 16384 / (ARCH / 32)</code></p>
<p>以64G的64位操作系统为例，<code>CONNTRACK_MAX = 64*1024*1024*1024/16384/2 = 2097152</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sysctl –w net.netfilter.nf_conntrack_max = 2097152</div></pre></td></tr></table></figure></p>
<p>相关系统参数调优<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">cat /etc/sysctl.conf </div><div class="line">net.netfilter.nf_conntrack_max  =   1048576  </div><div class="line">net.netfilter.ip_conntrack_tcp_timeout_established  =   3600  </div><div class="line">net.netfilter.nf_conntrack_tcp_timeout_close_wait  =   60  </div><div class="line">net.netfilter.nf_conntrack_tcp_timeout_fin_wait  =   120  </div><div class="line">net.netfilter.nf_conntrack_tcp_timeout_time_wait  =   120</div></pre></td></tr></table></figure></p>
<p>sysctl -p  使其生效<br>这种解决方案，需要在每次iptables重启后，都要执行一遍sysctl -p， 也可以将sysctl -p写入到iptables启动脚本中。 不过ip_conntrack满的隐患还是存在的。</p>
<h4 id="不加载ip-conntrack模块"><a href="#不加载ip-conntrack模块" class="headerlink" title="不加载ip_conntrack模块"></a>不加载ip_conntrack模块</h4><p>防火墙不加载任何额外模块 编辑<code>/etc/sysconfig/iptables-config</code>配置文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">IPTABLES_MODULES=&quot;&quot; # 不需要任何附加模块</div><div class="line">IPTABLES_MODULES_UNLOAD=&quot;no&quot; # 避免iptables重启后sysctl中对应的参数被重置为系统默认值</div><div class="line">IPTABLES_SAVE_ON_STOP=&quot;no&quot;</div><div class="line">IPTABLES_SAVE_ON_RESTART=&quot;no&quot;</div><div class="line">IPTABLES_SAVE_COUNTER=&quot;no&quot;</div><div class="line">IPTABLES_STATUS_NUMERIC=&quot;yes&quot;</div><div class="line">IPTABLES_STATUS_VERBOSE=&quot;no&quot;</div><div class="line">IPTABLES_STATUS_LINENUMBERS=&quot;no&quot;</div></pre></td></tr></table></figure></p>
<p>删除nf_conntrack和相关的依赖模块<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">rmmod nf_conntrack_ipv4 </div><div class="line">rmmod nf_conntrack_ipv6 </div><div class="line">rmmod xt_state </div><div class="line">rmmod xt_CT </div><div class="line">rmmod xt_conntrack </div><div class="line">rmmod iptable_nat </div><div class="line">rmmod ipt_REDIRECT </div><div class="line">rmmod nf_nat </div><div class="line">rmmod nf_conntrack</div></pre></td></tr></table></figure></p>
<p>禁用追踪模块，把它加入黑名单<code>/etc/modprobe.d/blacklist.conf</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"># 禁用 nf_conntrack 模块 </div><div class="line">blacklist nf_conntrack </div><div class="line">blacklist nf_conntrack_ipv6 </div><div class="line">blacklist xt_conntrack </div><div class="line">blacklist nf_conntrack_ftp </div><div class="line">blacklist xt_state </div><div class="line">blacklist iptable_nat </div><div class="line">blacklist ipt_REDIRECT </div><div class="line">blacklist nf_nat </div><div class="line">blacklist nf_conntrack_ipv4</div></pre></td></tr></table></figure></p>
<p>/etc/sysconfig/iptables 不要配置状态的规则<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT</div></pre></td></tr></table></figure></p>
<p>优化conntrack模块，请参考下面文章<br><a href="http://wiki.khnet.info/index.php/Conntrack_tuning" target="_blank" rel="external">http://wiki.khnet.info/index.php/Conntrack_tuning</a><br><a href="http://blog.yorkgu.me/wp-content/uploads/2012/02/netfilter_conntrack_perf-0.8.txt" target="_blank" rel="external">http://blog.yorkgu.me/wp-content/uploads/2012/02/netfilter_conntrack_perf-0.8.txt</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://czero000.github.io/2015/12/20/iptables-table-full-dropping-packet.html" data-id="civlqiu7p004yc15mdud77t4b" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iptables/">iptables</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/page/15/">&laquo; __('prev')</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/">14</a><a class="page-number" href="/page/15/">15</a><span class="page-number current">16</span><a class="page-number" href="/page/17/">17</a><a class="page-number" href="/page/18/">18</a><span class="space">&hellip;</span><a class="page-number" href="/page/21/">21</a><a class="extend next" rel="next" href="/page/17/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Blog/">Blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Database/">Database</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Database/MySQL/">MySQL</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Database/Redis/">Redis</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Markdown/">Markdown</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/">System</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/System/Bash/">Bash</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/CentOS/">CentOS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/Command/">Command</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/DNS/">DNS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/Debian/">Debian</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/Git/">Git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/Gitlab/">Gitlab</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/IPTABLES/">IPTABLES</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/L2TP/">L2TP</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/Monitor/">Monitor</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/NFS/">NFS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/Other/">Other</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/Proxy/">Proxy</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/RRDTOOL/">RRDTOOL</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/Security/">Security</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Web/">Web</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Web/Apache/">Apache</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Web/Nginx/">Nginx</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/虚拟化/">虚拟化</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/虚拟化/KVM/">KVM</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/运维技术/">运维技术</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/运维技术/Docker/">Docker</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/运维技术/ELK/">ELK</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/运维技术/GlusterFS/">GlusterFS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/运维技术/MooseFS/">MooseFS</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/运维自动化/">运维自动化</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/运维自动化/Ansible/">Ansible</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/运维自动化/Cobbler/">Cobbler</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/运维自动化/SaltStack/">SaltStack</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/随笔/">随笔</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Blog/">Blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP状态码/">HTTP状态码</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/">Hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MooseFS/">MooseFS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ansible/">ansible</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apache/">apache</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/awk/">awk</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bash/">bash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bind/">bind</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cacti/">cacti</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/centos/">centos</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/chinese/">chinese</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/chromium/">chromium</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cobbler/">cobbler</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/curl/">curl</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/debian/">debian</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/download/">download</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dropbox/">dropbox</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/elasticsearch/">elasticsearch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/elasticsearch-elk/">elasticsearch.elk</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/elk/">elk</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/em1/">em1</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/epel/">epel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/eth0/">eth0</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fishshell/">fishshell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gitlab/">gitlab</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gitolite/">gitolite</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/glances/">glances</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/glibc/">glibc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/glusterfs/">glusterfs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gpt/">gpt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/https/">https</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iftop/">iftop</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/inotify/">inotify</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iptables/">iptables</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kernel/">kernel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kibana/">kibana</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kvm/">kvm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/l2tp/">l2tp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/logrotate/">logrotate</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/logstash/">logstash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/logstash-forwarder/">logstash-forwarder</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/markdown/">markdown</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/megacli/">megacli</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mindmap/">mindmap</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/monitor/">monitor</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mycli/">mycli</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nfs/">nfs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/">nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx-vim/">nginx.vim</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ntp/">ntp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/openssl/">openssl</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/parted/">parted</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/passwd/">passwd</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php/">php</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php-fpm/">php-fpm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pptp/">pptp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/proxy/">proxy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/raid/">raid</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redis/">redis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rrdtool/">rrdtool</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rsync/">rsync</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/saltstack/">saltstack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/security/">security</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/servicewrapper/">servicewrapper</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shadowsocks/">shadowsocks</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/smokeping/">smokeping</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/socks5/">socks5</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ss5/">ss5</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/transmission/">transmission</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ubuntu/">ubuntu</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/virsh/">virsh</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vncserver/">vncserver</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xz/">xz</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/yum/">yum</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/zsh/">zsh</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/书写指南/">书写指南</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Blog/" style="font-size: 10px;">Blog</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/HTTP状态码/" style="font-size: 10px;">HTTP状态码</a> <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/MooseFS/" style="font-size: 10px;">MooseFS</a> <a href="/tags/ansible/" style="font-size: 17.5px;">ansible</a> <a href="/tags/apache/" style="font-size: 10px;">apache</a> <a href="/tags/awk/" style="font-size: 11.25px;">awk</a> <a href="/tags/bash/" style="font-size: 18.75px;">bash</a> <a href="/tags/bind/" style="font-size: 11.25px;">bind</a> <a href="/tags/cacti/" style="font-size: 10px;">cacti</a> <a href="/tags/centos/" style="font-size: 12.5px;">centos</a> <a href="/tags/chinese/" style="font-size: 11.25px;">chinese</a> <a href="/tags/chromium/" style="font-size: 10px;">chromium</a> <a href="/tags/cobbler/" style="font-size: 11.25px;">cobbler</a> <a href="/tags/curl/" style="font-size: 10px;">curl</a> <a href="/tags/debian/" style="font-size: 10px;">debian</a> <a href="/tags/docker/" style="font-size: 12.5px;">docker</a> <a href="/tags/download/" style="font-size: 10px;">download</a> <a href="/tags/dropbox/" style="font-size: 10px;">dropbox</a> <a href="/tags/elasticsearch/" style="font-size: 10px;">elasticsearch</a> <a href="/tags/elasticsearch-elk/" style="font-size: 10px;">elasticsearch.elk</a> <a href="/tags/elk/" style="font-size: 12.5px;">elk</a> <a href="/tags/em1/" style="font-size: 10px;">em1</a> <a href="/tags/epel/" style="font-size: 10px;">epel</a> <a href="/tags/eth0/" style="font-size: 10px;">eth0</a> <a href="/tags/fishshell/" style="font-size: 10px;">fishshell</a> <a href="/tags/git/" style="font-size: 13.75px;">git</a> <a href="/tags/gitlab/" style="font-size: 10px;">gitlab</a> <a href="/tags/gitolite/" style="font-size: 10px;">gitolite</a> <a href="/tags/glances/" style="font-size: 10px;">glances</a> <a href="/tags/glibc/" style="font-size: 10px;">glibc</a> <a href="/tags/glusterfs/" style="font-size: 12.5px;">glusterfs</a> <a href="/tags/gpt/" style="font-size: 10px;">gpt</a> <a href="/tags/https/" style="font-size: 10px;">https</a> <a href="/tags/iftop/" style="font-size: 10px;">iftop</a> <a href="/tags/inotify/" style="font-size: 11.25px;">inotify</a> <a href="/tags/iptables/" style="font-size: 10px;">iptables</a> <a href="/tags/kernel/" style="font-size: 10px;">kernel</a> <a href="/tags/kibana/" style="font-size: 10px;">kibana</a> <a href="/tags/kvm/" style="font-size: 10px;">kvm</a> <a href="/tags/l2tp/" style="font-size: 10px;">l2tp</a> <a href="/tags/logrotate/" style="font-size: 10px;">logrotate</a> <a href="/tags/logstash/" style="font-size: 11.25px;">logstash</a> <a href="/tags/logstash-forwarder/" style="font-size: 10px;">logstash-forwarder</a> <a href="/tags/markdown/" style="font-size: 10px;">markdown</a> <a href="/tags/megacli/" style="font-size: 11.25px;">megacli</a> <a href="/tags/mindmap/" style="font-size: 11.25px;">mindmap</a> <a href="/tags/monitor/" style="font-size: 15px;">monitor</a> <a href="/tags/mycli/" style="font-size: 10px;">mycli</a> <a href="/tags/mysql/" style="font-size: 10px;">mysql</a> <a href="/tags/nfs/" style="font-size: 10px;">nfs</a> <a href="/tags/nginx/" style="font-size: 20px;">nginx</a> <a href="/tags/nginx-vim/" style="font-size: 10px;">nginx.vim</a> <a href="/tags/ntp/" style="font-size: 10px;">ntp</a> <a href="/tags/openssl/" style="font-size: 10px;">openssl</a> <a href="/tags/parted/" style="font-size: 10px;">parted</a> <a href="/tags/passwd/" style="font-size: 10px;">passwd</a> <a href="/tags/php/" style="font-size: 10px;">php</a> <a href="/tags/php-fpm/" style="font-size: 10px;">php-fpm</a> <a href="/tags/pptp/" style="font-size: 11.25px;">pptp</a> <a href="/tags/proxy/" style="font-size: 15px;">proxy</a> <a href="/tags/python/" style="font-size: 12.5px;">python</a> <a href="/tags/raid/" style="font-size: 10px;">raid</a> <a href="/tags/redis/" style="font-size: 10px;">redis</a> <a href="/tags/rrdtool/" style="font-size: 10px;">rrdtool</a> <a href="/tags/rsync/" style="font-size: 10px;">rsync</a> <a href="/tags/saltstack/" style="font-size: 16.25px;">saltstack</a> <a href="/tags/security/" style="font-size: 10px;">security</a> <a href="/tags/servicewrapper/" style="font-size: 10px;">servicewrapper</a> <a href="/tags/shadowsocks/" style="font-size: 10px;">shadowsocks</a> <a href="/tags/smokeping/" style="font-size: 13.75px;">smokeping</a> <a href="/tags/socks5/" style="font-size: 11.25px;">socks5</a> <a href="/tags/ss5/" style="font-size: 10px;">ss5</a> <a href="/tags/transmission/" style="font-size: 10px;">transmission</a> <a href="/tags/ubuntu/" style="font-size: 10px;">ubuntu</a> <a href="/tags/virsh/" style="font-size: 10px;">virsh</a> <a href="/tags/vncserver/" style="font-size: 10px;">vncserver</a> <a href="/tags/xz/" style="font-size: 10px;">xz</a> <a href="/tags/yum/" style="font-size: 10px;">yum</a> <a href="/tags/zsh/" style="font-size: 10px;">zsh</a> <a href="/tags/书写指南/" style="font-size: 10px;">书写指南</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">July 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">June 2015</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/11/17/Git-basic.html">Git基础</a>
          </li>
        
          <li>
            <a href="/2016/10/26/ansible-managment-windows.html">使用ansible管理windows主机</a>
          </li>
        
          <li>
            <a href="/2016/10/20/git-different-sshkey.html">配置不同ssh-key访问不同git仓库</a>
          </li>
        
          <li>
            <a href="/2016/10/20/l2tp-vpn.html">IPsec和L2TP搭建VPN</a>
          </li>
        
          <li>
            <a href="/2016/10/20/ansible-dynamic-create-vhost.html">通过jinja2生成虚拟主机配置</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 C.c<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>