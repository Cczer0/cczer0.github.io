<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Linux, Python" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.2" />






<meta name="description" content="Love Linux ♥ Love Python. 猴赛雷">
<meta property="og:type" content="website">
<meta property="og:title" content="Czero's Blog">
<meta property="og:url" content="http://czero000.github.io/page/4/index.html">
<meta property="og:site_name" content="Czero's Blog">
<meta property="og:description" content="Love Linux ♥ Love Python. 猴赛雷">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Czero's Blog">
<meta name="twitter:description" content="Love Linux ♥ Love Python. 猴赛雷">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '主编大人'
    }
  };
</script>




  <link rel="canonical" href="http://czero000.github.io/page/4/"/>


  <title> Czero's Blog </title>
</head>

<body itemscope itemtype="//schema.org/WebPage" lang="zh-Hans">

  



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?8598c7081881fc1631368a001586d2c8";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>








  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="//schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Czero's Blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">点滴分享 多彩生活</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/03/11/learn-python-if-statement.html" itemprop="url">
                  Python学习--条件语句
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-03-11T18:17:16+08:00" content="2016-03-11">
              2016-03-11
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/03/11/learn-python-if-statement.html#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/03/11/learn-python-if-statement.html" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/03/11/learn-python-if-statement.html" class="leancloud_visitors" data-flag-title="Python学习--条件语句">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<p>Python条件语句是通过一条或者多条语句的执行结果（True或者False）来决定执行的代码块。通过下面图来了解条件语句执行过程。</p>
<p> <img src="http://www.zerounix.com/images/language/python/if-statement.jpg" alt="if-statement"></p>
<p>Python程序语言执行任何非0和非空值为true，0或者null为false。</p>
<p>if语句用于控制程序的执行，形式如下</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> 判断条件:</div><div class="line">    执行语句</div><div class="line"><span class="keyword">else</span>:</div><div class="line">    执行语句</div></pre></td></tr></table></figure>
<p>其中<code>判断条件</code>成立时，则执行后面语句，而执行内容可以为多行，以缩进来区分表示同一范围。<code>else</code>为可选语句，当条件不成立时而执行相关语句。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/python</span></div><div class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></div><div class="line"></div><div class="line"><span class="comment"># 例1：if 基本用法</span></div><div class="line"></div><div class="line">flag = <span class="keyword">False</span></div><div class="line">name = <span class="string">'luren'</span></div><div class="line"><span class="keyword">if</span> name == <span class="string">'python'</span>:         <span class="comment"># 判断变量否为'python'</span></div><div class="line">    flag = <span class="keyword">True</span>          <span class="comment"># 条件成立时设置标志为真</span></div><div class="line">    <span class="keyword">print</span> <span class="string">'welcome boss'</span>    <span class="comment"># 并输出欢迎信息</span></div><div class="line"><span class="keyword">else</span>:</div><div class="line">    <span class="keyword">print</span> name              <span class="comment"># 条件不成立时输出变量名称</span></div></pre></td></tr></table></figure>
<p>输出结果为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>luren			<span class="comment"># 输出结果</span></div></pre></td></tr></table></figure>
<p>if 语句的判断条件可以用&gt;（大于）、&lt;(小于)、==（等于）、&gt;=（大于等于）、&lt;=（小于等于）来表示其关系。</p>
<p>当判断条件为多个值是，可以使用以下形式：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> 判断条件<span class="number">1</span>:</div><div class="line">    执行语句<span class="number">1</span>……</div><div class="line"><span class="keyword">elif</span> 判断条件<span class="number">2</span>:</div><div class="line">    执行语句<span class="number">2</span>……</div><div class="line"><span class="keyword">elif</span> 判断条件<span class="number">3</span>:</div><div class="line">    执行语句<span class="number">3</span>……</div><div class="line"><span class="keyword">else</span>:</div><div class="line">    执行语句<span class="number">4</span>……</div></pre></td></tr></table></figure>
<p>实例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/python</span></div><div class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></div><div class="line"><span class="comment"># 例2：elif用法</span></div><div class="line"></div><div class="line">num = <span class="number">5</span>     </div><div class="line"><span class="keyword">if</span> num == <span class="number">3</span>:            <span class="comment"># 判断num的值</span></div><div class="line">    <span class="keyword">print</span> <span class="string">'boss'</span>        </div><div class="line"><span class="keyword">elif</span> num == <span class="number">2</span>:</div><div class="line">    <span class="keyword">print</span> <span class="string">'user'</span></div><div class="line"><span class="keyword">elif</span> num == <span class="number">1</span>:</div><div class="line">    <span class="keyword">print</span> <span class="string">'worker'</span></div><div class="line"><span class="keyword">elif</span> num &lt; <span class="number">0</span>:           <span class="comment"># 值小于零时输出</span></div><div class="line">    <span class="keyword">print</span> <span class="string">'error'</span></div><div class="line"><span class="keyword">else</span>:</div><div class="line">    <span class="keyword">print</span> <span class="string">'roadman'</span>     <span class="comment"># 条件均不成立时输出</span></div></pre></td></tr></table></figure>
<p>输出结果为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>roadman		<span class="comment"># 输出结果</span></div></pre></td></tr></table></figure>
<p>由于 python 并不支持 switch 语句，所以多个条件判断，只能用 elif 来实现，如果判断需要多个条件需同时判断时，可以使用 or （或），表示两个条件有一个成立时判断条件成功；使用 and （与）时，表示只有两个条件同时成立的情况下，判断条件才成功。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/python</span></div><div class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></div><div class="line"></div><div class="line"><span class="comment"># 例3：if语句多个条件</span></div><div class="line"></div><div class="line">num = <span class="number">9</span></div><div class="line"><span class="keyword">if</span> num &gt;= <span class="number">0</span> <span class="keyword">and</span> num &lt;= <span class="number">10</span>:    <span class="comment"># 判断值是否在0~10之间</span></div><div class="line">    <span class="keyword">print</span> <span class="string">'hello'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>hello		<span class="comment"># 输出结果</span></div><div class="line"></div><div class="line">num = <span class="number">10</span></div><div class="line"><span class="keyword">if</span> num &lt; <span class="number">0</span> <span class="keyword">or</span> num &gt; <span class="number">10</span>:    <span class="comment"># 判断值是否在小于0或大于10</span></div><div class="line">    <span class="keyword">print</span> <span class="string">'hello'</span></div><div class="line"><span class="keyword">else</span>:</div><div class="line">	<span class="keyword">print</span> <span class="string">'undefine'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>undefine		<span class="comment"># 输出结果</span></div><div class="line"></div><div class="line">num = <span class="number">8</span></div><div class="line"><span class="comment"># 判断值是否在0~5或者10~15之间</span></div><div class="line"><span class="keyword">if</span> (num &gt;= <span class="number">0</span> <span class="keyword">and</span> num &lt;= <span class="number">5</span>) <span class="keyword">or</span> (num &gt;= <span class="number">10</span> <span class="keyword">and</span> num &lt;= <span class="number">15</span>):    </div><div class="line">    <span class="keyword">print</span> <span class="string">'hello'</span></div><div class="line"><span class="keyword">else</span>:</div><div class="line">    <span class="keyword">print</span> <span class="string">'undefine'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>undefine		<span class="comment"># 输出结果</span></div></pre></td></tr></table></figure>
<p>当if有多个条件时可使用括号来区分判断的先后顺序，括号中的判断优先执行，此外 and 和 or 的优先级低于&gt;（大于）、&lt;（小于）等判断符号，即大于和小于在没有括号的情况下会比与或要优先判断。</p>
<h3 id="简单的语句组"><a href="#简单的语句组" class="headerlink" title="简单的语句组"></a>简单的语句组</h3><p>你也可以在同一行的位置上使用if条件判断语句，如下实例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/python </span></div><div class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></div><div class="line"> </div><div class="line">var = <span class="number">100</span> </div><div class="line"> </div><div class="line"><span class="keyword">if</span> ( var  == <span class="number">100</span> ) : <span class="keyword">print</span> <span class="string">"变量 var 的值为100"</span> </div><div class="line"> </div><div class="line"><span class="keyword">print</span> <span class="string">"Good bye!"</span></div></pre></td></tr></table></figure>
<p>以上代码执行输出结果如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">变量 var 的值为<span class="number">100</span></div><div class="line">Good bye!</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/03/10/learn-python-strings.html" itemprop="url">
                  Python学习--字符串
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-03-10T15:41:11+08:00" content="2016-03-10">
              2016-03-10
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/03/10/learn-python-strings.html#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/03/10/learn-python-strings.html" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/03/10/learn-python-strings.html" class="leancloud_visitors" data-flag-title="Python学习--字符串">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<h3 id="Python字符串"><a href="#Python字符串" class="headerlink" title="Python字符串"></a>Python字符串</h3><p>字符串是Python中最为常见的数据类型，通过引号来创建字符串。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">var1 = <span class="string">'Hello World!'</span></div><div class="line">var2 = <span class="string">'Python Programming'</span></div></pre></td></tr></table></figure></p>
<h3 id="Python访问字符串的值"><a href="#Python访问字符串的值" class="headerlink" title="Python访问字符串的值"></a>Python访问字符串的值</h3><p>Python不支持单字符串类型，单字符串在Python也是作为一个字符串使用。Python访问子字符串，可以使用方括号来截取字符串</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">// 脚本</div><div class="line"><span class="comment">#!/usr/bin/env python</span></div><div class="line"><span class="comment"># -*- coding: utf8 -*-</span></div><div class="line">var1 = <span class="string">'Hello World'</span></div><div class="line">var2 = <span class="string">'Python Programming'</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">print</span> <span class="string">"var1[0]: "</span>, var1[<span class="number">0</span>]</div><div class="line"><span class="keyword">print</span> <span class="string">"var2[1:5]: "</span>, var2[<span class="number">1</span>:<span class="number">5</span>]</div><div class="line"></div><div class="line">// 输出</div><div class="line">var1[<span class="number">0</span>]:  H</div><div class="line">var2[<span class="number">1</span>:<span class="number">5</span>]:  ytho</div></pre></td></tr></table></figure>
<h3 id="Python-字符串更新"><a href="#Python-字符串更新" class="headerlink" title="Python 字符串更新"></a>Python 字符串更新</h3><p>你可以对已存在的字符串进行修改，并赋值给另外一个变量</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">//脚本</div><div class="line"><span class="comment">#!/usr/bin/env python</span></div><div class="line"><span class="comment"># -*- coding: utf8 -*-</span></div><div class="line">var1 = <span class="string">'Hello World'</span></div><div class="line">var2 = <span class="string">'Python Programming'</span></div><div class="line"></div><div class="line"><span class="keyword">print</span> <span class="string">"Updated String :-"</span>, var1[:<span class="number">6</span>] +<span class="string">' Python'</span>*<span class="number">2</span></div><div class="line"></div><div class="line">//输出</div><div class="line">Updated String :- Hello  Python Python</div></pre></td></tr></table></figure>
<h3 id="Python转义字符"><a href="#Python转义字符" class="headerlink" title="Python转义字符"></a>Python转义字符</h3><p>需要在字符中使用特殊字符时，python用反斜杠<code>\</code>转义字符</p>
<table>
<thead>
<tr>
<th>转义字符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>\（在行尾）</td>
<td>续航符</td>
</tr>
<tr>
<td>\\</td>
<td>反斜杠</td>
</tr>
<tr>
<td>\’</td>
<td>单引号</td>
</tr>
<tr>
<td>\”</td>
<td>双引号</td>
</tr>
<tr>
<td>\a</td>
<td>响铃</td>
</tr>
<tr>
<td>\b</td>
<td>退格</td>
</tr>
<tr>
<td>\e</td>
<td>转义</td>
</tr>
<tr>
<td>\000</td>
<td>空</td>
</tr>
<tr>
<td>\n</td>
<td>换行</td>
</tr>
<tr>
<td>\v</td>
<td>纵向制表符</td>
</tr>
<tr>
<td>\t</td>
<td>横向制表符</td>
</tr>
<tr>
<td>\r</td>
<td>回车</td>
</tr>
<tr>
<td>\f</td>
<td>换页</td>
</tr>
<tr>
<td>\oyy</td>
<td>八进制数，yy代表字符，例如：\o12代表换行</td>
</tr>
<tr>
<td>\xyy</td>
<td>十六进制数，yy代表字符，例如：\x0a代表换行</td>
</tr>
<tr>
<td>\other</td>
<td>其他的字符以普通格式输出</td>
</tr>
</tbody>
</table>
<h3 id="Python字符串运算符"><a href="#Python字符串运算符" class="headerlink" title="Python字符串运算符"></a>Python字符串运算符</h3><p>变量a的值为字符串<code>hello</code>,变量b的值为字符串<code>Python</code></p>
<table>
<thead>
<tr>
<th>操作符</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody>
<tr>
<td>+</td>
<td>字符串连接</td>
<td>a + b 输出结果： HelloPython</td>
</tr>
<tr>
<td>*</td>
<td>重复输出字符串</td>
<td>a*2 输出结果：HelloHello</td>
</tr>
<tr>
<td>[]</td>
<td>通过索引获取字符串中的字符</td>
<td>a[1] 输出结果 <strong>e</strong></td>
</tr>
<tr>
<td>[ :]</td>
<td>截取字符串中的一部分</td>
<td>a[1:4] 输出结果<strong>ell</strong></td>
</tr>
<tr>
<td>in</td>
<td>成员运算符 - 如果字符串中包含给定的字符返回 True</td>
<td><strong>H in a</strong> 输出结果 1</td>
</tr>
<tr>
<td>not in</td>
<td>成员运算符 - 如果字符串中不包含给定的字符返回 True</td>
<td><strong>M not in a</strong> 输出结果 1</td>
</tr>
<tr>
<td>r/R</td>
<td>原始字符串 - 原始字符串：所有的字符串都是直接按照字面的意思来使用，没有转义特殊或不能打印的字符。 原始字符串除在字符串的第一个引号前加上字母”r”（可以大小写）以外，与普通字符串有着几乎完全相同的语法</td>
<td><strong>print r’\n’</strong> prints \n 和 <strong>print R’\n’</strong>prints \n</td>
</tr>
<tr>
<td>%</td>
<td>格式字符串</td>
<td>后面会讲</td>
</tr>
</tbody>
</table>
<h3 id="Python字符串格式化"><a href="#Python字符串格式化" class="headerlink" title="Python字符串格式化"></a>Python字符串格式化</h3><p>Python支持格式化字符串输出，尽管肯能用到非常复杂的表达式，但最基本的用法是将一个值插入到一个有字符串格式符%s的字符串中，在Python中，字符串格式化使用与C中sprintf函数一样的语法。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">// 脚本</div><div class="line"><span class="comment">#!/usr/bin/env python</span></div><div class="line"><span class="comment"># -*- coding: utf8 -*-</span></div><div class="line"><span class="keyword">print</span> <span class="string">"My name is %s and weight is %d kg"</span> % (<span class="number">1.0</span>, <span class="number">21.90</span>)</div><div class="line"></div><div class="line">// 输出</div><div class="line">My name <span class="keyword">is</span> <span class="number">1.0</span> <span class="keyword">and</span> weight <span class="keyword">is</span> <span class="number">21</span> kg</div></pre></td></tr></table></figure>
<p>python字符串格式化符号、</p>
<table>
<thead>
<tr>
<th>符号</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>%c</td>
<td>格式化字符及ASCII码</td>
</tr>
<tr>
<td>%s</td>
<td>格式化字符串</td>
</tr>
<tr>
<td>%d</td>
<td>格式化整数</td>
</tr>
<tr>
<td>%u</td>
<td>格式化无符号整数</td>
</tr>
<tr>
<td>%o</td>
<td>格式化无符号八进制数</td>
</tr>
<tr>
<td>%x</td>
<td>格式化无符号十六进制数</td>
</tr>
<tr>
<td>%X</td>
<td>格式化无符号十六进制数 大写</td>
</tr>
<tr>
<td>%f</td>
<td>格式化浮点数字，可以指定小数点后精度</td>
</tr>
<tr>
<td>%e</td>
<td>用科学计数法格式化浮点数</td>
</tr>
<tr>
<td>%E</td>
<td>作用同%e，</td>
</tr>
<tr>
<td>%g</td>
<td>%f和%e的简写</td>
</tr>
<tr>
<td>%G</td>
<td>%f 和 %E 的简写</td>
</tr>
<tr>
<td>%p</td>
<td>用十六进制数格式化变量的地址</td>
</tr>
</tbody>
</table>
<p>格式化操作符辅助指令</p>
<table>
<thead>
<tr>
<th>符号</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>*</td>
<td>定义宽度或者小数点精度</td>
</tr>
<tr>
<td>-</td>
<td>用作左对齐</td>
</tr>
<tr>
<td>+</td>
<td>在正数前面显示<code>+</code></td>
</tr>
<tr>
<td><sp></sp></td>
<td>在正数前面显示空格</td>
</tr>
<tr>
<td>#</td>
<td>在八进制数前面显示<code>0</code>，在十六进制数前面显示<code>0X</code>（取决于用的是x还是X）</td>
</tr>
<tr>
<td>0</td>
<td>显示的数字前面填充<code>0</code>而不是默认的空格</td>
</tr>
<tr>
<td>%</td>
<td><code>%%</code>输出一个单一的<code>%</code></td>
</tr>
<tr>
<td>(var)</td>
<td>映射变量(字典)</td>
</tr>
<tr>
<td>m.n.</td>
<td>m是显示的最小总宽度，n是小数点后的位数</td>
</tr>
</tbody>
</table>
<h3 id="Python三引号"><a href="#Python三引号" class="headerlink" title="Python三引号"></a>Python三引号</h3><p>Python中三引号可以将复杂的字符串进行赋值，三引号允许一个字符串跨多行，字符串可以包含换行符、制表符以及其他特殊字符。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>hi = <span class="string">'''hi</span></div><div class="line"><span class="meta">... </span>there'''</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> hi</div><div class="line">hi</div><div class="line">there</div></pre></td></tr></table></figure>
<p>三引号让程序员从引号和特殊字符串的泥潭里面解脱出来，自始至终保持一小块字符串的格式是所谓的WYSIWYG（所见即所得）格式的。</p>
<p>一个典型的用例是，当你需要一块HTML或者SQL时，这时用字符串组合，特殊字符串转义将会非常的繁琐。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">errHTML = <span class="string">'''</span></div><div class="line">&lt;HTML&gt;&lt;HEAD&gt;&lt;TITLE&gt;</div><div class="line">Friends CGI Demo&lt;/TITLE&gt;&lt;/HEAD&gt;</div><div class="line">&lt;BODY&gt;&lt;H3&gt;ERROR&lt;/H3&gt;</div><div class="line">&lt;B&gt;%s&lt;/B&gt;&lt;P&gt;</div><div class="line">&lt;FORM&gt;&lt;INPUT TYPE=button VALUE=Back</div><div class="line">ONCLICK="window.history.back()"&gt;&lt;/FORM&gt;</div><div class="line">&lt;/BODY&gt;&lt;/HTML&gt;</div><div class="line">'''</div><div class="line">cursor.execute(<span class="string">'''</span></div><div class="line">CREATE TABLE users (  </div><div class="line">login VARCHAR(8), </div><div class="line">uid INTEGER,</div><div class="line">prid INTEGER)</div><div class="line">''')</div></pre></td></tr></table></figure>
<h3 id="Unicode字符串"><a href="#Unicode字符串" class="headerlink" title="Unicode字符串"></a>Unicode字符串</h3><p>Python中定义一个Unicode字符串和定义一个普通字符串一样简单</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">u'Hello World !'</span></div><div class="line"><span class="string">u'Hello World !'</span></div></pre></td></tr></table></figure>
<p>引号前小写的<code>u</code>表示这里创建的是一个Unicode字符串。如果想加入一个特殊字符，使用Python的Unicode-Escape编码</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">u'Hello\u0020World!'</span></div><div class="line"><span class="string">u'Hello World!'</span></div></pre></td></tr></table></figure>
<p>被替换的<code>\u0020</code>标识表示在给定位置插入编码值为0x0020的Unicode字符（空格）</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/03/09/learn-python-numbers.html" itemprop="url">
                  Python学习--数字
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-03-09T16:11:27+08:00" content="2016-03-09">
              2016-03-09
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/03/09/learn-python-numbers.html#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/03/09/learn-python-numbers.html" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/03/09/learn-python-numbers.html" class="leancloud_visitors" data-flag-title="Python学习--数字">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<h2 id="Python数字"><a href="#Python数字" class="headerlink" title="Python数字"></a>Python数字</h2><p>python数字数据类型用于存储数值，数据类型是不允许改变的，如果改变数字数据类型的值，将重新分配内存空间</p>
<ul>
<li>创建数字变量赋值</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">var1 = <span class="number">1</span></div><div class="line">var2 = <span class="number">0</span></div></pre></td></tr></table></figure>
<ul>
<li>删除数字对象引用</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">del</span> var1[,var2][,...varN]</div><div class="line"><span class="keyword">del</span> var</div><div class="line"><span class="keyword">del</span> var_a var_b</div></pre></td></tr></table></figure>
<h3 id="Python支持的数据类型"><a href="#Python支持的数据类型" class="headerlink" title="Python支持的数据类型"></a>Python支持的数据类型</h3><p>Python支持四种不同的数值类型</p>
<ul>
<li><strong>整型(int)</strong> –通常被称为整型或整数，是正或负数，不带有小数点</li>
<li><strong>长整型(long integers)</strong> - 无限大小的整数，这书最后一个大写或者小写的L</li>
<li><strong>浮点型(folating point real values)</strong> - 浮点型有整数和小数部分组成</li>
<li><strong>复数(complex numbers)</strong> - 复数的虚部以字母J或者j结尾，如2+3j</li>
</ul>
<table>
<thead>
<tr>
<th>int</th>
<th>long</th>
<th>float</th>
<th>complex</th>
</tr>
</thead>
<tbody>
<tr>
<td>10</td>
<td>51924361L</td>
<td>0.0</td>
<td>3.14j</td>
</tr>
<tr>
<td>100</td>
<td>-0x19323L</td>
<td>15.20</td>
<td>45.j</td>
</tr>
<tr>
<td>-786</td>
<td>0122L</td>
<td>-21.9</td>
<td>9.322e-36j</td>
</tr>
<tr>
<td>080</td>
<td>0xDEFABCECBDAECBFBAEl</td>
<td>32.3+e18</td>
<td>.876j</td>
</tr>
<tr>
<td>-0490</td>
<td>535633629843L</td>
<td>-90.</td>
<td>-.6545+0J</td>
</tr>
<tr>
<td>-0x260</td>
<td>-052318172735L</td>
<td>-32.54e100</td>
<td>3e+26J</td>
</tr>
<tr>
<td>0x69</td>
<td>-4721885298529L</td>
<td>70.2-E12</td>
<td>4.53e-7j</td>
</tr>
</tbody>
</table>
<ul>
<li>长整型也可以使用小写L，但是还是建议使用大写L，避免与数字1混淆，Python使用L来表示长整型</li>
<li>Python还支持复数，复数由实数部分和虚数部分构成，可以用a + bj,或者complex(a,b)表示， 复数的实部a和虚部b都是浮点型</li>
</ul>
<h3 id="Python数字类型转换"><a href="#Python数字类型转换" class="headerlink" title="Python数字类型转换"></a>Python数字类型转换</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">int(x [,base ])         将x转换为一个整数  </div><div class="line">long(x [,base ])        将x转换为一个长整数  </div><div class="line">float(x )               将x转换到一个浮点数  </div><div class="line">complex(real [,imag ])  创建一个复数  </div><div class="line">str(x )                 将对象 x 转换为字符串  </div><div class="line">repr(x )                将对象 x 转换为表达式字符串  </div><div class="line">eval(str )              用来计算在字符串中的有效Python表达式,并返回一个对象  </div><div class="line">tuple(s )               将序列 s 转换为一个元组  </div><div class="line">list(s )                将序列 s 转换为一个列表  </div><div class="line">chr(x )                 将一个整数转换为一个字符  </div><div class="line">unichr(x )              将一个整数转换为Unicode字符  </div><div class="line">ord(x )                 将一个字符转换为它的整数值  </div><div class="line">hex(x )                 将一个整数转换为一个十六进制字符串  </div><div class="line">oct(x )                 将一个整数转换为一个八进制字符串</div></pre></td></tr></table></figure>
<h3 id="Python数学函数"><a href="#Python数学函数" class="headerlink" title="Python数学函数"></a>Python数学函数</h3><table>
<thead>
<tr>
<th>函数</th>
<th>返回值 ( 描述 )</th>
</tr>
</thead>
<tbody>
<tr>
<td>abs(x)</td>
<td>返回数字的绝对值，如abs(-10) 返回 10</td>
</tr>
<tr>
<td>ceil(x)</td>
<td>返回数字的上入整数，如math.ceil(4.1) 返回 5</td>
</tr>
<tr>
<td>cmp(x, y)</td>
<td>如果 x &lt; y 返回 -1, 如果 x == y 返回 0, 如果 x &gt; y 返回 1</td>
</tr>
<tr>
<td>exp(x)</td>
<td>返回e的x次幂(ex),如math.exp(1) 返回2.718281828459045</td>
</tr>
<tr>
<td>fabs(x)</td>
<td>返回数字的绝对值，如math.fabs(-10) 返回10.0</td>
</tr>
<tr>
<td>floor(x)</td>
<td>返回数字的下舍整数，如math.floor(4.9)返回 4</td>
</tr>
<tr>
<td>log(x)</td>
<td>如math.log(math.e)返回1.0,math.log(100,10)返回2.0</td>
</tr>
<tr>
<td>log10(x)</td>
<td>返回以10为基数的x的对数，如math.log10(100)返回 2.0</td>
</tr>
<tr>
<td>max(x1, x2,…)</td>
<td>返回给定参数的最大值，参数可以为序列</td>
</tr>
<tr>
<td>min(x1, x2,…)</td>
<td>返回给定参数的最小值，参数可以为序列</td>
</tr>
<tr>
<td>modf(x)</td>
<td>返回x的整数部分与小数部分，两部分的数值符号与x相同，整数部分以浮点型表示</td>
</tr>
<tr>
<td>pow(x, y)</td>
<td>x**y 运算后的值</td>
</tr>
<tr>
<td>round(x [,n])</td>
<td>返回浮点数x的四舍五入值，如给出n值，则代表舍入到小数点后的位数</td>
</tr>
<tr>
<td>sqrt(x)</td>
<td>返回数字x的平方根，数字可以为负数，返回类型为实数，如math.sqrt(4)返回 2+0j</td>
</tr>
</tbody>
</table>
<h3 id="Python随机数函数"><a href="#Python随机数函数" class="headerlink" title="Python随机数函数"></a>Python随机数函数</h3><p>随机数可以用于数学，游戏，安全等领域中，还经常被嵌入到算法中，用以提高算法效率，并提高程序的安全性。<br>Python包含以下常用随机数函数</p>
<table>
<thead>
<tr>
<th>函数</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>choice(seq)</td>
<td>从序列的元素中随机挑选一个元素，比如random.choice(range(10))，从0到9中随机挑选一个整数。</td>
</tr>
<tr>
<td>randrange ([start,] stop [,step])</td>
<td>从指定范围内，按指定基数递增的集合中获取一个随机数，基数缺省值为1</td>
</tr>
<tr>
<td>random()</td>
<td>随机生成下一个实数，它在[0,1)范围内。</td>
</tr>
<tr>
<td>seed([x])</td>
<td>改变随机数生成器的种子seed。如果你不了解其原理，你不必特别去设定seed，Python会帮你选择seed。</td>
</tr>
<tr>
<td>shuffle(lst)</td>
<td>将序列的所有元素随机排序</td>
</tr>
<tr>
<td>uniform(x, y)</td>
<td>随机生成下一个实数，它在[x,y]范围内。</td>
</tr>
</tbody>
</table>
<h3 id="Python三角函数"><a href="#Python三角函数" class="headerlink" title="Python三角函数"></a>Python三角函数</h3><p>Python包括以下三角函数</p>
<table>
<thead>
<tr>
<th>函数</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>acos(x)</td>
<td>返回x的反余弦弧度值。</td>
</tr>
<tr>
<td>asin(x)</td>
<td>返回x的反正弦弧度值。</td>
</tr>
<tr>
<td>atan(x)</td>
<td>返回x的反正切弧度值。</td>
</tr>
<tr>
<td>atan2(y, x)</td>
<td>返回给定的 X 及 Y 坐标值的反正切值。</td>
</tr>
<tr>
<td>cos(x)</td>
<td>返回x的弧度的余弦值。</td>
</tr>
<tr>
<td>hypot(x, y)</td>
<td>返回欧几里德范数 sqrt(x<em>x + y</em>y)。</td>
</tr>
<tr>
<td>sin(x)</td>
<td>返回的x弧度的正弦值。</td>
</tr>
<tr>
<td>tan(x)</td>
<td>返回x弧度的正切值。</td>
</tr>
<tr>
<td>degrees(x)</td>
<td>将弧度转换为角度,如degrees(math.pi/2) ， 返回90.0</td>
</tr>
<tr>
<td>radians(x)</td>
<td>将角度转换为弧度</td>
</tr>
</tbody>
</table>
<h3 id="Python数学常量"><a href="#Python数学常量" class="headerlink" title="Python数学常量"></a>Python数学常量</h3><table>
<thead>
<tr>
<th>常量</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>pi</td>
<td>数学常量 pi（圆周率，一般以π来表示）</td>
</tr>
<tr>
<td>e</td>
<td>数学常量 e，e即自然常数（自然常数）</td>
</tr>
</tbody>
</table>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/02/29/learn-python-operators.html" itemprop="url">
                  Python学习--运算符
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-02-29T14:02:55+08:00" content="2016-02-29">
              2016-02-29
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/02/29/learn-python-operators.html#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/02/29/learn-python-operators.html" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/02/29/learn-python-operators.html" class="leancloud_visitors" data-flag-title="Python学习--运算符">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<h2 id="什么是运算符"><a href="#什么是运算符" class="headerlink" title="什么是运算符"></a>什么是运算符</h2><p>Python语言支持以下类型的运算符</p>
<ul>
<li>算术运算符</li>
<li>比较（关系）运算符</li>
<li>赋值运算符</li>
<li>逻辑运算符</li>
<li>位运算符</li>
<li>成员运算符</li>
<li>身份运算符</li>
<li>运算符优先级</li>
</ul>
<p>接下来让我们一个个来学习Python的运算符。</p>
<h3 id="Python-算术运算符"><a href="#Python-算术运算符" class="headerlink" title="Python 算术运算符"></a>Python 算术运算符</h3><p>以下假设变量a为10，变量b为20：</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>+</td>
<td>加 - 两个对象相加</td>
</tr>
<tr>
<td>-</td>
<td>减 - 得到负数或是一个数减去另一个数</td>
</tr>
<tr>
<td>*</td>
<td>乘 - 两个数相乘或是返回一个被重复若干次的字符串</td>
</tr>
<tr>
<td>/</td>
<td>除 - x除以y</td>
</tr>
<tr>
<td>%</td>
<td>取模 - 返回除法的余数</td>
</tr>
<tr>
<td>**</td>
<td>幂 - 返回x的y次幂</td>
</tr>
<tr>
<td>//</td>
<td>取整除 - 返回商的整数部分</td>
</tr>
</tbody>
</table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line">// 脚本内容</div><div class="line"><span class="comment">#!/usr/bin/env python</span></div><div class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></div><div class="line">a = <span class="number">21</span></div><div class="line">b = <span class="number">10</span></div><div class="line">c = <span class="number">0</span></div><div class="line"></div><div class="line">c = a + b</div><div class="line"><span class="keyword">print</span> <span class="string">"Line 1 - Value of c is"</span>, c</div><div class="line"></div><div class="line">c = a - b</div><div class="line"><span class="keyword">print</span> <span class="string">"Line 2 - Value of c is"</span>, c</div><div class="line"></div><div class="line">c = a * b</div><div class="line"><span class="keyword">print</span> <span class="string">"Line 3 - Value of c is"</span>, c</div><div class="line"></div><div class="line">c = a / b</div><div class="line"><span class="keyword">print</span> <span class="string">"Line 4 - Value of c is"</span>, c</div><div class="line"></div><div class="line">c = a % b</div><div class="line"><span class="keyword">print</span> <span class="string">"Line 5 - Value of c is"</span>, c</div><div class="line"></div><div class="line">a = <span class="number">2</span></div><div class="line">b = <span class="number">3</span></div><div class="line">c = a**b</div><div class="line"><span class="keyword">print</span> <span class="string">"Line 6 - Value of c is"</span>, c</div><div class="line"></div><div class="line">a = <span class="number">10</span></div><div class="line">b = <span class="number">5</span></div><div class="line">c = a//b</div><div class="line"><span class="keyword">print</span> <span class="string">"Line 7 - Value of c is"</span>, c</div><div class="line"></div><div class="line">//结果输出</div><div class="line">Line <span class="number">1</span> - Value of c <span class="keyword">is</span> <span class="number">31</span></div><div class="line">Line <span class="number">2</span> - Value of c <span class="keyword">is</span> <span class="number">11</span></div><div class="line">Line <span class="number">3</span> - Value of c <span class="keyword">is</span> <span class="number">210</span></div><div class="line">Line <span class="number">4</span> - Value of c <span class="keyword">is</span> <span class="number">2</span></div><div class="line">Line <span class="number">5</span> - Value of c <span class="keyword">is</span> <span class="number">1</span></div><div class="line">Line <span class="number">6</span> - Value of c <span class="keyword">is</span> <span class="number">8</span></div><div class="line">Line <span class="number">7</span> - Value of c <span class="keyword">is</span> <span class="number">2</span></div></pre></td></tr></table></figure>
<h3 id="Python比较运算符"><a href="#Python比较运算符" class="headerlink" title="Python比较运算符"></a>Python比较运算符</h3><p>假设a为10，b为20</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody>
<tr>
<td>==</td>
<td>等于 - 比较对象是否相等</td>
<td>(a == b) 返回 False</td>
</tr>
<tr>
<td>!=</td>
<td>不等于 - 比较两个对象是否不相等</td>
<td>(a != b) 返回 true</td>
</tr>
<tr>
<td>&lt;&gt;</td>
<td>不等于 - 比较两个对象是否不相等</td>
<td>(a    &lt;&gt;    b) 返回 true 这个运算符类似 !=</td>
</tr>
<tr>
<td>&gt;</td>
<td>大于 - 返回x是否大于y</td>
<td>(a &gt; b) 返回 False。</td>
</tr>
<tr>
<td>&gt;=</td>
<td>大于等于 - 返回x是否大于等于y。</td>
<td>(a &gt;= b) 返回 False</td>
</tr>
</tbody>
</table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line">//脚本</div><div class="line"><span class="comment">#!/usr/bin/env python</span></div><div class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></div><div class="line">a = <span class="number">21</span></div><div class="line">b = <span class="number">10</span></div><div class="line">c = <span class="number">0</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> ( a == b ):</div><div class="line">    <span class="keyword">print</span> <span class="string">"Line 1 - a is equal to b"</span></div><div class="line"><span class="keyword">else</span>:</div><div class="line">    <span class="keyword">print</span> <span class="string">"Line 1 - a is not equal to b"</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> ( a != b ):</div><div class="line">    <span class="keyword">print</span> <span class="string">"Line 2 - a is not equal to b"</span></div><div class="line"><span class="keyword">else</span>:</div><div class="line">    <span class="keyword">print</span> <span class="string">"Line 2 - a is equal to b"</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> ( a    &lt;&gt;     b ):</div><div class="line">    <span class="keyword">print</span> <span class="string">"Line 3 - a is not equal to b"</span></div><div class="line"><span class="keyword">else</span>:</div><div class="line">    <span class="keyword">print</span> <span class="string">"Line 3 - a is equal to b"</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">if</span> ( a      <span class="keyword">print</span> <span class="string">"Line 4 - a is  less than b"</span></div><div class="line"><span class="keyword">else</span>:</div><div class="line">    <span class="keyword">print</span> <span class="string">"Line 4 - a is  not less than b"</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> ( a &gt; b ):</div><div class="line">    <span class="keyword">print</span> <span class="string">"Line 5 - a is  greater than b"</span></div><div class="line"><span class="keyword">else</span>:</div><div class="line">    <span class="keyword">print</span> <span class="string">"Line 5 - a is  not greater than b"</span></div><div class="line"></div><div class="line">a = <span class="number">5</span></div><div class="line">b = <span class="number">20</span></div><div class="line"><span class="keyword">if</span> ( a     <span class="keyword">print</span> <span class="string">"Line 6 - a is either less than or equal to  b"</span></div><div class="line"><span class="keyword">else</span>:</div><div class="line">   <span class="keyword">print</span> <span class="string">"Line 6 - a is neither less than nor equal to  b"</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> ( b &gt;= a ):</div><div class="line">   <span class="keyword">print</span> <span class="string">"Line 7 - b is either greater than  or equal to b"</span></div><div class="line"><span class="keyword">else</span>:</div><div class="line">   <span class="keyword">print</span> <span class="string">"Line 7 - b is neither greater than  nor equal to b"</span></div><div class="line"></div><div class="line">// 输出</div><div class="line">Line <span class="number">1</span> - a <span class="keyword">is</span> <span class="keyword">not</span> equal to b</div><div class="line">Line <span class="number">2</span> - a <span class="keyword">is</span> <span class="keyword">not</span> equal to b</div><div class="line">Line <span class="number">3</span> - a <span class="keyword">is</span> <span class="keyword">not</span> equal to b</div><div class="line">Line <span class="number">4</span> - a <span class="keyword">is</span>  <span class="keyword">not</span> less than b</div><div class="line">Line <span class="number">5</span> - a <span class="keyword">is</span>  greater than b</div><div class="line">Line <span class="number">6</span> - a <span class="keyword">is</span> either less than <span class="keyword">or</span> equal to  b</div><div class="line">Line <span class="number">7</span> - b <span class="keyword">is</span> either greater than  <span class="keyword">or</span> equal to b</div></pre></td></tr></table></figure>
<h3 id="Python赋值运算符"><a href="#Python赋值运算符" class="headerlink" title="Python赋值运算符"></a>Python赋值运算符</h3><p>以下假设变量a为10，变量b为20：</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody>
<tr>
<td>=</td>
<td>简单的赋值运算符</td>
<td>c = a + b 将 a + b 的运算结果赋值为 c</td>
</tr>
<tr>
<td>+=</td>
<td>加法赋值运算符</td>
<td>c += a 等效于 c = c + a</td>
</tr>
<tr>
<td>-=</td>
<td>减法赋值运算符</td>
<td>c -= a 等效于 c = c - a</td>
</tr>
<tr>
<td>*=</td>
<td>乘法赋值运算符</td>
<td>c <em>= a 等效于 c = c </em> a</td>
</tr>
<tr>
<td>/=</td>
<td>除法赋值运算符</td>
<td>c /= a 等效于 c = c / a</td>
</tr>
<tr>
<td>%=</td>
<td>取模赋值运算符</td>
<td>c %= a 等效于 c = c % a</td>
</tr>
<tr>
<td>**=</td>
<td>幂赋值运算符</td>
<td>c**= a 等效于 c = c ** a</td>
</tr>
<tr>
<td>//=</td>
<td>取整除赋值运算符</td>
<td>c //= a 等效于 c = c // a</td>
</tr>
</tbody>
</table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">//脚本</div><div class="line"><span class="comment">#!/usr/bin/env python</span></div><div class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></div><div class="line"></div><div class="line">a = <span class="number">21</span></div><div class="line">b = <span class="number">10</span></div><div class="line">c = <span class="number">0</span></div><div class="line"></div><div class="line">c = a + b</div><div class="line"><span class="keyword">print</span> <span class="string">"Line 1 - Value of c is "</span>, c</div><div class="line"></div><div class="line">c += a</div><div class="line"><span class="keyword">print</span> <span class="string">"Line 2 - Value of c is "</span>, c</div><div class="line"></div><div class="line">c *= a</div><div class="line"><span class="keyword">print</span> <span class="string">"Line 3 - Value of c is "</span>, c</div><div class="line"></div><div class="line">c /= a</div><div class="line"><span class="keyword">print</span> <span class="string">"Line 4 - Value of c is "</span>, c</div><div class="line"></div><div class="line">c  = <span class="number">2</span></div><div class="line">c %= a</div><div class="line"><span class="keyword">print</span> <span class="string">"Line 5 - Value of c is "</span>, c</div><div class="line"></div><div class="line">c **= a</div><div class="line"><span class="keyword">print</span> <span class="string">"Line 6 - Value of c is "</span>, c</div><div class="line"></div><div class="line">c //= a</div><div class="line"><span class="keyword">print</span> <span class="string">"Line 7 - Value of c is "</span>, c</div><div class="line"></div><div class="line">// 结果</div><div class="line">Line <span class="number">1</span> - Value of c <span class="keyword">is</span>  <span class="number">31</span></div><div class="line">Line <span class="number">2</span> - Value of c <span class="keyword">is</span>  <span class="number">52</span></div><div class="line">Line <span class="number">3</span> - Value of c <span class="keyword">is</span>  <span class="number">1092</span></div><div class="line">Line <span class="number">4</span> - Value of c <span class="keyword">is</span>  <span class="number">52</span></div><div class="line">Line <span class="number">5</span> - Value of c <span class="keyword">is</span>  <span class="number">2</span></div><div class="line">Line <span class="number">6</span> - Value of c <span class="keyword">is</span>  <span class="number">2097152</span></div><div class="line">Line <span class="number">7</span> - Value of c <span class="keyword">is</span>  <span class="number">99864</span></div></pre></td></tr></table></figure>
<h3 id="Python位运算符"><a href="#Python位运算符" class="headerlink" title="Python位运算符"></a>Python位运算符</h3><p>按位运算符是把数字看作二进制来进行计算的。Python中的按位运算法则如下：<br>下表中变量 a 为 60，b 为 13。</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody>
<tr>
<td>&amp;</td>
<td>按位与运算符：参与运算的两个值,如果两个相应位都为1,则该位的结果为1,否则为0</td>
<td>(a &amp; b) 输出结果 12 ，二进制解释： 0000 1100</td>
</tr>
<tr>
<td>1</td>
<td>按位或运算符：只要对应的二个二进位有一个为1时，结果位就为1。</td>
<td>(a 1 b) 输出结果 61 ，二进制解释： 0011 1101</td>
</tr>
<tr>
<td>^</td>
<td>按位异或运算符：当两对应的二进位相异时，结果为1</td>
<td>(a ^ b) 输出结果 49 ，二进制解释： 0011 0001</td>
</tr>
<tr>
<td>~</td>
<td>按位取反运算符：对数据的每个二进制位取反,即把1变为0,把0变为1</td>
<td>(~a ) 输出结果 -61 ，二进制解释： 1100 0011， 在一个有符号二进制数的补码形式</td>
</tr>
<tr>
<td>&gt;&gt;</td>
<td>右移动运算符：把”&gt;&gt;”左边的运算数的各二进位全部右移若干位，”&gt;&gt;”右边的数指定移动的位数</td>
<td>a &gt;&gt; 2 输出结果 15 ，二进制解释： 0000 1111</td>
</tr>
</tbody>
</table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">// 脚本</div><div class="line"><span class="comment">#!/usr/bin/env python</span></div><div class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></div><div class="line"></div><div class="line">a = <span class="number">60</span>    // <span class="number">60</span> = <span class="number">0011</span> <span class="number">1100</span></div><div class="line">b = <span class="number">13</span>    // <span class="number">13</span> = <span class="number">0000</span> <span class="number">1101</span></div><div class="line">c = <span class="number">0</span></div><div class="line"></div><div class="line">c = a &amp; b     // <span class="number">12</span> = <span class="number">0000</span> <span class="number">1100</span></div><div class="line"><span class="keyword">print</span> <span class="string">"Line 1 - Value of c is"</span>, c</div><div class="line"></div><div class="line">c = a | b       // <span class="number">61</span> = <span class="number">0011</span> <span class="number">1101</span></div><div class="line"><span class="keyword">print</span> <span class="string">"Line 2 - Value of c is"</span>, c</div><div class="line"></div><div class="line">c = a ^ b       // <span class="number">49</span> = <span class="number">0011</span> <span class="number">0001</span></div><div class="line"><span class="keyword">print</span> <span class="string">"Line 3 - Value of c is"</span>, c</div><div class="line"></div><div class="line">c = ~a           // <span class="number">-61</span> = <span class="number">1100</span> <span class="number">0011</span></div><div class="line"><span class="keyword">print</span> <span class="string">"Line 4 - Value of c is"</span>, c</div><div class="line"></div><div class="line">c = a  <span class="keyword">print</span> <span class="string">"Line 5 - Value of c is"</span>, c</div><div class="line"></div><div class="line">c = a &gt;&gt; b      // <span class="number">15</span> = <span class="number">0000</span> <span class="number">1111</span></div><div class="line"><span class="keyword">print</span> <span class="string">"Line 6 - Value of c is"</span>, c</div><div class="line"></div><div class="line">// 结果</div><div class="line">Line <span class="number">1</span> - Value of c <span class="keyword">is</span> <span class="number">12</span></div><div class="line">Line <span class="number">2</span> - Value of c <span class="keyword">is</span> <span class="number">61</span></div><div class="line">Line <span class="number">3</span> - Value of c <span class="keyword">is</span> <span class="number">49</span></div><div class="line">Line <span class="number">4</span> - Value of c <span class="keyword">is</span> <span class="number">-61</span></div><div class="line">Line <span class="number">5</span> - Value of c <span class="keyword">is</span> <span class="number">491520</span></div><div class="line">Line <span class="number">6</span> - Value of c <span class="keyword">is</span> <span class="number">0</span></div></pre></td></tr></table></figure>
<h3 id="Python逻辑运算符"><a href="#Python逻辑运算符" class="headerlink" title="Python逻辑运算符"></a>Python逻辑运算符</h3><p>Python语言支持逻辑运算符，以下假设变量a为10，变量b为20：</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody>
<tr>
<td>and</td>
<td>布尔”与” - 如果x为False，x and y返回False，否则它返回y的计算值</td>
<td>(a and b) 返回 true</td>
</tr>
<tr>
<td>or</td>
<td>布尔”或” - 如果x是True，它返回True，否则它返回y的计算值</td>
<td>(a or b) 返回 true</td>
</tr>
<tr>
<td>not</td>
<td>布尔”非” - 如果x为True，返回False。如果x为False，它返回True</td>
<td>not(a and b) 返回 false</td>
</tr>
</tbody>
</table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">// 脚本</div><div class="line"><span class="comment">#!/usr/bin/env python</span></div><div class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></div><div class="line"></div><div class="line">a = <span class="number">10</span></div><div class="line">b = <span class="number">20</span></div><div class="line">c = <span class="number">0</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> ( a <span class="keyword">and</span> b ):</div><div class="line">   <span class="keyword">print</span> <span class="string">"Line 1 - a and b are true"</span></div><div class="line"><span class="keyword">else</span>:</div><div class="line">   <span class="keyword">print</span> <span class="string">"Line 1 - Either a is not true or b is not true"</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> ( a <span class="keyword">or</span> b ):</div><div class="line">   <span class="keyword">print</span> <span class="string">"Line 2 - Either a is true or b is true or both are true"</span></div><div class="line"><span class="keyword">else</span>:</div><div class="line">   <span class="keyword">print</span> <span class="string">"Line 2 - Neither a is true nor b is true"</span></div><div class="line"></div><div class="line"></div><div class="line">a = <span class="number">0</span></div><div class="line"><span class="keyword">if</span> ( a <span class="keyword">and</span> b ):</div><div class="line">   <span class="keyword">print</span> <span class="string">"Line 3 - a and b are true"</span></div><div class="line"><span class="keyword">else</span>:</div><div class="line">   <span class="keyword">print</span> <span class="string">"Line 3 - Either a is not true or b is not true"</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> ( a <span class="keyword">or</span> b ):</div><div class="line">   <span class="keyword">print</span> <span class="string">"Line 4 - Either a is true or b is true or both are true"</span></div><div class="line"><span class="keyword">else</span>:</div><div class="line">   <span class="keyword">print</span> <span class="string">"Line 4 - Neither a is true nor b is true"</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> <span class="keyword">not</span>( a <span class="keyword">and</span> b ):</div><div class="line">   <span class="keyword">print</span> <span class="string">"Line 5 - Either a is not true or b is  not true or both are not true"</span></div><div class="line"><span class="keyword">else</span>:</div><div class="line">   <span class="keyword">print</span> <span class="string">"Line 5 - a and b are true"</span></div><div class="line"></div><div class="line">// 输出</div><div class="line">Line <span class="number">1</span> - a <span class="keyword">and</span> b are true</div><div class="line">Line <span class="number">2</span> - Either a <span class="keyword">is</span> true <span class="keyword">or</span> b <span class="keyword">is</span> true <span class="keyword">or</span> both are true</div><div class="line">Line <span class="number">3</span> - Either a <span class="keyword">is</span> <span class="keyword">not</span> true <span class="keyword">or</span> b <span class="keyword">is</span> <span class="keyword">not</span> true</div><div class="line">Line <span class="number">4</span> - Either a <span class="keyword">is</span> true <span class="keyword">or</span> b <span class="keyword">is</span> true <span class="keyword">or</span> both are true</div><div class="line">Line <span class="number">5</span> - Either a <span class="keyword">is</span> <span class="keyword">not</span> true <span class="keyword">or</span> b <span class="keyword">is</span>  <span class="keyword">not</span> true <span class="keyword">or</span> both are <span class="keyword">not</span> true</div></pre></td></tr></table></figure>
<h3 id="Python成员运算符"><a href="#Python成员运算符" class="headerlink" title="Python成员运算符"></a>Python成员运算符</h3><p>除了以上的一些运算符之外，Python还支持成员运算符，测试实例中包含了一系列的成员，包括字符串，列表或元组。</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody>
<tr>
<td>in</td>
<td>如果在指定的序列中找到值返回True，否则返回False</td>
<td>x 在 y序列中 , 如果x在y序列中返回True</td>
</tr>
<tr>
<td>not in</td>
<td>如果在指定的序列中没有找到值返回True，否则返回False</td>
<td>x 不在 y序列中 , 如果x不在y序列中返回True</td>
</tr>
</tbody>
</table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">// 脚本</div><div class="line"><span class="comment">#!/usr/bin/env python</span></div><div class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></div><div class="line"></div><div class="line">a = <span class="number">10</span></div><div class="line">b = <span class="number">20</span></div><div class="line">list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> ];</div><div class="line"></div><div class="line"><span class="keyword">if</span> ( a <span class="keyword">in</span> list ):</div><div class="line">   <span class="keyword">print</span> <span class="string">"Line 1 - a is available in the given list"</span></div><div class="line"><span class="keyword">else</span>:</div><div class="line">   <span class="keyword">print</span> <span class="string">"Line 1 - a is not available in the given list"</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> ( b <span class="keyword">not</span> <span class="keyword">in</span> list ):</div><div class="line">   <span class="keyword">print</span> <span class="string">"Line 2 - b is not available in the given list"</span></div><div class="line"><span class="keyword">else</span>:</div><div class="line">   <span class="keyword">print</span> <span class="string">"Line 2 - b is available in the given list"</span></div><div class="line"></div><div class="line">a = <span class="number">2</span></div><div class="line"><span class="keyword">if</span> ( a <span class="keyword">in</span> list ):</div><div class="line">   <span class="keyword">print</span> <span class="string">"Line 3 - a is available in the given list"</span></div><div class="line"><span class="keyword">else</span>:</div><div class="line">   <span class="keyword">print</span> <span class="string">"Line 3 - a is not available in the given list"</span></div><div class="line"></div><div class="line">// 输出</div><div class="line">Line <span class="number">1</span> - a <span class="keyword">is</span> <span class="keyword">not</span> available <span class="keyword">in</span> the given list</div><div class="line">Line <span class="number">2</span> - b <span class="keyword">is</span> <span class="keyword">not</span> available <span class="keyword">in</span> the given list</div><div class="line">Line <span class="number">3</span> - a <span class="keyword">is</span> available <span class="keyword">in</span> the given list</div></pre></td></tr></table></figure>
<h3 id="Python身份运算符"><a href="#Python身份运算符" class="headerlink" title="Python身份运算符"></a>Python身份运算符</h3><p>身份运算符用于比较两个对象的存储单元</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody>
<tr>
<td>is    is</td>
<td>是判断两个标识符是不是引用自一个对象</td>
<td>x is y, 如果 id(x) 等于 id(y) , is 返回结果 1</td>
</tr>
<tr>
<td>is not</td>
<td>is not是判断两个标识符是不是引用自不同对象</td>
<td>x is not y, 如果 id(x) 不等于 id(y). is not 返回结果 1</td>
</tr>
</tbody>
</table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">// 脚本</div><div class="line"><span class="comment">#!/usr/bin/env python</span></div><div class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></div><div class="line">a = <span class="number">20</span></div><div class="line">b = <span class="number">20</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> ( a <span class="keyword">is</span> b ):</div><div class="line">   <span class="keyword">print</span> <span class="string">"Line 1 - a and b have same identity"</span></div><div class="line"><span class="keyword">else</span>:</div><div class="line">   <span class="keyword">print</span> <span class="string">"Line 1 - a and b do not have same identity"</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> ( id(a) == id(b) ):</div><div class="line">   <span class="keyword">print</span> <span class="string">"Line 2 - a and b have same identity"</span></div><div class="line"><span class="keyword">else</span>:</div><div class="line">   <span class="keyword">print</span> <span class="string">"Line 2 - a and b do not have same identity"</span></div><div class="line"></div><div class="line">b = <span class="number">30</span></div><div class="line"><span class="keyword">if</span> ( a <span class="keyword">is</span> b ):</div><div class="line">   <span class="keyword">print</span> <span class="string">"Line 3 - a and b have same identity"</span></div><div class="line"><span class="keyword">else</span>:</div><div class="line">   <span class="keyword">print</span> <span class="string">"Line 3 - a and b do not have same identity"</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> ( a <span class="keyword">is</span> <span class="keyword">not</span> b ):</div><div class="line">   <span class="keyword">print</span> <span class="string">"Line 4 - a and b do not have same identity"</span></div><div class="line"><span class="keyword">else</span>:</div><div class="line">   <span class="keyword">print</span> <span class="string">"Line 4 - a and b have same identity"</span></div><div class="line">   </div><div class="line">// 输出</div><div class="line">Line <span class="number">1</span> - a <span class="keyword">and</span> b have same identity</div><div class="line">Line <span class="number">2</span> - a <span class="keyword">and</span> b have same identity</div><div class="line">Line <span class="number">3</span> - a <span class="keyword">and</span> b do <span class="keyword">not</span> have same identity</div><div class="line">Line <span class="number">4</span> - a <span class="keyword">and</span> b do <span class="keyword">not</span> have same identity</div></pre></td></tr></table></figure>
<h3 id="Python运算符优先级"><a href="#Python运算符优先级" class="headerlink" title="Python运算符优先级"></a>Python运算符优先级</h3><p>以下表格列出了从最高到最低优先级的所有运算符</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>**</td>
<td>指数 (最高优先级)</td>
</tr>
<tr>
<td>~ + -</td>
<td>按位翻转, 一元加号和减号 (最后两个的方法名为 +@ 和 -@)</td>
</tr>
<tr>
<td>* / % //</td>
<td>乘，除，取模和取整除</td>
</tr>
<tr>
<td>+ -</td>
<td>加法减法</td>
</tr>
<tr>
<td>>> &lt;&lt;</td>
<td>右移，左移运算符</td>
</tr>
<tr>
<td>&amp;</td>
<td>位 ‘AND’</td>
</tr>
<tr>
<td>^1</td>
<td>位运算符</td>
</tr>
<tr>
<td>&lt;= &lt;&gt; &gt;=</td>
<td>比较运算符</td>
</tr>
<tr>
<td>&lt;&gt;  == !=</td>
<td>等于运算符</td>
</tr>
<tr>
<td>= %= /= //= -= += <em>= *</em>=</td>
<td>赋值运算符</td>
</tr>
<tr>
<td>is is not</td>
<td>身份运算符</td>
</tr>
<tr>
<td>in not in</td>
<td>成员运算符</td>
</tr>
<tr>
<td>not or and</td>
<td>逻辑运算符</td>
</tr>
</tbody>
</table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">// 脚本</div><div class="line"><span class="comment">#!/usr/bin/env python</span></div><div class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></div><div class="line"></div><div class="line">a = <span class="number">20</span></div><div class="line">b = <span class="number">10</span></div><div class="line">c = <span class="number">15</span></div><div class="line">d = <span class="number">5</span></div><div class="line">e = <span class="number">0</span></div><div class="line"></div><div class="line">e = (a + b) * c / d       <span class="comment">#( 30 * 15 ) / 5</span></div><div class="line"><span class="keyword">print</span> <span class="string">"Value of (a + b) * c / d is "</span>,  e</div><div class="line"></div><div class="line">e = ((a + b) * c) / d     <span class="comment"># (30 * 15 ) / 5</span></div><div class="line"><span class="keyword">print</span> <span class="string">"Value of ((a + b) * c) / d is "</span>,  e</div><div class="line"></div><div class="line">e = (a + b) * (c / d);    <span class="comment"># (30) * (15/5)</span></div><div class="line"><span class="keyword">print</span> <span class="string">"Value of (a + b) * (c / d) is "</span>,  e</div><div class="line"></div><div class="line">e = a + (b * c) / d;      <span class="comment">#  20 + (150/5)</span></div><div class="line"><span class="keyword">print</span> <span class="string">"Value of a + (b * c) / d is "</span>,  e</div><div class="line"></div><div class="line"></div><div class="line">//输出</div><div class="line">Value of (a + b) * c / d <span class="keyword">is</span>  <span class="number">90</span></div><div class="line">Value of ((a + b) * c) / d <span class="keyword">is</span>  <span class="number">90</span></div><div class="line">Value of (a + b) * (c / d) <span class="keyword">is</span>  <span class="number">90</span></div><div class="line">Value of a + (b * c) / d <span class="keyword">is</span>  <span class="number">50</span></div></pre></td></tr></table></figure>
<hr>
<p><strong> <a href="https://www.digitalocean.com/?refcode=9e4ab85e22ec" target="_blank" rel="external">DigitalOcean的VPS，稳定、便宜，用于搭建自己的站点和梯子，现在注册即得10$,免费玩2个月</a> </strong></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/02/25/learn-python-variable-type.html" itemprop="url">
                  Python学习--变量和数据类型
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-02-25T13:58:14+08:00" content="2016-02-25">
              2016-02-25
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/02/25/learn-python-variable-type.html#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/02/25/learn-python-variable-type.html" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/02/25/learn-python-variable-type.html" class="leancloud_visitors" data-flag-title="Python学习--变量和数据类型">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<h2 id="python变量和数据类型"><a href="#python变量和数据类型" class="headerlink" title="python变量和数据类型"></a>python变量和数据类型</h2><h3 id="变量类型"><a href="#变量类型" class="headerlink" title="变量类型"></a>变量类型</h3><p>变量是存储在内存中的值，基于变量的类型，解释器会分配指定内存。变量可以指定不同的数据类型，这些变量可以是数字或者字符串。</p>
<h3 id="变量赋值"><a href="#变量赋值" class="headerlink" title="变量赋值"></a>变量赋值</h3><p>Python中的变量不需要声明，变量的赋值操作既是变量声明和定义的过程<br>每个变量在内存中创建，包括变量的标识、名称和数据<br>每个变量只是用钱都必须赋值，变量赋值之后变量才会被创建<br>等号（=）用来被变量赋值</p>
<p>赋值方法<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">// 简单赋值 Variable = Value</div><div class="line">count = <span class="number">100</span>       // 整数赋值</div><div class="line">miles = <span class="number">1000.0</span>    // 浮点数赋值 </div><div class="line">name = <span class="string">"John"</span>     // 字符串赋值</div><div class="line"></div><div class="line">// 多变量赋值，元组和列表赋值语句</div><div class="line">Variable1,Variable2,...=Value1,Value2,...</div><div class="line">a = b = c = <span class="number">1</span></div><div class="line">a, b , c = <span class="number">1</span>, <span class="number">2</span> , <span class="string">"John"</span></div><div class="line"></div><div class="line"></div><div class="line">// 多目标赋值 a = b = Variable (多个变量内存中指向同一个对象，对于可变类型的需要，修改一个会对其他影响)</div><div class="line">s = h = <span class="string">'spam'</span></div><div class="line"></div><div class="line">// 自变赋值 +=、-=、*= 自变赋值会修改原始对象，而不是新创建对象</div><div class="line">s += <span class="number">42</span></div><div class="line">x += y</div></pre></td></tr></table></figure></p>
<h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><p>不同的数据，需要定义为不同的数据类型，在Python中有五中标准数据类型Numbers、String、List、Tuple、Dictionary</p>
<h4 id="数字"><a href="#数字" class="headerlink" title="数字"></a>数字</h4><p>数字数据类型用于存储数值，他们是不可改变的数据类型，通常的int、long、folat、complex等都被支持，并且会根据具体数字来定义变量的类型<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">// stored <span class="keyword">as</span> int type</div><div class="line">num = <span class="number">1</span> </div><div class="line">// stored <span class="keyword">as</span> long int type</div><div class="line">num = <span class="number">11111111111</span></div><div class="line">// stored <span class="keyword">as</span> float type</div><div class="line">num = <span class="number">1.0</span></div><div class="line">// L stands <span class="keyword">for</span> long type</div><div class="line">num = <span class="number">12L</span></div><div class="line">// j stands <span class="keyword">for</span> complex type</div><div class="line">num = <span class="number">1</span> + <span class="number">12j</span></div><div class="line">// string type</div><div class="line">num = <span class="string">'1'</span></div></pre></td></tr></table></figure></p>
<h4 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h4><p>字符串是有数字、字母、下划线组成的一串字符。Python的字串列表有两种取值顺序，从左到右索引从0开始，从右到左索引-1开始。`单引号、双引号和三引号都可以来定义字符串。三引号可以定义特殊格式的字符串。字符串作为一个序列类型，支持索引访问和切片访问。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env python</span></div><div class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></div><div class="line"></div><div class="line">str = <span class="string">'Hello world!'</span></div><div class="line"></div><div class="line"><span class="keyword">print</span> str                   // 完整字符串</div><div class="line"><span class="keyword">print</span> str[<span class="number">0</span>]                // 输出字符串第一个字符</div><div class="line"><span class="keyword">print</span> str[<span class="number">0</span>] + str [<span class="number">2</span>:<span class="number">5</span>]    // 输出字符串第一个字符和第三-第五的字符</div><div class="line"><span class="keyword">print</span> str[<span class="number">2</span>:<span class="number">5</span>]              // 输出字符串第三到第五之剑的字符串</div><div class="line"><span class="keyword">print</span> str[<span class="number">2</span>:]               // 输出从第三字符开始的字符串</div><div class="line"><span class="keyword">print</span> str[:<span class="number">4</span>]               // 输出到第四个字符的字符串</div><div class="line"><span class="keyword">print</span> str[::<span class="number">2</span>]              // 以<span class="number">2</span>为间隔输出字符串</div><div class="line"><span class="keyword">print</span> str[<span class="number">-1</span>]               // 输出随后一个字符</div><div class="line"><span class="keyword">print</span> str * <span class="number">2</span>               // 输出<span class="number">2</span>次字符串</div><div class="line"><span class="keyword">print</span> str + <span class="string">"Test"</span>          // 输出连接的字符串</div><div class="line"></div><div class="line">//执行结果</div><div class="line">Hello world!</div><div class="line">H</div><div class="line">Hllo</div><div class="line">llo</div><div class="line">llo world!</div><div class="line">Hell</div><div class="line">Hlowrd</div><div class="line">!</div><div class="line">Hello world!Hello world!</div><div class="line">Hello world!Test</div></pre></td></tr></table></figure></p>
<h4 id="布尔值"><a href="#布尔值" class="headerlink" title="布尔值"></a>布尔值</h4><p>布尔值和布尔代数的表示完全一致，一个布尔值只有<code>True</code>、<code>False</code>两只值，在Python中，可以直接用Ture、False（注意大小写），也可以通过布尔运算计算出来。<br>布尔值可以用<code>and</code>，<code>or</code>和<code>not</code>运算</p>
<ul>
<li><p><code>and</code> 运算是与运算，只有所有都为True，and运算符才是<code>True</code></p>
</li>
<li><p><code>or</code> 运算是或运算，只要其中一个为True，or运算结果就是<code>True</code></p>
</li>
<li><code>not</code> 运算是非运算，他是一个单目运算符，把True变成<code>False</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">// 三种布尔表达式运算符</div><div class="line">x <span class="keyword">and</span> y</div><div class="line">x <span class="keyword">or</span> y</div><div class="line"><span class="keyword">not</span> x</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">\\真值表</div><div class="line">对象/常量 值</div><div class="line"><span class="string">""</span>       假</div><div class="line"><span class="string">"string"</span> 真 </div><div class="line"><span class="number">2</span>&gt;=<span class="number">1</span>     真</div><div class="line"><span class="number">-2</span> ()空元组  假</div><div class="line">[]空列表  假</div><div class="line">&#123;&#125;空字典  假</div><div class="line"><span class="keyword">None</span>     假</div></pre></td></tr></table></figure>
<h4 id="空值"><a href="#空值" class="headerlink" title="空值"></a>空值</h4><p>空值是Python里一个特殊的值，用<code>None</code>表示，None不能理解为0，因为0是有意义的，而None是一个特殊的空值</p>
<h4 id="Python-列表"><a href="#Python-列表" class="headerlink" title="Python 列表"></a>Python 列表</h4><p>List 可以完成大多数集合类型的数据结构实现，它支持字符、数组、字符串甚至可以嵌套列表<br>列表使用[]标示，是Python最通用的复合数据类型<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">// 脚</div><div class="line"><span class="comment">#!/usr/bin/env python</span></div><div class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></div><div class="line"></div><div class="line">list = [ <span class="string">'abcd'</span>, <span class="number">786</span>, <span class="number">2.33</span>, <span class="string">'John'</span>, <span class="number">70.2</span> ]</div><div class="line">tinylist = [ <span class="number">123</span>, <span class="string">'john'</span> ]</div><div class="line"></div><div class="line"><span class="keyword">print</span> list                  // 输出完整列表</div><div class="line"><span class="keyword">print</span> list[<span class="number">0</span>]               // 输出列表的第一个元素</div><div class="line"><span class="keyword">print</span> list[<span class="number">1</span>:<span class="number">3</span>]             // 输出列表第二至第三的元素</div><div class="line"><span class="keyword">print</span> list[<span class="number">2</span>:]              // 输出从第三个开始至末尾的所有元素</div><div class="line"><span class="keyword">print</span> tinylist *<span class="number">2</span>           // 输出列表两次</div><div class="line"><span class="keyword">print</span> list + tinylist       // 输出组合列表</div><div class="line"></div><div class="line">// 执行结果</div><div class="line">[<span class="string">'abcd'</span>, <span class="number">786</span>, <span class="number">2.33</span>, <span class="string">'John'</span>, <span class="number">70.2</span>]</div><div class="line">abcd</div><div class="line">[<span class="number">786</span>, <span class="number">2.33</span>]</div><div class="line">[<span class="number">2.33</span>, <span class="string">'John'</span>, <span class="number">70.2</span>]</div><div class="line">[<span class="number">123</span>, <span class="string">'john'</span>, <span class="number">123</span>, <span class="string">'john'</span>]</div><div class="line">[<span class="string">'abcd'</span>, <span class="number">786</span>, <span class="number">2.33</span>, <span class="string">'John'</span>, <span class="number">70.2</span>, <span class="number">123</span>, <span class="string">'john'</span>]</div></pre></td></tr></table></figure></p>
<h4 id="Python元组"><a href="#Python元组" class="headerlink" title="Python元组"></a>Python元组</h4><p>元组是另一个数据类型，类似与List<br>元组用<code>()</code>标示。内部元素用逗号相隔，元素不能二次赋值，相当于只读列表<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">// 脚本内容</div><div class="line"><span class="comment">#!/usr/bin/env python</span></div><div class="line"><span class="comment"># -*- coding: UTF-8</span></div><div class="line">tuple = ( <span class="string">'abcd'</span>, <span class="number">768</span>, <span class="number">2.23</span>, <span class="string">'john'</span>, <span class="number">70.2</span> )</div><div class="line">tinytuple = ( <span class="number">123</span>, <span class="string">'john'</span> )</div><div class="line"></div><div class="line"><span class="keyword">print</span> tuple                   //输出完整元组</div><div class="line"><span class="keyword">print</span> tuple[<span class="number">0</span>]                //元组的第一个元素</div><div class="line"><span class="keyword">print</span> tuple[<span class="number">1</span>:<span class="number">3</span>]              //元组的第二个到二三个元素</div><div class="line"><span class="keyword">print</span> tuple[<span class="number">2</span>:]               //元第三个到最后一个元素</div><div class="line"><span class="keyword">print</span> tinytuple*<span class="number">2</span>             //输出两次元组</div><div class="line"><span class="keyword">print</span> tuple + tinytuple       //打印两个元组的组合</div><div class="line"></div><div class="line"></div><div class="line">// 执行结果</div><div class="line">python tuple.py </div><div class="line">(<span class="string">'abcd'</span>, <span class="number">768</span>, <span class="number">2.23</span>, <span class="string">'john'</span>, <span class="number">70.2</span>)</div><div class="line">abcd</div><div class="line">(<span class="number">768</span>, <span class="number">2.23</span>)</div><div class="line">(<span class="number">2.23</span>, <span class="string">'john'</span>, <span class="number">70.2</span>)</div><div class="line">(<span class="number">123</span>, <span class="string">'john'</span>, <span class="number">123</span>, <span class="string">'john'</span>)</div><div class="line">(<span class="string">'abcd'</span>, <span class="number">768</span>, <span class="number">2.23</span>, <span class="string">'john'</span>, <span class="number">70.2</span>, <span class="number">123</span>, <span class="string">'john'</span>)</div></pre></td></tr></table></figure></p>
<h4 id="Python-元字典"><a href="#Python-元字典" class="headerlink" title="Python 元字典"></a>Python 元字典</h4><p>字典dictionary是除列表以外python中最为灵活的内置数据结构类型。列表是有序的对象结合，字典是无序的对象集合。两者之间的区别在于:字典当中的元素是通过键来存取，而不是通过偏移存取，字典用<code>{}</code>标识，字典由索引eky和对应的值value组成<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">// 脚本内容</div><div class="line"><span class="comment">#!/usr/bin/env python</span></div><div class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></div><div class="line">dict = &#123;&#125;                             </div><div class="line">dict[<span class="string">'one'</span>] = <span class="string">"This is on"</span>                                </div><div class="line">dict[<span class="number">2</span>] = <span class="string">"This is two"</span>                                   </div><div class="line">tinydict = &#123;<span class="string">'name'</span>: <span class="string">'john'</span>, <span class="string">'code'</span>:<span class="number">6734</span>, <span class="string">'dept'</span>: <span class="string">'sales'</span>&#125; </div><div class="line"></div><div class="line"><span class="keyword">print</span> dict[<span class="string">'one'</span>]           //输出key为one的值                                     </div><div class="line"><span class="keyword">print</span> dict[<span class="number">2</span>]               //输出key为<span class="number">2</span>的值</div><div class="line"><span class="keyword">print</span> tinydict              //输出完整字典</div><div class="line"><span class="keyword">print</span> tinydict.keys()       // 输出所有key</div><div class="line"><span class="keyword">print</span> tinydict.values()     //输出所有value</div><div class="line"></div><div class="line">// 输出结果</div><div class="line">This <span class="keyword">is</span> on </div><div class="line">This <span class="keyword">is</span> two</div><div class="line">&#123;<span class="string">'dept'</span>: <span class="string">'sales'</span>, <span class="string">'code'</span>: <span class="number">6734</span>, <span class="string">'name'</span>: <span class="string">'john'</span>&#125;</div><div class="line">[<span class="string">'dept'</span>, <span class="string">'code'</span>, <span class="string">'name'</span>]</div><div class="line">[<span class="string">'sales'</span>, <span class="number">6734</span>, <span class="string">'john'</span>]</div></pre></td></tr></table></figure></p>
<h4 id="数据类型转换"><a href="#数据类型转换" class="headerlink" title="数据类型转换"></a>数据类型转换</h4><p>有时候，需要对数据内置的类型进行转换，数据类型的转换，只需要将数据类型作为函数名即可，下面是几个内置函数可以执行数据类型转换，这些函数返回一个新的对象，表示转换的值。</p>
<table>
<thead>
<tr>
<th>函数</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>int(x [,base])</td>
<td>将x转换为一个整数</td>
</tr>
<tr>
<td>long(x [,base] )</td>
<td>将x转换为一个长整数</td>
</tr>
<tr>
<td>float(x)</td>
<td>将x转换到一个浮点数</td>
</tr>
<tr>
<td>complex(real [,imag])</td>
<td>创建一个复数</td>
</tr>
<tr>
<td>str(x)</td>
<td>将对象 x 转换为字符串</td>
</tr>
<tr>
<td>repr(x)</td>
<td>将对象 x 转换为表达式字符串</td>
</tr>
<tr>
<td>eval(str)</td>
<td>用来计算在字符串中的有效Python表达式,并返回一个对象</td>
</tr>
<tr>
<td>tuple(s)</td>
<td>将序列 s 转换为一个元组</td>
</tr>
<tr>
<td>list(s)</td>
<td>将序列 s 转换为一个列表</td>
</tr>
<tr>
<td>set(s)</td>
<td>转换为可变集合</td>
</tr>
<tr>
<td>dict(d)</td>
<td>创建一个字典。d 必须是一个序列 (key,value)元组。</td>
</tr>
<tr>
<td>frozenset(s)</td>
<td>转换为不可变集合</td>
</tr>
<tr>
<td>chr(x)</td>
<td>将一个整数转换为一个字符</td>
</tr>
<tr>
<td>unichr(x)</td>
<td>将一个整数转换为Unicode字符</td>
</tr>
<tr>
<td>ord(x)</td>
<td>将一个字符转换为它的整数值</td>
</tr>
<tr>
<td>hex(x)</td>
<td>将一个整数转换为一个十六进制字符串</td>
</tr>
<tr>
<td>oct(x)</td>
<td>将一个整数转换为一个八进制字符串</td>
</tr>
</tbody>
</table>
<hr>
<p><strong> <a href="https://www.digitalocean.com/?refcode=9e4ab85e22ec" target="_blank" rel="external">DigitalOcean的VPS，稳定、便宜，用于搭建自己的站点和梯子，现在注册即得10$,免费玩2个月</a> </strong></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/02/25/learn-python-basic-syntax.html" itemprop="url">
                  Python学习--入门
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-02-25T13:53:06+08:00" content="2016-02-25">
              2016-02-25
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/02/25/learn-python-basic-syntax.html#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/02/25/learn-python-basic-syntax.html" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/02/25/learn-python-basic-syntax.html" class="leancloud_visitors" data-flag-title="Python学习--入门">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<h2 id="运行Python"><a href="#运行Python" class="headerlink" title="运行Python"></a>运行Python</h2><h3 id="交互模式"><a href="#交互模式" class="headerlink" title="交互模式"></a>交互模式</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ python </div><div class="line">&gt;&gt;&gt; <span class="keyword">print</span> <span class="string">'Hello World.'</span></div><div class="line">Hello World.</div></pre></td></tr></table></figure>
<h3 id="脚本模式"><a href="#脚本模式" class="headerlink" title="脚本模式"></a>脚本模式</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$ cat hello.py</div><div class="line"><span class="comment">#!/usr/bin/env python</span></div><div class="line"><span class="keyword">print</span> <span class="string">'hello world'</span></div><div class="line"></div><div class="line">$ python hello.py </div><div class="line">Hello World.</div></pre></td></tr></table></figure>
<h3 id="编码风格"><a href="#编码风格" class="headerlink" title="编码风格"></a>编码风格</h3><p><a href="http://google-styleguide.googlecode.com/svn/trunk/pyguide.html" target="_blank" rel="external">http://google-styleguide.googlecode.com/svn/trunk/pyguide.html</a></p>
<h3 id="输出"><a href="#输出" class="headerlink" title="输出"></a>输出</h3><p>使用<code>print</code>加上字符串，就可以像屏幕输出指定字符串<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">print</span> <span class="string">'Hello World.'</span>python</div></pre></td></tr></table></figure></p>
<h3 id="输入"><a href="#输入" class="headerlink" title="输入"></a>输入</h3><p>python提供<code>raw_input</code>，提供用户输入<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; name = raw_input()</div><div class="line">Charlie.Cui</div><div class="line">&gt;&gt;&gt; <span class="keyword">print</span> name</div><div class="line">Charlie.Cui</div></pre></td></tr></table></figure></p>
<h3 id="源程序编码"><a href="#源程序编码" class="headerlink" title="源程序编码"></a>源程序编码</h3><p>在python源文件中可以使用非ASCII编码。通过在<code>#!</code>行的后面添加一个特殊的注释来定义源文件的编码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># -*- coding: encoding -*-</span></div><div class="line">// python 支持utf<span class="number">-8</span> 编码</div><div class="line"><span class="comment"># -*- coding: utf-8 -*-</span></div></pre></td></tr></table></figure></p>
<h3 id="标识符"><a href="#标识符" class="headerlink" title="标识符"></a>标识符</h3><p>变量是标识符的列子，标识符是用来标识某样东西的名字。在命名标识符的时候，要遵守如下规则</p>
<ul>
<li><p>Python的标识符区分大小写</p>
</li>
<li><p>标识符以字母或下划线开头，包括字母、下划线和数字、大小写敏感</p>
</li>
<li><p>以下划线开头(_foo)的代表不能直接访问的类属性，需通过类提供的接口进行访问，不能用from xx import *导入</p>
</li>
<li><p>以双下划线开头的(__foo)代表类的私有成员</p>
</li>
<li><p>以双下换线开头和结尾的(<strong>foo</strong>)代表python里特殊方法专用的标识符，如<strong>init</strong>()代表类的构造函数</p>
</li>
<li><p>标识符不能是保留字</p>
</li>
</ul>
<p>下面是Python的保留字符，保留字符不能用作常数或变数，或其他标识符名称，所有的Python的标识符只含有小写字母。<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">// python保留字符</div><div class="line">and            elif        global   or    yield</div><div class="line">assert         else        if       pass</div><div class="line">break          except      import   print</div><div class="line">class          exec        in       raise</div><div class="line">continue       finally     is       return</div><div class="line">def            for         lambda   try</div><div class="line">del            from        not      while</div></pre></td></tr></table></figure></p>
<h3 id="缩进"><a href="#缩进" class="headerlink" title="缩进"></a>缩进</h3><p>python函数没有明显的begin和end，没有标明函数的开始和结束的花括号，唯一的分隔符是一个冒号<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">a = <span class="number">100</span>;</div><div class="line"><span class="keyword">if</span> a &gt;= <span class="number">100</span>;</div><div class="line">    <span class="keyword">print</span> a</div><div class="line"><span class="keyword">else</span>;</div><div class="line">    <span class="keyword">print</span> -a</div></pre></td></tr></table></figure></p>
<p>注释以<code>#</code>开头，每一行都是一个语句，并以<code>;</code>结尾，缩进的语句视为代码块，代码块与的使用4个空格机型缩进。</p>
<h3 id="多行语句"><a href="#多行语句" class="headerlink" title="多行语句"></a>多行语句</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">// 使用\将每行的语句分为多行显示</div><div class="line">total = item_one + \</div><div class="line">        item_two + \</div><div class="line">        item_three</div><div class="line">// 语句中包含[]或&#123;&#125;或()不需要多行连字符</div><div class="line">days  = [<span class="string">'Monday'</span>, <span class="string">'Tuesday'</span>, <span class="string">'Wendnesday'</span>,</div><div class="line">        <span class="string">'Thursday'</span>, <span class="string">'Friday'</span>]</div></pre></td></tr></table></figure>
<hr>
<p><strong> <a href="https://www.digitalocean.com/?refcode=9e4ab85e22ec" target="_blank" rel="external">DigitalOcean的VPS，稳定、便宜，用于搭建自己的站点和梯子，现在注册即得10$,免费玩2个月</a> </strong></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/02/18/glibc-getaddrinfo-repair.html" itemprop="url">
                  glibc再爆漏洞
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-02-18T18:20:23+08:00" content="2016-02-18">
              2016-02-18
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/02/18/glibc-getaddrinfo-repair.html#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/02/18/glibc-getaddrinfo-repair.html" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/02/18/glibc-getaddrinfo-repair.html" class="leancloud_visitors" data-flag-title="glibc再爆漏洞">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<h2 id="漏洞详情"><a href="#漏洞详情" class="headerlink" title="漏洞详情"></a>漏洞详情</h2><p>近日，Google和Red Hat的安全人员发现GNU C Library (glibc)中存在严重的安全漏洞，可导致Linux软件被攻击者劫持，进而在Linux平台上执行任意代码，获取密码，监视用户，甚至控制计算机。CVE编号为<a href="https://access.redhat.com/security/cve/CVE-2015-7547" target="_blank" rel="external">CVE-2015-7547</a>。<br><img src="http://www.zerounix.com/images/system/security/glibc_bug.jpg" alt="glibc_bug"></p>
<p>glibc是GNU发布的libc库，即c运行库。它是Linux系统中最底层的API，几乎其它运行库都会依赖于glibc。glibc应用于众多Linux发行版本中，所以此类漏洞影响范围十分广泛。</p>
<h3 id="漏洞概述"><a href="#漏洞概述" class="headerlink" title="漏洞概述"></a>漏洞概述</h3><p>glibc的DNS客户端解析器中存在基于栈的缓冲区溢出漏洞。当软件用到getaddrinfo库函数(处理名字到地址以及服务到端口的转换)时，攻击者便可借助特制的域名、DNS服务器或中间人攻击利用该漏洞，控制软件，并试图控制整个系统。</p>
<p>攻击者使用恶意的DNS域名服务器创建类似于evildomain.com的域名，然后向目标用户发送带有指向该域名的链接的邮件，一旦用户点击该链接，客户端或浏览器将会开始查找ildomain.com，并最终得到恶意服务器的buffer-busting响应。该域名被嵌入服务器日志中，一旦解析就会触发远程代码执行，SH客户端也会因此被控制。或者，位于目标用户网络中的中间人攻击者可以篡改DNS响应，向恶意代码中动态注入负载。</p>
<p>据目前的调查情况，此漏洞影响自2.9之后的所有版本，其他旧版本也可能受到影响。<br><img src="http://www.zerounix.com/images/system/security/glibc_system_version.png" alt="glibc_system_version" title="收到影响的RHEL系统版本"></p>
<p>其他系统还包括<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">CentOS6 所有版本</div><div class="line">CentOS7所有版本</div><div class="line">SUSE Linux Enterprise Server 11 SP3</div><div class="line">SUSE Linux Enterprise Server 12</div><div class="line">Ubuntu Server 14.04.1 LTS 32位</div><div class="line">Ubuntu Server 14.04.1 LTS 64位</div><div class="line">Ubuntu Server 12.04 LTS 64位</div><div class="line">Ubuntu Server 12.04 LTS 64位（Docker）</div><div class="line">Debian8.2 32位</div><div class="line">Debian8.2 64位</div><div class="line">Debian7.8 32位</div><div class="line">Debian7.8 64位</div><div class="line">Debian7.4 64位</div><div class="line">CoreOS717.3.0 64位</div></pre></td></tr></table></figure></p>
<h3 id="技术细节"><a href="#技术细节" class="headerlink" title="技术细节"></a>技术细节</h3><p>glibc通过alloca()函数在栈中为<code>_nss_dns_gethostbyname4_r</code>函数2048字节的空间，用于托管DNS响应。若响应大于2048字节，程序会从堆中重新分配一个缓冲区，并更新所有信息(缓冲区指针，缓冲区大小和响应大小)。</p>
<p>在一定条件下，会出现栈缓冲区和新分配的堆内存的错误匹配，导致超过栈缓冲区大小的响应仍然存储在栈中，进而发生缓冲区溢出。触发该漏洞的利用向量十分普遍，并且ssh、sudo和curl等工具中。</p>
<h3 id="缓解"><a href="#缓解" class="headerlink" title="缓解"></a>缓解</h3><p>该漏洞存在于resolv/res_send.c文件中，当getaddrinfo()函数被调用时会触发该漏洞。技术人员可以通过将TCP DNS响应的大小限制为1024字节，并丢弃所有超过512字节的UDPDNS数据包来缓解该问题。值得庆幸的是，许多嵌入式Linux设备，例如家庭路由器，更倾向于使用uclibc库，因此可以免受该漏洞的影响。</p>
<h3 id="漏洞的成因及POC使用测试"><a href="#漏洞的成因及POC使用测试" class="headerlink" title="漏洞的成因及POC使用测试"></a>漏洞的成因及POC使用测试</h3><p>据悉，漏洞的成因在于DNS Server Response返回过量的(2048 ) 字节, 导致接下来的response 触发栈溢出。目前，Google已提供了POC，据其博客中所述，该漏洞应该是可以绕过内存防护技术，从而形成代码执行漏洞。<br>具体POC 地址如下：github.com/fjserna/CVE-2015-7547<br>  对此，乌云白帽子路人甲在自己的本地lubuntu 上进行了测试，libc 版本为 2.19。lubuntu系列也属于Debian 的一个发行版，故理论上满足漏洞条件。测试过程如下：<br>根据漏洞描述，我们可以做一个假的DNS Server 作为中间人，来验证该漏洞。更改DNS 解析为 127.0.0.1，刷新DNS 缓存 sudo /etc/init.d/nscd restart 执行 CVE-2015-7547-poc.py , 注意无需更改 ip_addr 。编译 CVE-2015-7547-client.c , 执行CVE-2015-7547-client<br>若含有漏洞，会造成Segmentation Fault。<br><img src="http://www.zerounix.com/images/system/security/glibc_bug_info.png" alt="glibc_bug_info"></p>
<p>文件下载链接：<br><a href="http://www.zerounix.com/upload/security/CVE-2015-7547-master.zip" target="_blank" rel="external">CVE-2015-7547-master.zip</a></p>
<h2 id="修复过程"><a href="#修复过程" class="headerlink" title="修复过程"></a>修复过程</h2><ol>
<li><p>更新glibc版本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">//rhel¢os</div><div class="line">yum -y update glibc* nscd</div><div class="line"></div><div class="line"></div><div class="line">//debian&amp;ubuntu</div><div class="line">apt-get update</div><div class="line">apt-get install libc6; apt-get install libc-bin</div></pre></td></tr></table></figure>
</li>
<li><p>重启服务<br>由于本次漏洞为glibc的漏洞，涉及多种应用程序，最安全并且推荐的修复方法是重启系统生效。<br>如果你的系统无法重启，请执行如下命令查询仍然在使用老版本glibc的程序。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lsof +c0 -d DEL | awk &apos;NR==1 || /libc-/ &#123;print $2,$1,$4,$NF&#125;&apos; | column -t</div></pre></td></tr></table></figure>
</li>
</ol>
<p>根据查询的结果, 识别哪些是对外提供服务的程序，重启对应的服务。</p>
<h2 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h2><p>公司大部分服务器都是centos 6.x和7.x ，CentOS 社区也在2016年2月17日 更新了最新的glibc版本，那么升级起来就很方便了，写了个升级脚本，内容如下，先让脚本跑一会。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div></pre></td><td class="code"><pre><div class="line">cat repair_glibc.sh </div><div class="line">#!/bin/bash</div><div class="line">######################################################</div><div class="line">## Title:  Repair glibc getaddrinfo() Bug 18665     ##</div><div class="line">## Version: 1.0                                     ##</div><div class="line">## Date: 2016-02-18                                 ##</div><div class="line">## Author: Charlie.Cui                              ##</div><div class="line">## License: General Public License (GPL)            ##</div><div class="line">## Copyright© 2015, Charlie.Cui All Rights Reserved ##</div><div class="line">######################################################</div><div class="line"></div><div class="line">system=`cat /etc/redhat-release| awk &apos;&#123;print $1&#125;&apos;`</div><div class="line">release=`rpm -qa | grep ^kernel-[0-9] |head -n 1 | awk -F&apos;.&apos; &apos;&#123;print $4&#125;&apos;`</div><div class="line">glibc_version=`rpm -qa glibc`</div><div class="line">FRed=&quot;\E[31;40m&quot;; FGreen=&quot;\E[32;40m&quot;; FBlue=&quot;\E[34;40m&quot;; St0=&quot;\033[1m&quot;; St1=&quot;\033[5m&quot;; Ed=&quot;\033[0m&quot; </div><div class="line"></div><div class="line"># el6 Update glibc</div><div class="line">el6() &#123;</div><div class="line">wget http://172.16.6.18/resource/files/CentOS6.x/local_mirror.repo -O /etc/yum.repos.d/local_mirror.repo</div><div class="line">wget http://172.16.6.18/resource/files/CentOS6.x/epel.repo -O /etc/yum.repos.d/epel.repo</div><div class="line">yum clean all;yum makecache</div><div class="line">yum update glibc -y</div><div class="line">if [ $glibc_version = glibc-2.12-1.166.el6_7.7.x86_64 ];then</div><div class="line">  echo -e &quot; $FGreen $glibc_version Update Sucesed! $Ed&quot;</div><div class="line">else </div><div class="line">  echo -e &quot; $FRed $glibc_version Update Faild! $Ed&quot;</div><div class="line">fi</div><div class="line">&#125;</div><div class="line"></div><div class="line"># el7 Update glibc</div><div class="line">el7() &#123;</div><div class="line">wget http://172.16.6.18/resource/files/CentOS7.x/local_mirror.repo -O /etc/yum.repos.d/local_mirror.repo</div><div class="line">wget http://172.16.6.18/resource/files/CentOS7.x/epel.repo -O /etc/yum.repos.d/epel.repo</div><div class="line">yum clean all;yum makecache</div><div class="line">yum update glibc -y</div><div class="line">if [ $glibc_version = glbc-2.17-106.el7_2.4.x86_64 ];then</div><div class="line">  echo -e &quot; $FGreen $glibc_version Update Sucesed! $Ed&quot;</div><div class="line">else </div><div class="line">  echo -e &quot; $FRed $glibc_version Update Faild! $Ed&quot;</div><div class="line">fi</div><div class="line">&#125;</div><div class="line"></div><div class="line"># Check System </div><div class="line">if [ $system = CentOS ];then</div><div class="line">  echo -e &quot;$FGreen This System Version Is: $system continue update glibc version... $Ed&quot;</div><div class="line">  # Check release</div><div class="line">  if [ $release = el6 ];then</div><div class="line">    if [ `rpm -qa glibc` = glibc-2.12-1.166.el6_7.7.x86_64 ];then</div><div class="line">      echo -e &quot; $FGreen $glibc_version is the latest version $Ed&quot;</div><div class="line">    else </div><div class="line">      el6</div><div class="line">    fi</div><div class="line">  elif [ $release = el7 ];then</div><div class="line">    if [ `rpm -qa glibc` = glibc-2.17-106.el7_2.4.x86_64 ];then</div><div class="line">      echo -e &quot; $FGreen $glibc_version is the latest version $Ed&quot;</div><div class="line">    else</div><div class="line">      el7</div><div class="line">    fi</div><div class="line">  else </div><div class="line">    echo -e &quot;$FRed Unknow Error $Ed&quot;</div><div class="line">    exit;</div><div class="line">  fi</div><div class="line">else</div><div class="line">  echo -e &quot;$FRed This System Version Is Not CentOS $Ed&quot;</div><div class="line">  exit;</div><div class="line">fi</div></pre></td></tr></table></figure></p>
<hr>
<p><strong> <a href="https://www.digitalocean.com/?refcode=9e4ab85e22ec" target="_blank" rel="external">DigitalOcean的VPS，稳定、便宜，用于搭建自己的站点和梯子，现在注册即得10$,免费玩2个月</a> </strong></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/02/16/how-to-setup-reverse-proxy-by-nginx.html" itemprop="url">
                  Nginx--玩转反向代理
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-02-16T17:02:21+08:00" content="2016-02-16">
              2016-02-16
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Nginx/" itemprop="url" rel="index">
                    <span itemprop="name">Nginx</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/02/16/how-to-setup-reverse-proxy-by-nginx.html#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/02/16/how-to-setup-reverse-proxy-by-nginx.html" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/02/16/how-to-setup-reverse-proxy-by-nginx.html" class="leancloud_visitors" data-flag-title="Nginx--玩转反向代理">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<h2 id="反向代理"><a href="#反向代理" class="headerlink" title="反向代理"></a>反向代理</h2><h3 id="初识反向代理"><a href="#初识反向代理" class="headerlink" title="初识反向代理"></a>初识反向代理</h3><p>反向代理(Reverse Proxy)是指以代理服务器来接受Internet的连接请求，然后将请求转发给内部服务器，并将从服务器得到的结构返回给Internet请求客户端，喜事的代理服务器对外表现为一个反向代理服务器。</p>
<p><img src="http://www.zerounix.com/images/web/nginx/Reverse_Proxy.png" alt="Reverse_Proxy" title="反向代理示意图"></p>
<h3 id="反向代理作用"><a href="#反向代理作用" class="headerlink" title="反向代理作用"></a>反向代理作用</h3><ul>
<li>保护网站安全 – 任何来自Internet的请求都必须先经过代理服务器</li>
<li>通过配置缓存功能加速Web请求 – 可以缓存后端Web服务器的某些静态资源，减轻Web服务器的负载</li>
<li>实现负载均衡 – 充当负载均衡服务器均衡的分发请求，平衡集群中各个服务器的负载压力</li>
</ul>
<h2 id="安装-Nginx"><a href="#安装-Nginx" class="headerlink" title="安装 Nginx"></a>安装 Nginx</h2><p>安装过程参考nginx+php-fpm这篇文章的安装过程</p>
<h2 id="配置反向代理"><a href="#配置反向代理" class="headerlink" title="配置反向代理"></a>配置反向代理</h2><p>简单的反向代理就是http，不需要缓存控制等高级功能，仅仅一个简单的代理，比如nginx+php-fpm也是一种反向代理</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">location ~ .*\.(php|php5)$ &#123;</div><div class="line">   fastcgi_pass 127.0.0.1:9000;</div><div class="line">   include        fastcgi.conf;</div><div class="line">   try_files $uri =404;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>而相对复杂一些的就是反向代理一些网站，会应用到缓存控制机制。</p>
<h3 id="简单反向代理"><a href="#简单反向代理" class="headerlink" title="简单反向代理"></a>简单反向代理</h3><ul>
<li>在nginx.conf配置文件中的http块中添加下面内容</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">// 反向代理参数</div><div class="line">proxy_connect_timeout 5;                        // nginx跟后端服务器连接超时时间(代理连接超时)                       </div><div class="line">proxy_send_timeout 60;</div><div class="line">proxy_read_timeout 5;                           // 连接成功后，后端服务器响应时间(代理接收超时)</div><div class="line">proxy_buffer_size 32k;                          // 设置代理服务器（nginx）保存用户头信息的缓冲区大小</div><div class="line">proxy_buffers 4 64k;                            // proxy_buffers缓冲区</div><div class="line">proxy_busy_buffers_size 128k;                   // 高负荷下缓冲大小（proxy_buffers*2）</div><div class="line">proxy_temp_file_write_size 128k;                  </div><div class="line">proxy_ignore_client_abort on;                   // 不允许代理端主动关闭连接</div><div class="line">proxy_headers_hash_max_size 51200;</div><div class="line">proxy_headers_hash_bucket_size 6400;</div><div class="line"></div><div class="line">// 配置临时目录、缓存路径(同一个硬盘分区，注意权限)</div><div class="line">proxy_temp_path   /cache/proxy_temp 1 2;</div><div class="line">proxy_cache_path  /cache/proxy_cache levels=1:2 keys_zone=cache_one:200m inactive=1d max_size=10g;</div><div class="line"></div><div class="line">// keys_zone=cache_one:200m 表示这个 zone 名称为 cache_one，分配的内存大小为 200MB</div><div class="line">// levels=1:2 表示缓存目录的第一级目录是 1 个字符，第二级目录是 2 个字符</div><div class="line">// inactive=1d 表示这个zone中的缓存文件如果在 1 天内都没有被访问，那么文件会被cache manager 进程删除</div><div class="line">// max_size=10G 表示这个zone的硬盘容量为 10G</div></pre></td></tr></table></figure>
<ul>
<li>在虚拟主机配置文件proxy.zerounix.com.conf文件中添加下面内容</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line">server &#123;</div><div class="line">        listen       80;</div><div class="line">        server_name  proxy.zerounix.com;</div><div class="line">        index index.html index.htm index.php;</div><div class="line">        access_log  logs/proxy.zerounix.com_access.log access;</div><div class="line"></div><div class="line">        location / &#123;</div><div class="line">            proxy_redirect off;</div><div class="line">            proxy_set_header Host $host;</div><div class="line">            proxy_set_header X-Real-IP $remote_addr;</div><div class="line">            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</div><div class="line">            proxy_set_header X-Forwarded-For $remote_addr;</div><div class="line">            proxy_pass http://172.16.11.211;</div><div class="line">        &#125;</div><div class="line"></div><div class="line"></div><div class="line">// 只对图片、js、css等静态文件进行缓存</div><div class="line"></div><div class="line">        location ~ .*\.(gif|jpg|jpeg|png|bmp|swf|js|css)$ &#123;</div><div class="line">            proxy_next_upstream http_502 http_504 error timeout invalid_header;</div><div class="line">            proxy_cache cache_one;</div><div class="line">            proxy_cache_valid  200 304 12h;</div><div class="line">            proxy_cache_valid 301 302 1m;</div><div class="line">            proxy_cache_valid any 1m;</div><div class="line">            proxy_cache_key $host$uri$is_args$args;</div><div class="line">            proxy_set_header Host $host;</div><div class="line">            proxy_set_header X-Real-IP $remote_addr;</div><div class="line">            proxy_set_header X-Forwarded-For $remote_addr;</div><div class="line">            proxy_set_header Accept-Encoding &quot;none&quot;;</div><div class="line">            proxy_ignore_headers &quot;Cache-Control&quot; &quot;Expires&quot;;</div><div class="line">            proxy_pass http://172.16.11.211;</div><div class="line">            expires      1h;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        location ~ .*\.(php|jsp|cgi)?$ &#123;</div><div class="line">            proxy_set_header Host $host;</div><div class="line">            proxy_set_header X-Forwarded-For  $remote_addr;</div><div class="line">            proxy_pass http://172.16.11.211;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        error_page  500 502 503 504  /50x.html;</div><div class="line"></div><div class="line">        location = /50x.html &#123;</div><div class="line">            root   html;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="使用SSL的反向代理"><a href="#使用SSL的反向代理" class="headerlink" title="使用SSL的反向代理"></a>使用SSL的反向代理</h3><ul>
<li>安装nginx</li>
</ul>
<p>需要将将 –with-http_sub_module、ngx_cache_purge-2.3编译到nginx中<br>下载链接<a href="http://labs.frickle.com/files/" target="_blank" rel="external">http://labs.frickle.com/files/</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">// 编译参数</div><div class="line">./configure --prefix=/usr/local/nginx --add-module=../ngx_cache_purge-2.3 \</div><div class="line">--with-http_sub_module --with-http_stub_status_module --with-http_ssl_module --with-http_flv_module \</div><div class="line">--with-http_gzip_static_module --with-ld-opt=-ljemalloc</div></pre></td></tr></table></figure>
<ul>
<li>签发证书</li>
</ul>
<p>自己签发免费ssl证书，为nginx生成自签名ssl证书(访问时需添加信任。也可以使用第三方签名后的证书，如免费的startssl)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">cd /usr/local/nginx/conf</div><div class="line">openssl genrsa -out server.key 1024</div><div class="line">openssl req -new -key server.key -out server.csr</div><div class="line">openssl x509 -req -days 365 -in server.csr -signkey server.key -out server.crt</div></pre></td></tr></table></figure></p>
<ul>
<li>配置反向代理</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line">proxy_temp_path   /cache/proxy_temp 1 2;</div><div class="line">proxy_cache_path  /cache/proxy_cache levels=1:2 keys_zone=cache_one:200m inactive=1d max_size=10g;</div><div class="line">proxy_cache_key &quot;$host$request_uri&quot;;</div><div class="line"></div><div class="line">server &#123;</div><div class="line">listen 80;</div><div class="line">server_name proxy.zerounix.com;</div><div class="line">rewrite ^(.*) https://proxy.zerounix.com$1 permanent;</div><div class="line">&#125;</div><div class="line"></div><div class="line">server</div><div class="line">    &#123;</div><div class="line">        listen 443;</div><div class="line">        server_name proxy.zerounix.com;</div><div class="line"></div><div class="line">        upstream google &#123;</div><div class="line">            server 173.194.127.144:80 max_fails=3;</div><div class="line">            server 173.194.127.147:80 max_fails=3;</div><div class="line">            server 173.194.127.148:80 max_fails=3;</div><div class="line">            server 173.194.127.145:80 max_fails=3;</div><div class="line">            server 173.194.127.146:80 max_fails=3;  </div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        ssl on;</div><div class="line">        ssl_certificate      /usr/local/nginx/ssl/nginx.crt;      </div><div class="line">        ssl_certificate_key  /usr/local/nginx/ssl/nginx.key;   </div><div class="line">        ssl_protocols   TLSv1 TLSv1.1 TLSv1.2;</div><div class="line">        ssl_ciphers ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-SHA384:ECDHE-RSA-AES128-SHA256:ECDHE-RSA-RC4-SHA:ECDHE-RSA-AES256-SHA:DHE-RSA-AES256-SHA:DHE-RSA-AES128-SHA:RC4-SHA:!aNULL:!eNULL:!EXPORT:!DES:!3DES:!MD5:!DSS:!PKS;</div><div class="line">        ssl_prefer_server_ciphers  on;</div><div class="line">        ssl_session_cache       shared:SSL:10m;</div><div class="line">        ssl_session_timeout     5m;</div><div class="line"></div><div class="line">        location / &#123;</div><div class="line">            proxy_cache one;</div><div class="line">            proxy_cache_valid  200 302  1h;</div><div class="line">            proxy_cache_valid  404      1m;</div><div class="line">            proxy_redirect https://www.google.com/ /;</div><div class="line">            proxy_cookie_domain google.com proxy.zerounix.com;</div><div class="line">            proxy_pass              http://google;</div><div class="line">            proxy_set_header Host &quot;www.google.com&quot;;</div><div class="line">            proxy_set_header Accept-Encoding &quot;&quot;;</div><div class="line">            proxy_set_header User-Agent $http_user_agent;</div><div class="line">            proxy_set_header Accept-Language &quot;zh-CN&quot;;</div><div class="line">            proxy_set_header Cookie &quot;PREF=ID=047808f19f6de346:U=0f62f33dd8549d11:FF=2:LD=zh-CN:NW=1:TM=1325338577:LM=1332142444:GM=1:SG=2:S=rE0SyJh2w1IQ-Maw&quot;;            </div><div class="line">            sub_filter www.google.com proxy.zerounix.com;</div><div class="line">            sub_filter_once off</div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>1 监听了80和443端口，可以在Linux自己生成证书。<br>2 定义了个upstream google，放了5个谷歌的ip（通过nslookup www.google.com命令获取（yum -y install bind-utils）），如果不这样做，就等着被谷歌的验证码搞崩溃吧。<br>3 也设置了反向代理缓存，某些资源不用重复去请求谷歌获取，加快搜索速度<br>4 proxy_redirect <a href="https://www.google.com/" target="_blank" rel="external">https://www.google.com/</a> /; 这行的作用是把谷歌服务器返回的302响应头里的域名替换成我们的，不然浏览器还是会直接请求www.google.com，那样反向代理就失效了。<br>5 proxy_cookie_domain google.com proxy.zerounix.com; 把cookie的作用域替换成我们的域名<br>6 proxy_pass <a href="http://google" target="_blank" rel="external">http://google</a>; 反向代理到upstream google<br>7 proxy_set_header Accept-Encoding “”; 防止谷歌返回压缩的内容，因为压缩的内容我们无法作域名替换<br>8 proxy_set_header Accept-Language “zh-CN”;设置语言为中文<br>9 proxy_set_header Cookie “PREF=ID=047808f19f6de346:U=0f62f33dd8549d11:FF=2:LD=zh-CN:NW=1:TM=1325338577:LM=1332142444:GM=1:SG=2:S=rE0SyJh2w1IQ-Maw”; 这行很关键，传固定的cookie给谷歌，是为了禁止即时搜索，因为开启即时搜索无法替换内容。还有设置为新窗口打开网站，这个符合我们打开链接的习惯<br>10 sub_filter www.google.com proxy.zerounix.com当然是把谷歌的域名替换成我们的了，注意需要安装nginx的sub_filter模块(编译加上–with-http_sub_module参数)</p>
<hr>
<p><strong> <a href="https://www.digitalocean.com/?refcode=9e4ab85e22ec" target="_blank" rel="external">DigitalOcean的VPS，稳定、便宜，用于搭建自己的站点和梯子，现在注册即得10$,免费玩2个月</a> </strong></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/02/16/nginx-support-https.html" itemprop="url">
                  通过HTTPS访问Web
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-02-16T11:20:10+08:00" content="2016-02-16">
              2016-02-16
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Nginx/" itemprop="url" rel="index">
                    <span itemprop="name">Nginx</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/02/16/nginx-support-https.html#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/02/16/nginx-support-https.html" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/02/16/nginx-support-https.html" class="leancloud_visitors" data-flag-title="通过HTTPS访问Web">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<p><img src="http://www.zerounix.com/images/web/nginx/https_title.jpg" alt="HTTPS_Title"></p>
<h2 id="HTTPS"><a href="#HTTPS" class="headerlink" title="HTTPS"></a>HTTPS</h2><p>HTTPS目前已经是所有重视隐私和安全性的网站的首选，例如国外的Google、Facebook、Twitter，国内则是淘宝、百度、京东等都已都支持了全站HTTPS，可以想象以下，如果一个网站没有加密，那么你的所有账户密码都是通过明文来传输，当涉及到隐私和金融问题，不加密是多么可怕的事情。</p>
<p>随着技术的发展，HTTPS网站已不再是大型网站的专利，所有普通的个人站点和blog可以以自己动手搭建一个安全加密的网站。</p>
<h3 id="什么是HTTPS、SSL证书"><a href="#什么是HTTPS、SSL证书" class="headerlink" title="什么是HTTPS、SSL证书"></a>什么是HTTPS、SSL证书</h3><ul>
<li>HTTPS</li>
</ul>
<blockquote>
<p>超文本传输安全协议（缩写：HTTPS，英语：Hypertext Transfer Protocol Secure）是超文本传输协议和SSL/TLS的组合，用以提供加密通讯及对网络服务器身份的鉴定。HTTPS连接经常被用于万维网上的交易支付和企业信息系统中敏感信息的传输。HTTPS不应与在RFC 2660中定义的安全超文本传输协议（S-HTTP）相混。</p>
</blockquote>
<ul>
<li>SSL证书</li>
</ul>
<p>SSL证书是数字证书的一种，遵守SSL协议，使用 Secure Socket Layer 协议在浏览器和 Web 服务器之间建立一条安全通道，从而实现数据信息在客户端和服务器之间的加密传输，保证双方传递信息的安全性，不可被第三方窃听；用户可以通过服务器证书验证他所访问的网站是否真实可靠。</p>
<p>等多关于HTTPS、SSl证书的信息，请Google.</p>
<h2 id="使用OpenSSL-生成自签名证书"><a href="#使用OpenSSL-生成自签名证书" class="headerlink" title="使用OpenSSL 生成自签名证书"></a>使用OpenSSL 生成自签名证书</h2><h3 id="制作CA证书"><a href="#制作CA证书" class="headerlink" title="制作CA证书"></a>制作CA证书</h3><ul>
<li>修改CA配置文件</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">vim /etc/pki/tls/openssl.conf</div><div class="line">[ CA_default ]</div><div class="line"></div><div class="line">dir             = /etc/pki/CA           # Where everything is kept</div><div class="line">certs           = $dir/certs            # Where the issued certs are kept</div><div class="line">crl_dir         = $dir/crl              # Where the issued crl are kept</div><div class="line">database        = $dir/index.txt        # database index file.</div><div class="line">#unique_subject = no                    # Set to &apos;no&apos; to allow creation of</div><div class="line">                                        # several ctificates with same subject.</div><div class="line">new_certs_dir   = $dir/newcerts         # default place for new certs.</div><div class="line"></div><div class="line">certificate     = $dir/cacert.pem       # The CA certificate</div><div class="line">serial          = $dir/serial           # The current serial number</div><div class="line">crlnumber       = $dir/crlnumber        # the current crl number</div><div class="line">                                        # must be commented out to leave a V1 CRL</div><div class="line">crl             = $dir/crl.pem          # The current CRL</div><div class="line">private_key     = $dir/private/cakey.pem# The private key</div><div class="line">RANDFILE        = $dir/private/.rand    # private random number file</div><div class="line"></div><div class="line"></div><div class="line">default_days    = 3650                   # how long to certify for</div><div class="line"></div><div class="line">[ policy_match ]</div><div class="line">countryName             = match</div><div class="line">stateOrProvinceName     = optional</div><div class="line">localityName            = optional</div><div class="line">organizationName        = optional</div><div class="line">organizationalUnitName  = optional</div><div class="line">commonName              = supplied</div><div class="line">emailAddress            = optional</div><div class="line"></div><div class="line"></div><div class="line">[ req_distinguished_name ]</div><div class="line">countryName                     = Country Name (2 letter code)</div><div class="line">countryName_default             = CN</div><div class="line">countryName_min                 = 2</div><div class="line">countryName_max                 = 2</div><div class="line"></div><div class="line"></div><div class="line">stateOrProvinceName             = State or Province Name (full name)</div><div class="line">stateOrProvinceName_default     = BJ</div></pre></td></tr></table></figure>
<ul>
<li>在CA目录下创建两个初始文件</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">touch index.txt serial</div><div class="line">echo 01 &gt; serial</div></pre></td></tr></table></figure>
<ul>
<li>生成根密钥</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cd /etc/pki/CA/</div><div class="line">(umask 077; openssl genrsa -out private/cakey.pem 2048 )</div></pre></td></tr></table></figure>
<ul>
<li>生成根证书</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(umask 077;openssl req -new -x509 -key private/cakey.pem -out cacert.pem)</div></pre></td></tr></table></figure>
<p>会提示输入一些内容，因为是私有的，所以可以随便输入（之前修改的openssl.cnf会在这里呈现），最好记住能与后面保持一致。上面的自签证书<code>cacert.pem</code>应该生成在<code>/etc/pki/CA</code>下</p>
<h3 id="制作服务器证书"><a href="#制作服务器证书" class="headerlink" title="制作服务器证书"></a>制作服务器证书</h3><ul>
<li>生成服务器ssl密钥</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mkdir /usr/local/nginx/ssl</div><div class="line">cd /usr/local/nginx/ssl</div><div class="line">openssl genrsa -out nginx.key 2048</div></pre></td></tr></table></figure>
<ul>
<li>为ningx生成证书签署请求</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">// 同样会提示输入一些内容，其它随便，除了`Commone Name`一定要是你要授予证书的服务器域名或主机名，challenge password不填。</div><div class="line">openssl req -new -key nginx.key -out nginx.csr</div></pre></td></tr></table></figure>
<ul>
<li>用私有CA来签署证书</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">openssl ca -in nginx.csr -out nginx.crt</div><div class="line">Using configuration from /etc/pki/tls/openssl.cnf</div><div class="line">Check that the request matches the signature</div><div class="line">Signature ok</div><div class="line">Certificate Details:</div><div class="line">        Serial Number: 1 (0x1)</div><div class="line">        Validity</div><div class="line">            Not Before: Feb  5 07:17:48 2016 GMT</div><div class="line">            Not After : Feb  2 07:17:48 2026 GMT</div><div class="line">        Subject:</div><div class="line">            countryName               = CN</div><div class="line">            stateOrProvinceName       = BJ</div><div class="line">            localityName              = BJ</div><div class="line">            organizationName          = Default Company Ltd</div><div class="line">            commonName                = *.zerounix.com</div><div class="line">        X509v3 extensions:</div><div class="line">            X509v3 Basic Constraints: </div><div class="line">                CA:FALSE</div><div class="line">            Netscape Comment: </div><div class="line">                OpenSSL Generated Certificate</div><div class="line">            X509v3 Subject Key Identifier: </div><div class="line">                18:A2:A4:B8:69:03:23:FE:94:7C:D8:95:A8:B9:95:B6:E7:28:D7:58</div><div class="line">            X509v3 Authority Key Identifier: </div><div class="line">                keyid:0D:01:60:ED:AF:82:A6:DB:46:42:BB:D7:F5:BD:4C:22:B8:6E:9F:33</div><div class="line"></div><div class="line">Certificate is to be certified until Feb  2 07:17:48 2026 GMT (3650 days)</div><div class="line">Sign the certificate? [y/n]:y</div><div class="line"></div><div class="line"></div><div class="line">1 out of 1 certificate requests certified, commit? [y/n]y</div><div class="line">Write out database with 1 new entries</div><div class="line">Data Base Updated</div><div class="line"></div><div class="line">另外在极少数情况下，上面的命令生成的证书不能识别，试试下面的命令：</div><div class="line">openssl x509 -req -in server.csr -CA /etc/pki/CA/cacert.pem -CAkey /etc/pki/CA/private/cakey.pem -CAcreateserial -out server.crt</div></pre></td></tr></table></figure>
<p>上面签发过程其实默认使用了<code>-cert cacert.pem -keyfile cakey.pem</code>，这两个文件就是前两步生成的位于<code>/etc/pki/CA</code>下的根密钥和根证书。将生成的crt证书发回nginx服务器使用。</p>
<ul>
<li>精简上面的步骤如下</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">mkdir /usr/local/ngnix/ssl</div><div class="line">cd /usr/lcoal/nginx/ssl</div><div class="line">// 创建根证书私钥</div><div class="line">openssl genrsa -des3 -out ca.key 2048</div><div class="line">// 创建根证书 (这里/C表示国家(Country)，只能是国家字母缩写，如CN、US等；/ST表示州或者省(State/Provice)；/L表示城市或者地区(Locality)；/O表示组织名(Organization Name)；/OU其他显示内容，一般会显示在颁发者这栏)</div><div class="line">openssl req -new -x509 -days 36500 -key ca.key -out ca.crt -subj &quot;/C=CN/ST=BeiJing/L=BeiJing/O=Your Company Name/OU=Your Root CA&quot;</div><div class="line">// 创建服务器ssl证书私钥</div><div class="line">openssl genrsa -des3 -out server.key 2048</div><div class="line">// 建立SSL证书(/O字段内容必须与刚才的CA根证书相同；/CN字段为公用名称(Common Name)，必须为网站的域名(不带www)；/OU字段最好也与为网站域名，当然选择其他名字也没关系)</div><div class="line">openssl req -new -key server.key -out server.csr -subj &quot;/C=CN/ST=BeiJing/L=BeiJing/O=Your Company Name/OU=zerounix.com/CN=zerounix.com&quot;</div><div class="line">// 准备</div><div class="line">mkdir demoCA</div><div class="line">cd demoCA</div><div class="line">mkdir newcerts</div><div class="line">touch index.txt</div><div class="line">echo &apos;01&apos; &gt; serial</div><div class="line">cd ..</div><div class="line">// 自签名证书</div><div class="line">openssl ca -in server.csr -out server.crt -cert ca.crt -keyfile ca.key</div></pre></td></tr></table></figure>
<p>更为简单的步骤<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">openssl genrsa -des3 -out server.key 2048</div><div class="line">openssl req -new -key server.key -out server.csr</div></pre></td></tr></table></figure></p>
<h2 id="配置Nginx支持SSL"><a href="#配置Nginx支持SSL" class="headerlink" title="配置Nginx支持SSL"></a>配置Nginx支持SSL</h2><h3 id="编辑配置文件"><a href="#编辑配置文件" class="headerlink" title="编辑配置文件"></a>编辑配置文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">server &#123;</div><div class="line">    listen 443 ssl;</div><div class="line">    server_name www.zerounix.com;</div><div class="line">    root /data/website/www.zerounix.com;</div><div class="line">    charset utf-8;</div><div class="line">    index index.php index.html;</div><div class="line">    ssl on;                                                    // 开启ssl支持</div><div class="line">    ssl_certificate      /usr/local/nginx/ssl/nginx.crt;       // 证书位置</div><div class="line">    ssl_certificate_key  /usr/local/nginx/ssl/nginx.key;       // 私钥</div><div class="line">    ssl_session_timeout  5m;</div><div class="line">    ssl_protocols       TLSv1 TLSv1.1 TLSv1.2;                  // 指定密码为openssl支持的格式</div><div class="line">    ssl_ciphers         HIGH:!aNULL:!MD5;                      // 加密方法</div><div class="line">    ssl_prefer_server_ciphers on;</div><div class="line">    access_log  logs/www.zerounix.com_access.log access;</div><div class="line">    error_log   logs/www.zerounix.com_error.log;</div><div class="line"></div><div class="line">    location / &#123;</div><div class="line">        try_files $uri $uri/ /index.php$is_args$args;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    location ~ .*\.(php|php5)$ &#123;</div><div class="line">        #fastcgi_pass 127.0.0.1:9000;</div><div class="line">        fastcgi_pass   unix:/dev/shm/php-fpm.socket;</div><div class="line">        include        fastcgi.conf;</div><div class="line">        try_files $uri =404;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="通过第三方SSL签发机构签发SSL证书"><a href="#通过第三方SSL签发机构签发SSL证书" class="headerlink" title="通过第三方SSL签发机构签发SSL证书"></a>通过第三方SSL签发机构签发SSL证书</h2><h3 id="使用-OpenSSL-生成-SSL-Key-和-CSR"><a href="#使用-OpenSSL-生成-SSL-Key-和-CSR" class="headerlink" title="使用 OpenSSL 生成 SSL Key 和 CSR"></a>使用 OpenSSL 生成 SSL Key 和 CSR</h3><p>由于只有浏览器或者系统信赖的 CA 才可以让所有的访问者通畅的访问你的加密网站，而不是出现证书错误的提示。所以我们跳过自签证书的步骤，直接开始签署第三方可信任的 SSL 证书吧。<br>OpenSSL 在 Linux、OS X 等常规的系统下默认都安装了，因为一些安全问题，一般现在的第三方 SSL 证书签发机构都要求起码 2048 位的 RSA 加密的私钥。同时，普通的 SSL 证书认证分两种形式，一种是 DV（Domain Validated），还有一种是 OV （Organization Validated），前者只需要验证域名，后者需要验证你的组织或公司，在安全性方面，肯定是后者要好。无论你用 DV 还是 OV 生成私钥，都需要填写一些基本信息，这里我们假设如下：<br>域名，也称为 Common Name，因为特殊的证书不一定是域名：example.com</p>
<ul>
<li>组织或公司名字（Organization）：Example, Inc.</li>
<li>部门（Department）：可以不填写，这里我们写 Web Security</li>
<li>城市（City）：Beijing</li>
<li>省份（State / Province）：Beijing</li>
<li>国家（Country）：CN</li>
<li>加密强度：2048 位，如果你的机器性能强劲，也可以选择 4096 位</li>
</ul>
<p>按照以上信息，使用 OpenSSL 生成 key 和 csr 的命令如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">openssl req -new -newkey rsa:2048 -sha256 -nodes -out example_com.csr -keyout example_com.key -subj &quot;/C=CN/ST=Beijing/L=Beijing/O=Example Inc./OU=Web Security/CN=example.com&quot;</div></pre></td></tr></table></figure></p>
<p>PS：如果是泛域名证书，则应该填写 <code>*.example.com</code><br>你可以在系统的任何地方运行这个命令，会自动在当前目录生成 example_com.csr 和 example_com.key 这两个文件<br>接下来你可以查看一下 example_com.csr，得到类似这么一长串的文字<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">-----BEGIN CERTIFICATE REQUEST-----</div><div class="line">MIICujCCAaICAQAwdTELMAkGA1UEBhMCQ04xEDAOBgNVBAgTB0JlaWppbmcxEDAO  </div><div class="line">BgNVBAcTB0JlaWppbmcxFTATBgNVBAoTDEV4YW1wbGUgSW5jLjEVMBMGA1UECxMM  </div><div class="line">V2ViIFNlY3VyaXR5MRQwEgYDVQQDEwtleGFtcGxlLmNvbTCCASIwDQYJKoZIhvcN  </div><div class="line">AQEBBQADggEPADCCAQoCggEBAPME+nvVCdGN9VWn+vp7JkMoOdpOurYMPvclIbsI  </div><div class="line">iD7mGN982Ocl22O9wCV/4tL6DpTcXfNX+eWd7CNEKT4i+JYGqllqP3/CojhkemiY  </div><div class="line">SF3jwncvP6VoST/HsZeMyNB71XwYnxFCGqSyE3QjxmQ9ae38H2LIpCllfd1l7iVp  </div><div class="line">AX4i2+HvGTHFzb0XnmMLzq4HyVuEIMoYwiZX8hq+kwEAhKpBdfawkOcIRkbOlFew  </div><div class="line">SEjLyHY+nruXutmQx1d7lzZCxut5Sm5At9al0bf5FOaaJylTEwNEpFkP3L29GtoU  </div><div class="line">qg1t9Q8WufIfK9vXqQqwg8J1muK7kksnbYcoPnNgPx36kZsCAwEAAaAAMA0GCSqG  </div><div class="line">SIb3DQEBBQUAA4IBAQCHgIuhpcgrsNwDuW6731/DeVwq2x3ZRqRBuj9/M8oONQen  </div><div class="line">1QIacBifEMr+Ma+C+wIpt3bHvtXEF8cCAJAR9sQ4Svy7M0w25DwrwaWIjxcf/J8U  </div><div class="line">audL/029CkAuewFCdBILTRAAeDqxsAsUyiBIGTIT+uqi+EpGG4OlyKK/MF13FxDj  </div><div class="line">/oKyrSJDtp1Xr9R7iqGCs/Zl5qWmDaLN7/qxBK6vX2R/HLhOK0aKi1ZQ4cZeP7Mr</div><div class="line">8EzjDIAko87Nb/aIsFyKrt6Ze3jOF0/vnnpw7pMvhq+folWdTVXddjd9Dpr2x1nc  </div><div class="line">y5hnop4k6kVRXDjQ4OTduQq4P+SzU4hb41GIQEz4  </div><div class="line">-----END CERTIFICATE REQUEST-----</div></pre></td></tr></table></figure></p>
<p>这个 CSR 文件就是你需要提交给 SSL 认证机构的，当你的域名或组织通过验证后，认证机构就会颁发给你一个 example_com.crt</p>
<p>而 example_com.key 是需要用在 Nginx 配置里和 example_com.crt 配合使用的，需要好好保管，千万别泄露给任何第三方</p>
<h3 id="Nginx-配置-HTTPS-网站以及增加安全的配置"><a href="#Nginx-配置-HTTPS-网站以及增加安全的配置" class="headerlink" title="Nginx 配置 HTTPS 网站以及增加安全的配置"></a>Nginx 配置 HTTPS 网站以及增加安全的配置</h3><p>你需要提交 CSR 文件给第三方 SSL 认证机构，通过认证后，他们会颁发给你一个 CRT 文件，我们命名为 example_com.crt<br>同时，为了统一，你可以把这三个文件都移动到 /etc/ssl/private/ 目录。<br>然后可以修改 Nginx 配置文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">server &#123;  </div><div class="line">    listen 80;</div><div class="line">    listen [::]:80 ssl ipv6only=on; </div><div class="line">    listen 443 ssl;</div><div class="line">    listen [::]:443 ssl ipv6only=on;</div><div class="line">    server_name example.com;</div><div class="line"></div><div class="line">    ssl on;</div><div class="line">    ssl_certificate /etc/ssl/private/example_com.crt;</div><div class="line">    ssl_certificate_key /etc/ssl/private/example_com.key;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>检测配置文件没问题后重新读取 Nginx 即可<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">nginx -t &amp;&amp; nginx -s reload</div></pre></td></tr></table></figure></p>
<p>但是这么做并不安全，默认是 SHA-1 形式，而现在主流的方案应该都避免 SHA-1，为了确保更强的安全性，我们可以采取迪菲－赫尔曼密钥交换</p>
<p>首先，进入 /etc/ssl/certs 目录并生成一个 dhparam.pem<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cd /etc/ssl/certs  </div><div class="line">openssl dhparam -out dhparam.pem 2048 # 如果你的机器性能足够强大，可以用 4096 位加密</div></pre></td></tr></table></figure></p>
<p>生成完毕后，在 Nginx 的 SSL 配置后面加入<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">ssl_prefer_server_ciphers on;</div><div class="line">ssl_dhparam /etc/ssl/certs/dhparam.pem;</div><div class="line">ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</div><div class="line">ssl_ciphers &quot;EECDH+ECDSA+AESGCM EECDH+aRSA+AESGCM EECDH+ECDSA+SHA384 EECDH+ECDSA+SHA256 EECDH+aRSA+SHA384 EECDH+aRSA+SHA256 EECDH+aRSA+RC4 EECDH EDH+aRSA !aNULL !eNULL !LOW !3DES !MD5 !EXP !PSK !SRP !DSS !RC4&quot;;</div><div class="line">keepalive_timeout 70;</div><div class="line">ssl_session_cache shared:SSL:10m;</div><div class="line">ssl_session_timeout 10m;</div></pre></td></tr></table></figure></p>
<p>同时，如果是全站 HTTPS 并且不考虑 HTTP 的话，可以加入 HSTS 告诉你的浏览器本网站全站加密，并且强制用 HTTPS 访问<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">add_header Strict-Transport-Security max-age=63072000;</div><div class="line">add_header X-Frame-Options DENY;</div><div class="line">add_header X-Content-Type-Options nosniff;</div></pre></td></tr></table></figure></p>
<p>同时也可以单独开一个 Nginx 配置，把 HTTP 的访问请求都用 301 跳转到 HTTPS<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">server &#123;  </div><div class="line">        listen 80;</div><div class="line">        listen [::]:80 ipv6only=on;</div><div class="line">        server_name     example.com;</div><div class="line">        return 301 https://example.com$request_uri;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="可靠的第三方-SSL-签发机构"><a href="#可靠的第三方-SSL-签发机构" class="headerlink" title="可靠的第三方 SSL 签发机构"></a>可靠的第三方 SSL 签发机构</h3><p>众所周知，前段时间某 NIC 机构爆出过针对 Google 域名的证书签发的丑闻，所以可见选择一家靠谱的第三方 SSL 签发机构是多么的重要。</p>
<p>目前一般市面上针对中小站长和企业的 SSL 证书颁发机构有：</p>
<p><a href="https://www.startssl.com/" target="_blank" rel="external">StartSSL</a></p>
<p><a href="https://www.comodo.com/" target="_blank" rel="external">Comodo</a> / 子品牌 <a href="https://www.positivessl.com/" target="_blank" rel="external">Positive SSL</a></p>
<p><a href="https://www.globalsign.com/en/" target="_blank" rel="external">GlobalSign</a> / 子品牌<a href="https://www.alphassl.com/" target="_blank" rel="external">AlphaSSL</a></p>
<p><a href="https://www.geotrust.com/" target="_blank" rel="external">GeoTrust</a> / 子品牌 <a href="https://www.rapidssl.com/" target="_blank" rel="external">RapidSSL</a></p>
<p>其中 Postivie SSL、AlphaSSL、RapidSSL 等都是子品牌，一般都是三级四级证书，所以你会需要增加 CA 证书链到你的 CRT 文件里。</p>
<p>以 Comodo Positive SSL 为例，需要串联 CA 证书，假设你的域名是 example.com</p>
<p>那么，串联的命令是<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cat example_com.crt COMODORSADomainValidationSecureServerCA.crt COMODORSAAddTrustCA.crt AddTrustExternalCARoot.crt &gt; example_com.signed.crt</div></pre></td></tr></table></figure></p>
<p>在 Nginx 配置里使用 example_com.signed.crt 即可</p>
<p>如果是一般常见的 AplhaSSL 泛域名证书，他们是不会发给你 CA 证书链的，那么在你的 CRT 文件后面需要加入 AlphaSSL 的 CA 证书链</p>
<p><a href="https://www.alphassl.com/support/install-root-certificate.html" target="_blank" rel="external">AlphaSSL Intermediate CA</a></p>
<hr>
<p><strong> <a href="https://www.digitalocean.com/?refcode=9e4ab85e22ec" target="_blank" rel="external">DigitalOcean的VPS，稳定、便宜，用于搭建自己的站点和梯子，现在注册即得10$,免费玩2个月</a> </strong></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/02/04/how-to-properly-configure-nginx-php.html" itemprop="url">
                  如何正确配置Nginx+PHP（转载）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-02-04T16:33:07+08:00" content="2016-02-04">
              2016-02-04
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Nginx/" itemprop="url" rel="index">
                    <span itemprop="name">Nginx</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/02/04/how-to-properly-configure-nginx-php.html#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/02/04/how-to-properly-configure-nginx-php.html" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/02/04/how-to-properly-configure-nginx-php.html" class="leancloud_visitors" data-flag-title="如何正确配置Nginx+PHP（转载）">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<p>对很多人而言，配置Nginx+PHP无外乎就是搜索一篇教程，然后拷贝粘贴。听上去似乎也没什么问题，可惜实际上网络上很多资料本身年久失修，漏洞百出，如果大家不求甚解，一味的拷贝粘贴，早晚有一天会为此付出代价。</p>
<p>假设我们用PHP实现了一个前端控制器，或者直白点说就是统一入口：把PHP请求都发送到同一个文件上，然后在此文件里通过解析<code>REQUEST_URI</code>实现路由。</p>
<p>此时很多教程会教大家这样配置Nginx+PHP<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">server &#123;</div><div class="line">    listen 80;</div><div class="line">    server_name foo.com;</div><div class="line"></div><div class="line">    root /path;</div><div class="line"></div><div class="line">    location / &#123;</div><div class="line">        index index.html index.htm index.php;</div><div class="line"></div><div class="line">        if (!-e $request_filename) &#123;</div><div class="line">            rewrite . /index.php last;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    location ~ \.php$ &#123;</div><div class="line">        include fastcgi_params;</div><div class="line">        fastcgi_param SCRIPT_FILENAME /path$fastcgi_script_name;</div><div class="line">        fastcgi_pass 127.0.0.1:9000;</div><div class="line">        fastcgi_index index.php;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这里面有很多错误，或者说至少是坏味道的地方，大家看看能发现几个。</p>
<p>我们有必要先了解一下Nginx配置文件里指令的继承关系：Nginx配置文件分为好多块，常见的从外到内依次是<code>http</code>、<code>server</code>、<code>location</code>等等，缺省的继承关系是从外到内，也就是说内层块会自动获取外层块的值作为缺省值（有例外，详见参考）。</p>
<p>参考：<a href="http://blog.martinfjordvald.com/2012/08/understanding-the-nginx-configuration-inheritance-model/" target="_blank" rel="external">UNDERSTANDING THE NGINX CONFIGURATION INHERITANCE MODEL</a></p>
<p>让我们先从<a href="http://nginx.org/en/docs/http/ngx_http_index_module.html#index" target="_blank" rel="external">index</a>」指令入手吧，在问题配置中它是在[location]中定义的<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">location / &#123;</div><div class="line">    index index.html index.htm index.php;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>一旦未来需要加入新的<code>[location]</code>，必然会出现重复定义的<code>index</code>指令，这是因为多个<code>location</code>是平级的关系，不存在继承，此时应该在<code>server</code>里定义<code>index</code>，借助继承关系，<code>index</code>指令在所有的<code>location</code>中都能生效。</p>
<p>参考：<a href="http://wiki.nginx.org/Pitfalls" target="_blank" rel="external">Nginx Pitfalls</a></p>
<p>接下来看看「<a href="http://nginx.org/en/docs/http/ngx_http_rewrite_module.html#if" target="_blank" rel="external">if</a>」指令，说它是大家误解最深的Nginx指令毫不为过：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">if (!-e $request_filename) &#123;</div><div class="line">    rewrite . /index.php last;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>很多人喜欢用「<a href="http://nginx.org/en/docs/http/ngx_http_rewrite_module.html#if" target="_blank" rel="external">if</a>」指令做一系列的检查，不过这实际上是<a href="http://nginx.org/en/docs/http/ngx_http_core_module.html#try_files" target="_blank" rel="external">try_files</a>」指令的职责<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">try_files $uri $uri/ /index.php;</div></pre></td></tr></table></figure></p>
<p>除此以外，初学者往往会认为<a href="http://nginx.org/en/docs/http/ngx_http_rewrite_module.html#if" target="_blank" rel="external">if</a>」指令是内核级的指令，但是实际上它是rewrite模块的一部分，加上Nginx配置实际上是声明式的，而非过程式的，所以当其和非rewrite模块的指令混用时，结果可能会非你所愿。</p>
<p>参考：<a href="http://wiki.nginx.org/IfIsEvil" target="_blank" rel="external">IfIsEvil</a> and <a href="http://agentzh.blogspot.com/2011/03/how-nginx-location-if-works.html" target="_blank" rel="external">How nginx “location if” works</a></p>
<p>下面看看「fastcgi_params」配置文件：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">include fastcgi_params;</div></pre></td></tr></table></figure></p>
<p>Nginx有两份fastcgi配置文件，分别是<code>fastcgi_params</code>和<code>fastcgi.conf</code>，它们没有太大的差异，唯一的区别是后者比前者多了一行<code>SCRIPT_FILENAME</code>的定义：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;</div></pre></td></tr></table></figure></p>
<p>注意：<code>$document_root 和 $fastcgi_script_name 之间没有 /</code>。</p>
<p>原本Nginx只有<code>fastcgi_params</code>，后来发现很多人在定义<code>SCRIPT_FILENAME</code>时使用了硬编码的方式，于是为了规范用法便引入了<code>fastcgi.conf</code>。</p>
<p>不过这样的话就产生一个疑问：为什么一定要引入一个新的配置文件，而不是修改旧的配置文件？这是因为「fastcgi_param」指令是数组型的，和普通指令相同的是：内层替换外层；和普通指令不同的是：当在同级多次使用的时候，是新增而不是替换。换句话说，如果在同级定义两次「SCRIPT_FILENAME」，那么它们都会被发送到后端，这可能会导致一些潜在的问题，为了避免此类情况，便引入了一个新的配置文件。</p>
<p>参考：<a href="http://blog.martinfjordvald.com/2013/04/nginx-config-history-fastcgi_params-versus-fastcgi-conf/" target="_blank" rel="external">FASTCGI_PARAMS VERSUS FASTCGI.CONF – NGINX CONFIG HISTORY</a></p>
<p>此外，我们还需要考虑一个安全问题：在PHP开启「cgi.fix_pathinfo」的情况下，PHP可能会把错误的文件类型当作PHP文件来解析。如果Nginx和PHP安装在同一台服务器上的话，那么最简单的解决方法是用<a href="http://nginx.org/en/docs/http/ngx_http_core_module.html#try_files" target="_blank" rel="external">try_files</a>指令做一次过滤：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">try_files $uri =404;</div></pre></td></tr></table></figure>
<p>参考：<a href="http://www.80sec.com/nginx-securit.html" target="_blank" rel="external">Nginx文件类型错误解析漏洞</a></p>
<p>依照前面的分析，给出一份改良后的版本，是不是比开始的版本清爽了很多：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">server &#123;</div><div class="line">    listen 80;</div><div class="line">    server_name foo.com;</div><div class="line"></div><div class="line">    root /path;</div><div class="line">    index index.html index.htm index.php;</div><div class="line"></div><div class="line">    location / &#123;</div><div class="line">        try_files $uri $uri/ /index.php$is_args$args;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    location ~ \.php$ &#123;</div><div class="line">        try_files $uri =404;</div><div class="line"></div><div class="line">        include fastcgi.conf;</div><div class="line">        fastcgi_pass 127.0.0.1:9000;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>实际上还有一些瑕疵，主要是<a href="http://nginx.org/en/docs/http/ngx_http_core_module.html#try_files" target="_blank" rel="external">try_files</a>和<a href="http://wiki.nginx.org/HttpFastcgiModule#fastcgi_split_path_info" target="_blank" rel="external">fastcgi_split_path_info</a>不够兼容，虽然能够解决，但方案比较丑陋，具体就不多说了，有兴趣的可以参考<a href="http://trac.nginx.org/nginx/ticket/321" target="_blank" rel="external">问题描述</a>。</p>
<p>补充：因为<code>location</code>已经做了限定，所以<code>fastcgi_index</code>其实也没有必要。</p>
<p>希望大家以后不要再拷贝粘贴了，如果实在改不了，那么就请拷贝粘贴本文。</p>
<hr>
<p><strong> <a href="https://www.digitalocean.com/?refcode=9e4ab85e22ec" target="_blank" rel="external">DigitalOcean的VPS，稳定、便宜，用于搭建自己的站点和梯子，现在注册即得10$,免费玩2个月</a> </strong></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="//schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://czero000.github.io/images/blog/avatar.jpg"
               alt="C.c" />
          <p class="site-author-name" itemprop="name">C.c</p>
          <p class="site-description motion-element" itemprop="description">Love Linux ♥ Love Python. 猴赛雷</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">104</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">18</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">76</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        
          <div class="cc-license motion-element" itemprop="license">
            <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" target="_blank">
              <img src="/images/cc-by-nc-sa.svg" alt="Creative Commons" />
            </a>
          </div>
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2015 - 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">C.c</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.2"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.2"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"czero000"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    <script src="/vendors/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  






  
  

  

  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("Rl3Nh6z96ldNfoGXOaUqBT47-gzGzoHsz", "NmOEHbcsySJxEnVKuV23xr49");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>



</body>
</html>
