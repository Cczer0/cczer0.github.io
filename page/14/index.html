<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Zero&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Love Linux ♥ Love Python. 猴赛雷">
<meta property="og:type" content="website">
<meta property="og:title" content="Zero's Blog">
<meta property="og:url" content="http://czero000.github.io/page/14/index.html">
<meta property="og:site_name" content="Zero's Blog">
<meta property="og:description" content="Love Linux ♥ Love Python. 猴赛雷">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Zero's Blog">
<meta name="twitter:description" content="Love Linux ♥ Love Python. 猴赛雷">
  
    <link rel="alternate" href="/atom.xml" title="Zero&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Zero&#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">点滴分享 多彩生活</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://czero000.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-rsync-inotify-backup" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/21/rsync-inotify-backup.html" class="article-date">
  <time datetime="2015-12-21T15:02:15.000Z" itemprop="datePublished">2015-12-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/System/">System</a>►<a class="article-category-link" href="/categories/System/Other/">Other</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/21/rsync-inotify-backup.html">rsync+inotify实现实时备份</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <a id="more"></a>
<h3 id="rsync的优点和缺点"><a href="#rsync的优点和缺点" class="headerlink" title="rsync的优点和缺点"></a>rsync的优点和缺点</h3><p>  与传统的cp、tar备份方式相比，rsync具有安全性高、备份迅速、支持赠礼备份等优点，通过rsync可以解决实时性能不高的数据备份需求，例如定期的备份文件到异地服务器，对本地磁盘做数据镜像等。<br>  随着对数据安全性和可靠性的更高要求，rsync也逐渐暴露出不足。首先rsync同步数据时，需要扫描所有文件后进行比对，进行差量传输。如果数据达到百万或者是千万的量级，扫描文件将耗费大量事件，而发生变化的往往是其中极少的一部分，这是非常低效的方式，其次rsync不能实时去监测、同步数据，虽然可以通过守护进程方式或者是crontab等方式进行触发，但是动作会有一定的时间差，这会导致两地数据可能会出现不一致，无法保证数据或者应用的安全性。</p>
<h3 id="inotify简介"><a href="#inotify简介" class="headerlink" title="inotify简介"></a>inotify简介</h3><p>  Inotify 是一种强大的、细粒度的、异步的文件系统事件监控机制，linux内核从2.6.13起，加入了Inotify支持，通过Inotify可以监控文件系统中添加、删除，修改、移动等各种细微事件，利用这个内核接口，第三方软件就可以监控文件系统下文件的各种变化情况，而inotify-tools就是这样的一个第三方软件。rsync可以实现触发式的文件同步，但是通过crontab守护进程方式进行触发，同步的数据和实际数据会有差异，而inotify可以监控文件系统的各种变化，当文件有任何变动时，就触发rsync同步，这样刚好解决了同步数据的实时性问题。</p>
<h3 id="安装inotfiy工具inotifytools"><a href="#安装inotfiy工具inotifytools" class="headerlink" title="安装inotfiy工具inotifytools"></a>安装inotfiy工具inotifytools</h3><p>  由于inotofy需要Linux内核的支持，在安装inotify-tools前要先确认系统内核师傅支持，如果Linux内核低于2.6.13版本，就需要重启编译内核加入inotify的支持，如何知道你的Linux内核是否支持Inotify机制呢，执行下面命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">grep INOTIFY_USER /boot/config-$(uname -r)</div><div class="line">CONFIG_INOTIFY_USER=y</div><div class="line">如果输出“CONFIG_INOTIFY_USER=y”，那么就可以享受Inotify之旅了。</div></pre></td></tr></table></figure></p>
<h4 id="软件下载地址"><a href="#软件下载地址" class="headerlink" title="软件下载地址"></a>软件下载地址</h4><p>官方地址：<a href="http://github.com/rvoicilas/inotify-tools/wiki" target="_blank" rel="external">http://github.com/rvoicilas/inotify-tools/wiki</a></p>
<h4 id="下载安装软件包"><a href="#下载安装软件包" class="headerlink" title="下载安装软件包"></a>下载安装软件包</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">wget --no-check-certificate http://github.com/downloads/rvoicilas/inotify-tools/inotify-tools-3.14.tar.gz</div><div class="line">tar -zxf inotify-tools-3.14.tar.gz </div><div class="line">cd inotify-tools-3.14</div><div class="line">./configure --prefix=/usr/local/inotify</div><div class="line">make &amp;&amp; make install</div></pre></td></tr></table></figure>
<h3 id="配置rsync、inotify"><a href="#配置rsync、inotify" class="headerlink" title="配置rsync、inotify"></a>配置rsync、inotify</h3><h4 id="系统环境"><a href="#系统环境" class="headerlink" title="系统环境"></a>系统环境</h4><p>CentOS_5.4_i386<br>更新服务器：172.16.6.100<br>目标服务器：172.16.6.98</p>
<h4 id="配置目标服务器"><a href="#配置目标服务器" class="headerlink" title="配置目标服务器"></a>配置目标服务器</h4><h5 id="检查rsync是否安装"><a href="#检查rsync是否安装" class="headerlink" title="检查rsync是否安装"></a>检查rsync是否安装</h5><p>如果没有安装可以源码安装或者<code>yum -y install rsync</code>，rsync3.0相对与2.0有很多的改进，3.0是边对边边同步，2.0是完全对比之后在同步。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">rpm -qa rsync</div><div class="line">rsync-2.6.8-3.1</div></pre></td></tr></table></figure></p>
<h5 id="定义rsync配置文件-etc-rsyncd-conf"><a href="#定义rsync配置文件-etc-rsyncd-conf" class="headerlink" title="定义rsync配置文件/etc/rsyncd.conf"></a>定义rsync配置文件/etc/rsyncd.conf</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">cat &gt;&gt; /etc/rsyncd.conf &lt;uid=nobody </div><div class="line">gid=nobody</div><div class="line">use chroot = no </div><div class="line">max connections = 100</div><div class="line">timeout = 600</div><div class="line">pid file = /var/run/rsyncd.pid</div><div class="line">lock file = /var/run/rsyncd.lock</div><div class="line">log file = /var/log/rsyncd.log</div><div class="line">secrets file = /etc/rsyncd.passwd</div><div class="line">hosts allow = 172.16.6.100</div><div class="line">[website]</div><div class="line">path = /data/website/</div><div class="line">comment = Web Site</div><div class="line">read only = no</div><div class="line">ignore errors</div><div class="line">list = no</div><div class="line">auth users = website</div><div class="line">EOF</div></pre></td></tr></table></figure>
<h5 id="配置rsync密码文件，修改密码文件权限，是其他用户无权查看"><a href="#配置rsync密码文件，修改密码文件权限，是其他用户无权查看" class="headerlink" title="配置rsync密码文件，修改密码文件权限，是其他用户无权查看"></a>配置rsync密码文件，修改密码文件权限，是其他用户无权查看</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">cat &gt;&gt; /etc/rsyncd.passwd &lt;&lt; EOF</div><div class="line">website:website</div><div class="line">EOF</div><div class="line">chmod 600 /etc/rsyncd.passwd</div></pre></td></tr></table></figure>
<h5 id="启动服务"><a href="#启动服务" class="headerlink" title="启动服务"></a>启动服务</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">/usr/bin/rsync --daemon --config=/etc/rsyncd.conf </div><div class="line">lsof -i:873</div><div class="line">COMMAND   PID USER   FD   TYPE     DEVICE SIZE NODE NAME</div><div class="line">rsync   25469 root    3u  IPv6 1038838496       TCP *:rsync (LISTEN)</div><div class="line">rsync   25469 root    5u  IPv4 1038838497       TCP *:rsync (LISTEN)</div></pre></td></tr></table></figure>
<h5 id="客户端测试，同步代码"><a href="#客户端测试，同步代码" class="headerlink" title="客户端测试，同步代码"></a>客户端测试，同步代码</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">rsync -vzrtopg --progress website@172.16.6.98::website --password-file=/etc/rsync.passwd /data/website/</div><div class="line">sent 26731 bytes  received 6831971 bytes  4572468.00 bytes/sec</div><div class="line">total size is 19027624  speedup is 2.77</div></pre></td></tr></table></figure>
<h5 id="同步脚本"><a href="#同步脚本" class="headerlink" title="同步脚本"></a>同步脚本</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">inotifywait=&apos;/usr/local/inotify/bin/inotifywait&apos;</div><div class="line">LOCAL=172.16.6.98</div><div class="line">SRC=/data/website/</div><div class="line">USER=website</div><div class="line">COMMAND=/usr/bin/rsync </div><div class="line">Option=&quot;-vzrtopg --progress --delete&quot; </div><div class="line">Module=website</div><div class="line">PASSFILE=/etc/rsync.passwd</div><div class="line">$inotifywait -mrq --timefmt &apos;%y-%m-%d %H:%M&apos; --format &apos;%T %w%f %e&apos; --event modify,delete,create,attrib $SRC | while read date time files</div><div class="line">do</div><div class="line">        $COMMAND $Option --password-file=$PASSFILE $SRC $USER@$LOCAL::$Module</div><div class="line">        echo &quot;$files was rsyncd&quot; &gt;&gt; /var/log/rsync.log 2&gt;&amp;1</div><div class="line">done</div></pre></td></tr></table></figure>
<p>把脚本使用nohup放入后台执行nohup ./rsync.sh &amp;<br>这样将更新的文件提交到更新源服务器上，就可以通过Inotify和rsync的配合批量的将更新文件同步到所有服务器中。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://czero000.github.io/2015/12/21/rsync-inotify-backup.html" data-id="civlqiu7d004nc15mk3amg8ea" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/inotify/">inotify</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/rsync/">rsync</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-update-openssl" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/21/update-openssl.html" class="article-date">
  <time datetime="2015-12-21T15:00:58.000Z" itemprop="datePublished">2015-12-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/System/">System</a>►<a class="article-category-link" href="/categories/System/Other/">Other</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/21/update-openssl.html">Openssl升级</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <a id="more"></a>
<h4 id="查看当前版本信息"><a href="#查看当前版本信息" class="headerlink" title="查看当前版本信息"></a>查看当前版本信息</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">openssl version</div><div class="line">OpenSSL 0.9.8e-fips-rhel5 01 Jul 2008</div></pre></td></tr></table></figure>
<h4 id="安装新版本openssl"><a href="#安装新版本openssl" class="headerlink" title="安装新版本openssl"></a>安装新版本openssl</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">[root@Charlie ~]# wget http://www.openssl.org/source/openssl-1.0.1g.tar.gz -O /usr/local/src/openssl-1.0.1g.tar.gz</div><div class="line">[root@Charlie ~]# cd /usr/local/src/</div><div class="line">[root@Charlie src]# cd openssl-1.0.1g</div><div class="line">[root@Charlie openssl-1.0.1g]# ./config shared zlib</div><div class="line">[root@Charlie openssl-1.0.1g]# make &amp;&amp; make install</div><div class="line">[root@Charlie openssl-1.0.1g]# mv /usr/bin/openssl /usr/bin/openssl.bak</div><div class="line">[root@Charlie openssl-1.0.1g]# mv /usr/include/openssl /usr/include/openssl.bak</div><div class="line">[root@Charlie openssl-1.0.1g]# ln -s /usr/local/ssl/bin/openssl /usr/bin/openssl</div><div class="line">[root@Charlie openssl-1.0.1g]# ln -s /usr/local/ssl/include/openssl /usr/include/openssl</div></pre></td></tr></table></figure>
<h4 id="配置库文件搜索路径"><a href="#配置库文件搜索路径" class="headerlink" title="配置库文件搜索路径"></a>配置库文件搜索路径</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@Charlie openssl-1.0.1g]# echo &quot;/usr/local/ssl/lib&quot; &gt;&gt; /etc/ld.so.conf</div><div class="line">[root@Charlie openssl-1.0.1g]# ldconfig -v</div></pre></td></tr></table></figure>
<h4 id="验证升级"><a href="#验证升级" class="headerlink" title="验证升级"></a>验证升级</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[root@Charlie openssl-1.0.1g]# openssl version -a</div><div class="line">OpenSSL 1.0.1g 7 Apr 2014</div><div class="line">built on: Tue Apr 15 15:47:31 CST 2014</div><div class="line">platform: linux-elf</div><div class="line">options:  bn(64,32) rc4(8x,mmx) des(ptr,risc1,16,long) idea(int) blowfish(idx)</div><div class="line">compiler: gcc -fPIC -DOPENSSL_PIC -DZLIB -DOPENSSL_THREADS -D_REENTRANT -DDSO_DLFCN -DHAVE_DLFCN_H -Wa,--noexecstack -DL_ENDIAN -DTERMIO -O3 -fomit-frame-pointer -Wall -DOPENSSL_BN_ASM_PART_WORDS -DOPENSSL_IA32_SSE2 -DOPENSSL_BN_ASM_MONT -DOPENSSL_BN_ASM_GF2m -DSHA1_ASM -DSHA256_ASM -DSHA512_ASM -DMD5_ASM -DRMD160_ASM -DAES_ASM -DVPAES_ASM -DWHIRLPOOL_ASM -DGHASH_ASM</div><div class="line">OPENSSLDIR: &quot;/usr/local/ssl&quot;</div></pre></td></tr></table></figure>
<p>在升级了openssl后，我们还要升级一下SSH<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@Charlie openssl-1.0.1g]# ssh -V</div><div class="line">OpenSSH_4.3p2, OpenSSL 0.9.8e-fips-rhel5 01 Jul 2008</div></pre></td></tr></table></figure></p>
<h4 id="安装openssh"><a href="#安装openssh" class="headerlink" title="安装openssh"></a>安装openssh</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[root@Charlie src]# wget http://ftp.jaist.ac.jp/pub/OpenBSD/OpenSSH/portable/openssh-6.6p1.tar.gz</div><div class="line">[root@Charlie src]# tar -zxf openssh-6.6p1.tar.gz</div><div class="line">[root@Charlie src]# cd openssh-6.6p1</div><div class="line">[root@Charlie openssh-6.6p1]# ./configure  --prefix=/usr --sysconfdir=/etc/ssh --with-zlib --with-pam  --with-ssl-dir=/usr/local/ssl --with-md5-passwords --mandir=/usr/share/man</div><div class="line">[root@Charlie openssh-6.6p1]# make &amp;&amp; make install </div><div class="line">[root@Charlie openssh-6.6p1]# ssh -V</div><div class="line">OpenSSH_6.6p1, OpenSSL 1.0.1g 7 Apr 2014</div></pre></td></tr></table></figure>
<h4 id="TroubleShooting"><a href="#TroubleShooting" class="headerlink" title="TroubleShooting"></a>TroubleShooting</h4><p>报错：<code>configure: error: PAM headers not found</code><br>解决：<code>yum install -y pam-devel</code></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://czero000.github.io/2015/12/21/update-openssl.html" data-id="civlqiu75004dc15mzz3nkqdy" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/openssl/">openssl</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-introduce-megacli-command" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/21/introduce-megacli-command.html" class="article-date">
  <time datetime="2015-12-21T14:58:15.000Z" itemprop="datePublished">2015-12-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/System/">System</a>►<a class="article-category-link" href="/categories/System/Command/">Command</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/21/introduce-megacli-command.html">Megacli命令指南</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>MegaCli 是一款管理维护硬件RAID软件，可以通过它来了解当前 raid 卡的所有信息，包括 raid卡的型号，raid 的阵列类型，raid 上各磁盘状态，等等。通常，我们对硬盘当前的状态不太好确定，一般通过机房人员巡检来完成，有没有通过软件的方式来检查确定这个问题呢。MegaCli就可以做到，一般通过 MegaCli 的 Media Error Count: 1 Other Error Count: 0 这两个数值来确定阵列中磁盘是否有问题；Medai Error Count 表示磁盘可能错误，可能是磁盘有坏道，这个值不为0值得注意，数值越大，危险系数越高，Other Error Count 表示磁盘可能存在松动，可能需要重新再插入。MegaCli 可以对阵列中所有的磁盘进行检测，我们可以通过脚本的方式来检测相关参数，从而通知管理人员。</p>
<p>下载 MegCli,目前针对公司DB数据库是IBM的服务器，直接从IBM官方下载，如果其它服务器的，使用各官方下载或者 LSI 网站上进行相关下载。一般来说，是通用的。这个包适用 32 /64 位操作系统平台</p>
<p>下载地址：ftp://download2.boulder.ibm.com/ecc/sar/CMA/XSA/ibm_utl_sraidmr_megacli-8.00.48_linux_32-64.zip</p>
<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">unzip ibm_utl_sraidmr_megacli-8.00.48_linux_32-64.zip</div><div class="line">cd linux</div><div class="line">rpm -ivh Lib_Utils-1.00-09.noarch.rpm  MegaCli-8.00.48-1.i386.rpm</div></pre></td></tr></table></figure>
<h1 id="使用命令及参数"><a href="#使用命令及参数" class="headerlink" title="使用命令及参数"></a>使用命令及参数</h1><h2 id="常用命令使用"><a href="#常用命令使用" class="headerlink" title="常用命令使用"></a>常用命令使用</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -LDInfo -Lall -aALL [查raid级别]</div><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -AdpAllInfo -aALL [查raid卡信息]</div><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -PDList -aALL [查看硬盘信息]</div><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -AdpBbuCmd -aAll [查看电池信息]</div><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -FwTermLog -Dsply -aALL [查看raid卡日志]</div><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -adpCount [显示适配器个数]</div><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -AdpGetTime –aALL [显示适配器时间]</div><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -AdpAllInfo -aAll [显示所有适配器信息]</div><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -LDInfo -LALL -aAll [显示所有逻辑磁盘组信息]</div><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -PDList -aAll [显示所有的物理信息]、</div><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -PdLocate -start -physdrv[252:2] -a0  [点亮指定硬盘（定位）]</div><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -CfgForeign -Clear -a0  [清除Foreign状态]</div><div class="line"></div><div class="line"></div><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -AdpBbuCmd -GetBbuStatus -aALL |grep &apos;ChargerStatus&apos; [查看充电状态]</div><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -AdpBbuCmd -GetBbuStatus -aALL[显示BBU状态信息]</div><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -AdpBbuCmd -GetBbuCapacityInfo -aALL[显示BBU容量信息]</div><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -AdpBbuCmd -GetBbuDesignInfo -aALL [显示BBU设计参数]</div><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -AdpBbuCmd -GetBbuProperties -aALL [显示当前BBU属性]</div><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -cfgdsply -aALL [显示Raid卡型号，Raid设置，Disk相关信息]</div><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -PDList -aAll -NoLog  [查看所有硬盘的状态]</div><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -LdPdInfo -aAll -NoLog [查看所有Virtual Disk的状态]</div></pre></td></tr></table></figure>
<h2 id="磁带状态的变化，从拔盘，到插盘的过程中。"><a href="#磁带状态的变化，从拔盘，到插盘的过程中。" class="headerlink" title="磁带状态的变化，从拔盘，到插盘的过程中。"></a>磁带状态的变化，从拔盘，到插盘的过程中。</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Device |Normal|Damage|Rebuild|Normal</div><div class="line">Virtual Drive |Optimal|Degraded|Degraded|Optimal</div><div class="line">Physical Drive |Online|Failed –&gt; Unconfigured|Rebuild|Online</div></pre></td></tr></table></figure>
<h2 id="查看磁盘缓存策略"><a href="#查看磁盘缓存策略" class="headerlink" title="查看磁盘缓存策略"></a>查看磁盘缓存策略</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -LDGetProp -Cache -L0 -a0</div><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -LDGetProp -Cache -L1 -a0</div><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -LDGetProp -Cache -LALL -a0</div><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -LDGetProp -Cache -LALL -aALL</div><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -LDGetProp -DskCache -LALL -aALL</div></pre></td></tr></table></figure>
<h2 id="设置磁盘缓存策略"><a href="#设置磁盘缓存策略" class="headerlink" title="设置磁盘缓存策略"></a>设置磁盘缓存策略</h2><p>缓存策略解释</p>
<ul>
<li>WT (Write through</li>
<li>WB (Write back)</li>
<li>NORA (No read ahead)</li>
<li>RA (Read ahead)</li>
<li>ADRA (Adaptive read ahead)</li>
<li>Cached</li>
<li>Direct</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -LDSetProp WT|WB|NORA|RA|ADRA -L0 -a0</div><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -LDSetProp -Cached|-Direct -L0 -a0 enable / disable disk cache</div><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -LDSetProp -EnDskCache|-DisDskCache -L0 -a0</div></pre></td></tr></table></figure>
<h2 id="Raid-管理"><a href="#Raid-管理" class="headerlink" title="Raid 管理"></a>Raid 管理</h2><h3 id="RAID-Level对应关系"><a href="#RAID-Level对应关系" class="headerlink" title="RAID Level对应关系"></a>RAID Level对应关系</h3><table>
<thead>
<tr>
<th>Raid信息</th>
<th>Raid级别</th>
</tr>
</thead>
<tbody>
<tr>
<td>RAID Level : Primary-1, Secondary-0, RAID Level Qualifier-0</td>
<td>RAID 1</td>
</tr>
<tr>
<td>RAID Level : Primary-0, Secondary-0, RAID Level Qualifier-0</td>
<td>RAID 0</td>
</tr>
<tr>
<td>RAID Level : Primary-5, Secondary-0, RAID Level Qualifier-3</td>
<td>RAID 5</td>
</tr>
<tr>
<td>RAID Level : Primary-1, Secondary-3, RAID Level Qualifier-0</td>
<td>RAID 10</td>
</tr>
</tbody>
</table>
<h3 id="创建一个-raid5-阵列，由物理盘-2-3-4-构成，该阵列的热备盘是物理盘-5"><a href="#创建一个-raid5-阵列，由物理盘-2-3-4-构成，该阵列的热备盘是物理盘-5" class="headerlink" title="创建一个 raid5 阵列，由物理盘 2,3,4 构成，该阵列的热备盘是物理盘 5"></a>创建一个 raid5 阵列，由物理盘 2,3,4 构成，该阵列的热备盘是物理盘 5</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -CfgLdAdd -r5 [1:2,1:3,1:4] WB Direct -Hsp[1:5] -a0</div></pre></td></tr></table></figure>
<h3 id="创建阵列，不指定热备"><a href="#创建阵列，不指定热备" class="headerlink" title="创建阵列，不指定热备"></a>创建阵列，不指定热备</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -CfgLdAdd -r5 [1:2,1:3,1:4] WB Direct -a0</div></pre></td></tr></table></figure>
<h3 id="查看RAID阵列中掉线的盘"><a href="#查看RAID阵列中掉线的盘" class="headerlink" title="查看RAID阵列中掉线的盘"></a>查看RAID阵列中掉线的盘</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -pdgetmissing -a0</div></pre></td></tr></table></figure>
<h3 id="删除阵列"><a href="#删除阵列" class="headerlink" title="删除阵列"></a>删除阵列</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -CfgLdDel -L1 -a0</div></pre></td></tr></table></figure>
<h3 id="替换坏掉的模块"><a href="#替换坏掉的模块" class="headerlink" title="替换坏掉的模块"></a>替换坏掉的模块</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -pdreplacemissing -physdrv[12:10] -Array5 -row0 -a0</div></pre></td></tr></table></figure>
<h3 id="在线添加磁盘"><a href="#在线添加磁盘" class="headerlink" title="在线添加磁盘"></a>在线添加磁盘</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -LDRecon -Start -r5 -Add -PhysDrv[1:4] -L1 -a0</div></pre></td></tr></table></figure>
<h3 id="阵列创建完后，会有一个初始化同步块的过程，可以看看其进度。"><a href="#阵列创建完后，会有一个初始化同步块的过程，可以看看其进度。" class="headerlink" title="阵列创建完后，会有一个初始化同步块的过程，可以看看其进度。"></a>阵列创建完后，会有一个初始化同步块的过程，可以看看其进度。</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -LDInit -ShowProg -LALL -aALL 或者以动态可视化文字界面显示</div><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -LDInit -ProgDsply -LALL -aALL</div></pre></td></tr></table></figure>
<h3 id="查看阵列后台初始化进度"><a href="#查看阵列后台初始化进度" class="headerlink" title="查看阵列后台初始化进度"></a>查看阵列后台初始化进度</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -LDBI -ShowProg -LALL -aALL</div></pre></td></tr></table></figure>
<p>或者以动态可视化文字界面显示<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -LDBI -ProgDsply -LALL -aALL</div></pre></td></tr></table></figure></p>
<h3 id="指定第-5-块盘作为全局热备"><a href="#指定第-5-块盘作为全局热备" class="headerlink" title="指定第 5 块盘作为全局热备"></a>指定第 5 块盘作为全局热备</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -PDHSP -Set [-EnclAffinity] [-nonRevertible] -PhysDrv[1:5] -a0</div></pre></td></tr></table></figure>
<h3 id="指定为某个阵列的专用热备"><a href="#指定为某个阵列的专用热备" class="headerlink" title="指定为某个阵列的专用热备"></a>指定为某个阵列的专用热备</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -PDHSP -Set [-Dedicated [-Array1]] [-EnclAffinity] [-nonRevertible] -PhysDrv[1:5] -a0</div></pre></td></tr></table></figure>
<h3 id="删除全局热备"><a href="#删除全局热备" class="headerlink" title="删除全局热备"></a>删除全局热备</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -PDHSP -Rmv -PhysDrv[1:5] -a0</div></pre></td></tr></table></figure>
<h3 id="将某块物理盘下线-上线"><a href="#将某块物理盘下线-上线" class="headerlink" title="将某块物理盘下线/上线"></a>将某块物理盘下线/上线</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -PDOffline -PhysDrv [1:4] -a0</div><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -PDOnline -PhysDrv [1:4] -a0</div></pre></td></tr></table></figure>
<h3 id="手动开启-rebuid"><a href="#手动开启-rebuid" class="headerlink" title="手动开启 rebuid"></a>手动开启 rebuid</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -pdrbld -start -physdrv[12:10] -a0</div></pre></td></tr></table></figure>
<h3 id="关闭-rebuild"><a href="#关闭-rebuild" class="headerlink" title="关闭 rebuild"></a>关闭 rebuild</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -AdpAutoRbld -Dsbl -a0</div></pre></td></tr></table></figure>
<h3 id="设置rebuild的速率"><a href="#设置rebuild的速率" class="headerlink" title="设置rebuild的速率"></a>设置rebuild的速率</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -AdpSetProp RebuildRate -30 -a0</div></pre></td></tr></table></figure>
<h3 id="查看物理磁盘重建进度-Rebuild"><a href="#查看物理磁盘重建进度-Rebuild" class="headerlink" title="查看物理磁盘重建进度 Rebuild"></a>查看物理磁盘重建进度 Rebuild</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -PDRbld -ShowProg -PhysDrv [1:5] -a0</div></pre></td></tr></table></figure>
<p>或者以动态可视化文字界面显示<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -PDRbld -ProgDsply -PhysDrv [1:5] -a0</div></pre></td></tr></table></figure></p>
<h3 id="查看-ES"><a href="#查看-ES" class="headerlink" title="查看 ES"></a>查看 ES</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/opt/MegaRAID/MegaCli/MegaCli64 -PDList -aAll -NoLog | grep -Ei &quot;(enclosure|slot)&quot;</div></pre></td></tr></table></figure>
<h2 id="raid-电池设置相关"><a href="#raid-电池设置相关" class="headerlink" title="raid 电池设置相关"></a>raid 电池设置相关</h2><p>查看电池状态信息(Display BBU Status Information)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">MegaCli -AdpBbuCmd -GetBbuStatus -aN|-a0,1,2|-aALL</div><div class="line">MegaCli -AdpBbuCmd -GetBbuStatus -aALL</div></pre></td></tr></table></figure>
<p>查看电池容量（Display BBU Capacity Information）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">MegaCli -AdpBbuCmd -GetBbuCapacityInfo -aN|-a0,1,2|-aALL</div><div class="line">MegaCli -AdpBbuCmd -GetBbuCapacityInfo –aALL</div></pre></td></tr></table></figure>
<p>查看电池设计参数(Display BBU Design Parameters)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">MegaCli -AdpBbuCmd -GetBbuDesignInfo -aN|-a0,1,2|-aALL</div><div class="line">MegaCli -AdpBbuCmd -GetBbuDesignInfo –aALL</div></pre></td></tr></table></figure>
<p>查看电池属性（Display Current BBU Properties）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">MegaCli -AdpBbuCmd -GetBbuProperties -aN|-a0,1,2|-aALL</div><div class="line">MegaCli -AdpBbuCmd -GetBbuProperties –aALL</div></pre></td></tr></table></figure>
<p>设置电池为学习模式为循环模式（Start BBU Learning Cycle）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Description Starts the learning cycle on the BBU.</div><div class="line">No parameter is needed for this option.</div><div class="line">MegaCli -AdpBbuCmd -BbuLearn -aN|-a0,1,2|-aALL</div></pre></td></tr></table></figure>
<p>设置磁盘的缓存模式和访问方式 （Change Virtual Disk Cache and Access Parameters）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">Description Allows you to change the following virtual disk parameters:</div><div class="line">-WT (Write through), WB (Write back): Selects write policy.</div><div class="line">-NORA (No read ahead), RA (Read ahead), ADRA (Adaptive read ahead): Selects read policy.</div><div class="line">-Cached, -Direct: Selects cache policy.</div><div class="line">-RW, -RO, Blocked: Selects access policy.</div><div class="line">-EnDskCache: Enables disk cache.</div><div class="line">-DisDskCache: Disables disk cache.</div><div class="line">MegaCli -LDSetProp &#123; WT | WB|NORA |RA | ADRA|-Cached|Direct&#125; |</div><div class="line">&#123;-RW|RO|Blocked&#125; |</div><div class="line">&#123;-Name[string]&#125; |</div><div class="line">&#123;-EnDskCache|DisDskCache&#125; –Lx |</div><div class="line">-L0,1,2|-Lall -aN|-a0,1,2|-aALL</div><div class="line">MegaCli -LDSetProp WT -L0 -a0</div></pre></td></tr></table></figure>
<p>显示磁盘缓存和访问方式（Display Virtual Disk Cache and Access Parameters）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">MegaCli -LDGetProp -Cache | -Access | -Name | -DskCache -Lx|-L0,1,2|</div><div class="line">-Lall -aN|-a0,1,2|-aALL</div><div class="line">Displays the cache and access policies of the virtual disk(s):</div><div class="line">-WT (Write through), WB (Write back): Selects write policy.</div><div class="line">-NORA (No read ahead), RA (Read ahead), ADRA (Adaptive read ahead): Selects read policy.</div><div class="line">-Cache, -Cached, Direct: Displays cache policy.</div><div class="line">-Access, -RW, -RO, Blocked: Displays access policy.</div><div class="line">-DskCache: Displays physical disk cache policy.</div></pre></td></tr></table></figure>
<p>Megaraid 必知必会 使用 LSI 的 megaraid 可以对 raid 进行有效监控。别的厂商比如 HP,IBM 也有自己的 raid API</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">MegaCli -ldinfo -lall -aall 查询raid级别，磁盘数量，容量，条带大小。</div><div class="line">MegaCli -cfgdsply -aALL |grep Policy 查询控制器cache策略</div><div class="line">MegaCli -LDSetProp WB -L0 -a0 设置write back功能</div><div class="line">MegaCli -LDSetProp CachedBadBBU -L0 -a0 设置即使电池坏了还是保持WB功能</div><div class="line">MegaCli -AdpBbuCmd -BbuLearn a0 手动充电</div><div class="line">MegaCli -FwTermLog -Dsply -aALL 查询日志</div><div class="line">MegaCli -adpCount 显示适配器个数</div></pre></td></tr></table></figure>
<ul>
<li>显示所有适配器信息</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">MegaCli -AdpAllInfo -aAll</div><div class="line">Critical Disks : 0</div><div class="line">Failed Disks : 0</div></pre></td></tr></table></figure>
<ul>
<li><p>显示所有逻辑磁盘组信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">MegaCli -LDInfo -LALL -aAll</div></pre></td></tr></table></figure>
</li>
<li><p>显示所有的物理信息</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">MegaCli -PDList -aAll</div><div class="line">Media Error Count: 0</div><div class="line">Other Error Count: 0</div></pre></td></tr></table></figure>
<ul>
<li>查看充电状态</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">MegaCli -AdpBbuCmd -GetBbuStatus -aALL</div><div class="line">Learn Cycle Requested : No</div><div class="line">Fully Charged : Yes</div></pre></td></tr></table></figure>
<p>显示BBU(后备电池)状态信息： <code>MegaCli -AdpBbuCmd -GetBbuStatus -aALL</code><br>显示BBU容量信息： <code>MegaCli -AdpBbuCmd -GetBbuCapacityInfo -aALL</code><br>显示BBU设计参数： <code>MegaCli -AdpBbuCmd -GetBbuDesignInfo -aALL</code><br>显示当前BBU属性： <code>MegaCli -AdpBbuCmd -GetBbuProperties -aALL</code><br>显示Raid卡型号，Raid设置，Disk相关信息： <code>MegaCli -cfgdsply -aALL</code><br>查看Cache 策略设置： <code>MegaCli -cfgdsply -aALL |grep -i Policy
Current Cache Policy: WriteBack, ReadAheadNone, Direct, Write Cache OK if Bad BBU</code><br>查看充电进度百分比： <code>MegaCli -AdpBbuCmd -GetBbuStatus -aALL</code></p>
<h4 id="通过脚本检测RAID-磁盘状态"><a href="#通过脚本检测RAID-磁盘状态" class="headerlink" title="通过脚本检测RAID 磁盘状态"></a>通过脚本检测RAID 磁盘状态</h4><p>Linux下脚本<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">#check raid disk status</div><div class="line">MEGACLI=&quot;/opt/MegaRAID/MegaCli/MegaCli64 &quot;</div><div class="line">$MEGACLI -pdlist -aALL  | grep &quot;Firmware state&quot; | awk -F : &apos;&#123;print $2&#125;&apos; | awk -F , &apos;&#123;print $1&#125;&apos; &gt;/tmp/fireware.log</div><div class="line">$MEGACLI -pdlist -aALL  | grep -E &quot;Media Error|Other Error&quot; | awk -F : &apos;&#123;print $2&#125;&apos; &gt;/tmp/disk.log</div><div class="line">for i in `cat  do</div><div class="line">if [ $i -ne 0 ]</div><div class="line">      then</div><div class="line">curl &quot;http://xxxxxxB&amp;state=ALARM&amp;description=raid_disk_error&quot;</div><div class="line">fi</div><div class="line">done</div><div class="line">for i in `cat  do</div><div class="line">if [ $i !=  Online ]</div><div class="line">      then</div><div class="line">curl &quot;http://xxxxxxstate=ALARM&amp;description=raid_disk_offline&quot;</div><div class="line">fi</div><div class="line">done</div></pre></td></tr></table></figure></p>
<p>Windows 下脚本<br>Windows下脚本用的工具是gnu for windows平台的一些软件，如 bash grep awk cat<br>通过bash直接调用脚本<br>如：G:\raid_check\unixtools&gt;bash.exe  G:\disk.sh</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">#check raid disk status</div><div class="line">MEGACLI=&quot;//G/raid_check/MegaCli.exe&quot;</div><div class="line">GREP=&quot;//G/raid_check/unixtools/grep.exe&quot;</div><div class="line">AWK=&quot;//G/raid_check/unixtools/awk.exe&quot;</div><div class="line">CAT=&quot;//G/raid_check/unixtools/cat.exe&quot;</div><div class="line">CURL=&quot;//G/raid_check/unixtools/curl.exe&quot;</div><div class="line">$MEGACLI -pdlist -aALL  | $GREP &quot;Firmware state&quot; |$AWK -F: &apos;&#123;print $2&#125;&apos; |$AWK -F , &apos;&#123;print $1&#125;&apos; &gt;//c/fireware.log</div><div class="line">$MEGACLI -pdlist -aALL  | $GREP -E &quot;Media Error|Other Error&quot; | $AWK -F : &apos;&#123;print $2&#125;&apos; &gt; //c/disk.log</div><div class="line">for i in `$CAT c:/disk.log`</div><div class="line">do</div><div class="line">if [ $i -ne 0 ]</div><div class="line">      then</div><div class="line">$CURL &quot;http://xxxxxx&amp;description=raid_disk_error&quot;</div><div class="line">fi</div><div class="line">done</div><div class="line">for i in `$CAT c:/fireware.log`</div><div class="line">do</div><div class="line">if [ $i != Online ]</div><div class="line">      then</div><div class="line">$CURL &quot;http://xxxxx&amp;state=ALARM&amp;description=raid_disk_offline&quot;</div><div class="line">fi</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://czero000.github.io/2015/12/21/introduce-megacli-command.html" data-id="civlqiu6p003wc15m6c0a2k8j" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/megacli/">megacli</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/raid/">raid</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-passwd-command-failed" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/21/passwd-command-failed.html" class="article-date">
  <time datetime="2015-12-21T14:54:41.000Z" itemprop="datePublished">2015-12-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/System/">System</a>►<a class="article-category-link" href="/categories/System/Other/">Other</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/21/passwd-command-failed.html">passwd修改密码失败</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <a id="more"></a>
<h3 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h3><p>今天增加一用户时，出现以下情况<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@ssq-54-104 ~]# passwd root</div><div class="line">Changing password for user root.</div><div class="line">New UNIX password:</div><div class="line">/usr/share/cracklib/pw_dict: error reading header</div><div class="line">PWOpen: Success</div></pre></td></tr></table></figure></p>
<h3 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum reinstall -y cracklib-dicts</div></pre></td></tr></table></figure>
<blockquote>
<p>CrackLib是一个可用于类UNIX系统下的函数库,   一般来说,   通常只使用其中的一个函数.它可以用于编写和passwd有关的程序中,   其基本思想是很简单的,   就是防止用户使用过于简单,   容易被猜测出来或容易被一些工具搜索到的密码.CrackLib并不是一个可以直接运行使用的程序,   它是一个函数库,   你可以利用其中的函数写自己的程序,   或是加入其它程序中,   用来提高安全性.   比如,   你可以重写passwd,使用户在选择密码时受到限制CrackLib使用一个字典,   它查找字典以判断所选用密码是否是不安全的密码,   所以你也可以加入其它信息,   使用自己的字典.比如,   加入公司的名称,   实验室墙上的单词等等潜在的不安全密码.</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://czero000.github.io/2015/12/21/passwd-command-failed.html" data-id="civlqiu79004ic15m2jmlr46c" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/passwd/">passwd</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-update-python" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/21/update-python.html" class="article-date">
  <time datetime="2015-12-21T14:04:46.000Z" itemprop="datePublished">2015-12-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Python/">Python</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/21/update-python.html">Python2.4升级</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>RHEL5.4系统中自带的Python版本是2.4，但是目前许多基于Python的应用要求的Python版本都要高于2.4，在升级Python版本时不要卸载Python2.4在安装Python2.7，这样会有很多的问题，保守的方法是直接安装Python2.7的源码包（系统中有很多程序依赖Python）</p>
<h4 id="系统版本"><a href="#系统版本" class="headerlink" title="系统版本"></a>系统版本</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">lsb_release -a</div><div class="line">LSB Version:    :core-3.1-ia32:core-3.1-noarch:graphics-3.1-ia32:graphics-3.1-noarch</div><div class="line">Distributor ID: RedHatEnterpriseServer</div><div class="line">Description:    Red Hat Enterprise Linux Server release 5.4 (Tikanga)</div><div class="line">Release:        5.4</div><div class="line">Codename:       Tikanga</div></pre></td></tr></table></figure>
<h4 id="Python版本"><a href="#Python版本" class="headerlink" title="Python版本"></a>Python版本</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">python -V</div><div class="line">Python 2.4.3</div></pre></td></tr></table></figure>
<h4 id="下载并安装Python2-7"><a href="#下载并安装Python2-7" class="headerlink" title="下载并安装Python2.7"></a>下载并安装Python2.7</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">cd /usr/local/src</div><div class="line">wget www.python.org/ftp/python/2.7.2/Python-2.7.2.tar.bz2</div><div class="line">tar -jxf Python-2.7.2.tar.bz2  </div><div class="line">cd Python-2.7.2</div><div class="line">./configure</div><div class="line">make &amp;&amp; make install</div></pre></td></tr></table></figure>
<p>Python2.7安装后路径默认是/usr/local/lib/python2.7，查看Python版本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">/usr/local/bin/python2.7 -V</div><div class="line">Python 2.7.2</div></pre></td></tr></table></figure>
<h4 id="建立软连接，使系统默认的Python指向Python2-7"><a href="#建立软连接，使系统默认的Python指向Python2-7" class="headerlink" title="建立软连接，使系统默认的Python指向Python2.7"></a>建立软连接，使系统默认的Python指向Python2.7</h4><p>正常情况下，即使Python2.7安装成功后，系统默认的Python版本仍然是2.4<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">python -V</div><div class="line">Python 2.4.3</div></pre></td></tr></table></figure></p>
<h4 id="将系统默认的Python指到2-7"><a href="#将系统默认的Python指到2-7" class="headerlink" title="将系统默认的Python指到2.7"></a>将系统默认的Python指到2.7</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mv /usr/bin/python /usr/bin/python.bak</div><div class="line">ln -s /usr/local/bin/python2.7 /usr/bin/python</div></pre></td></tr></table></figure>
<h4 id="测试是否成功"><a href="#测试是否成功" class="headerlink" title="测试是否成功"></a>测试是否成功</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">python -V</div><div class="line">Python 2.7.2</div></pre></td></tr></table></figure>
<h4 id="yum工具是基于Python2-4才能运行"><a href="#yum工具是基于Python2-4才能运行" class="headerlink" title="yum工具是基于Python2.4才能运行"></a>yum工具是基于Python2.4才能运行</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">edit /usr/bin/yum</div><div class="line">#!/usr/bin/python =&gt; #!/usr/bin/python2.4</div></pre></td></tr></table></figure>
<p>这样yum工具就可以正常使</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://czero000.github.io/2015/12/21/update-python.html" data-id="civlqiu430011c15mt4pxq7ux" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/page/13/">&laquo; __('prev')</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><a class="page-number" href="/page/13/">13</a><span class="page-number current">14</span><a class="page-number" href="/page/15/">15</a><a class="page-number" href="/page/16/">16</a><span class="space">&hellip;</span><a class="page-number" href="/page/21/">21</a><a class="extend next" rel="next" href="/page/15/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Blog/">Blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Database/">Database</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Database/MySQL/">MySQL</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Database/Redis/">Redis</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Markdown/">Markdown</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/">System</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/System/Bash/">Bash</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/CentOS/">CentOS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/Command/">Command</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/DNS/">DNS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/Debian/">Debian</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/Git/">Git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/Gitlab/">Gitlab</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/IPTABLES/">IPTABLES</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/L2TP/">L2TP</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/Monitor/">Monitor</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/NFS/">NFS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/Other/">Other</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/Proxy/">Proxy</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/RRDTOOL/">RRDTOOL</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/Security/">Security</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Web/">Web</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Web/Apache/">Apache</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Web/Nginx/">Nginx</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/虚拟化/">虚拟化</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/虚拟化/KVM/">KVM</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/运维技术/">运维技术</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/运维技术/Docker/">Docker</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/运维技术/ELK/">ELK</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/运维技术/GlusterFS/">GlusterFS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/运维技术/MooseFS/">MooseFS</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/运维自动化/">运维自动化</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/运维自动化/Ansible/">Ansible</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/运维自动化/Cobbler/">Cobbler</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/运维自动化/SaltStack/">SaltStack</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/随笔/">随笔</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Blog/">Blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP状态码/">HTTP状态码</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/">Hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MooseFS/">MooseFS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ansible/">ansible</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apache/">apache</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/awk/">awk</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bash/">bash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bind/">bind</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cacti/">cacti</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/centos/">centos</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/chinese/">chinese</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/chromium/">chromium</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cobbler/">cobbler</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/curl/">curl</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/debian/">debian</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/download/">download</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dropbox/">dropbox</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/elasticsearch/">elasticsearch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/elasticsearch-elk/">elasticsearch.elk</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/elk/">elk</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/em1/">em1</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/epel/">epel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/eth0/">eth0</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fishshell/">fishshell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gitlab/">gitlab</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gitolite/">gitolite</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/glances/">glances</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/glibc/">glibc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/glusterfs/">glusterfs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gpt/">gpt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/https/">https</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iftop/">iftop</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/inotify/">inotify</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iptables/">iptables</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kernel/">kernel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kibana/">kibana</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kvm/">kvm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/l2tp/">l2tp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/logrotate/">logrotate</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/logstash/">logstash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/logstash-forwarder/">logstash-forwarder</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/markdown/">markdown</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/megacli/">megacli</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mindmap/">mindmap</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/monitor/">monitor</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mycli/">mycli</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nfs/">nfs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/">nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx-vim/">nginx.vim</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ntp/">ntp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/openssl/">openssl</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/parted/">parted</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/passwd/">passwd</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php/">php</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php-fpm/">php-fpm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pptp/">pptp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/proxy/">proxy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/raid/">raid</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redis/">redis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rrdtool/">rrdtool</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rsync/">rsync</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/saltstack/">saltstack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/security/">security</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/servicewrapper/">servicewrapper</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shadowsocks/">shadowsocks</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/smokeping/">smokeping</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/socks5/">socks5</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ss5/">ss5</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/transmission/">transmission</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ubuntu/">ubuntu</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/virsh/">virsh</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vncserver/">vncserver</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xz/">xz</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/yum/">yum</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/zsh/">zsh</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/书写指南/">书写指南</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Blog/" style="font-size: 10px;">Blog</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/HTTP状态码/" style="font-size: 10px;">HTTP状态码</a> <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/MooseFS/" style="font-size: 10px;">MooseFS</a> <a href="/tags/ansible/" style="font-size: 17.5px;">ansible</a> <a href="/tags/apache/" style="font-size: 10px;">apache</a> <a href="/tags/awk/" style="font-size: 11.25px;">awk</a> <a href="/tags/bash/" style="font-size: 18.75px;">bash</a> <a href="/tags/bind/" style="font-size: 11.25px;">bind</a> <a href="/tags/cacti/" style="font-size: 10px;">cacti</a> <a href="/tags/centos/" style="font-size: 12.5px;">centos</a> <a href="/tags/chinese/" style="font-size: 11.25px;">chinese</a> <a href="/tags/chromium/" style="font-size: 10px;">chromium</a> <a href="/tags/cobbler/" style="font-size: 11.25px;">cobbler</a> <a href="/tags/curl/" style="font-size: 10px;">curl</a> <a href="/tags/debian/" style="font-size: 10px;">debian</a> <a href="/tags/docker/" style="font-size: 12.5px;">docker</a> <a href="/tags/download/" style="font-size: 10px;">download</a> <a href="/tags/dropbox/" style="font-size: 10px;">dropbox</a> <a href="/tags/elasticsearch/" style="font-size: 10px;">elasticsearch</a> <a href="/tags/elasticsearch-elk/" style="font-size: 10px;">elasticsearch.elk</a> <a href="/tags/elk/" style="font-size: 12.5px;">elk</a> <a href="/tags/em1/" style="font-size: 10px;">em1</a> <a href="/tags/epel/" style="font-size: 10px;">epel</a> <a href="/tags/eth0/" style="font-size: 10px;">eth0</a> <a href="/tags/fishshell/" style="font-size: 10px;">fishshell</a> <a href="/tags/git/" style="font-size: 13.75px;">git</a> <a href="/tags/gitlab/" style="font-size: 10px;">gitlab</a> <a href="/tags/gitolite/" style="font-size: 10px;">gitolite</a> <a href="/tags/glances/" style="font-size: 10px;">glances</a> <a href="/tags/glibc/" style="font-size: 10px;">glibc</a> <a href="/tags/glusterfs/" style="font-size: 12.5px;">glusterfs</a> <a href="/tags/gpt/" style="font-size: 10px;">gpt</a> <a href="/tags/https/" style="font-size: 10px;">https</a> <a href="/tags/iftop/" style="font-size: 10px;">iftop</a> <a href="/tags/inotify/" style="font-size: 11.25px;">inotify</a> <a href="/tags/iptables/" style="font-size: 10px;">iptables</a> <a href="/tags/kernel/" style="font-size: 10px;">kernel</a> <a href="/tags/kibana/" style="font-size: 10px;">kibana</a> <a href="/tags/kvm/" style="font-size: 10px;">kvm</a> <a href="/tags/l2tp/" style="font-size: 10px;">l2tp</a> <a href="/tags/logrotate/" style="font-size: 10px;">logrotate</a> <a href="/tags/logstash/" style="font-size: 11.25px;">logstash</a> <a href="/tags/logstash-forwarder/" style="font-size: 10px;">logstash-forwarder</a> <a href="/tags/markdown/" style="font-size: 10px;">markdown</a> <a href="/tags/megacli/" style="font-size: 11.25px;">megacli</a> <a href="/tags/mindmap/" style="font-size: 11.25px;">mindmap</a> <a href="/tags/monitor/" style="font-size: 15px;">monitor</a> <a href="/tags/mycli/" style="font-size: 10px;">mycli</a> <a href="/tags/mysql/" style="font-size: 10px;">mysql</a> <a href="/tags/nfs/" style="font-size: 10px;">nfs</a> <a href="/tags/nginx/" style="font-size: 20px;">nginx</a> <a href="/tags/nginx-vim/" style="font-size: 10px;">nginx.vim</a> <a href="/tags/ntp/" style="font-size: 10px;">ntp</a> <a href="/tags/openssl/" style="font-size: 10px;">openssl</a> <a href="/tags/parted/" style="font-size: 10px;">parted</a> <a href="/tags/passwd/" style="font-size: 10px;">passwd</a> <a href="/tags/php/" style="font-size: 10px;">php</a> <a href="/tags/php-fpm/" style="font-size: 10px;">php-fpm</a> <a href="/tags/pptp/" style="font-size: 11.25px;">pptp</a> <a href="/tags/proxy/" style="font-size: 15px;">proxy</a> <a href="/tags/python/" style="font-size: 12.5px;">python</a> <a href="/tags/raid/" style="font-size: 10px;">raid</a> <a href="/tags/redis/" style="font-size: 10px;">redis</a> <a href="/tags/rrdtool/" style="font-size: 10px;">rrdtool</a> <a href="/tags/rsync/" style="font-size: 10px;">rsync</a> <a href="/tags/saltstack/" style="font-size: 16.25px;">saltstack</a> <a href="/tags/security/" style="font-size: 10px;">security</a> <a href="/tags/servicewrapper/" style="font-size: 10px;">servicewrapper</a> <a href="/tags/shadowsocks/" style="font-size: 10px;">shadowsocks</a> <a href="/tags/smokeping/" style="font-size: 13.75px;">smokeping</a> <a href="/tags/socks5/" style="font-size: 11.25px;">socks5</a> <a href="/tags/ss5/" style="font-size: 10px;">ss5</a> <a href="/tags/transmission/" style="font-size: 10px;">transmission</a> <a href="/tags/ubuntu/" style="font-size: 10px;">ubuntu</a> <a href="/tags/virsh/" style="font-size: 10px;">virsh</a> <a href="/tags/vncserver/" style="font-size: 10px;">vncserver</a> <a href="/tags/xz/" style="font-size: 10px;">xz</a> <a href="/tags/yum/" style="font-size: 10px;">yum</a> <a href="/tags/zsh/" style="font-size: 10px;">zsh</a> <a href="/tags/书写指南/" style="font-size: 10px;">书写指南</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">July 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">June 2015</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/11/17/Git-basic.html">Git基础</a>
          </li>
        
          <li>
            <a href="/2016/10/26/ansible-managment-windows.html">使用ansible管理windows主机</a>
          </li>
        
          <li>
            <a href="/2016/10/20/git-different-sshkey.html">配置不同ssh-key访问不同git仓库</a>
          </li>
        
          <li>
            <a href="/2016/10/20/l2tp-vpn.html">IPsec和L2TP搭建VPN</a>
          </li>
        
          <li>
            <a href="/2016/10/20/ansible-dynamic-create-vhost.html">通过jinja2生成虚拟主机配置</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 C.c<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>