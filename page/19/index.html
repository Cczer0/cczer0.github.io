<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Zero&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Love Linux ♥ Love Python. 猴赛雷">
<meta property="og:type" content="website">
<meta property="og:title" content="Zero's Blog">
<meta property="og:url" content="http://czero000.github.io/page/19/index.html">
<meta property="og:site_name" content="Zero's Blog">
<meta property="og:description" content="Love Linux ♥ Love Python. 猴赛雷">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Zero's Blog">
<meta name="twitter:description" content="Love Linux ♥ Love Python. 猴赛雷">
  
    <link rel="alternate" href="/atom.xml" title="Zero&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Zero&#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">点滴分享 多彩生活</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://czero000.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-vim-nginx-hight-light" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/10/21/vim-nginx-hight-light.html" class="article-date">
  <time datetime="2015-10-21T04:14:37.000Z" itemprop="datePublished">2015-10-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Web/">Web</a>►<a class="article-category-link" href="/categories/Web/Nginx/">Nginx</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/21/vim-nginx-hight-light.html">Nginx代码高亮</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>配置Vim 支持Nginx 配置文件高亮显示</p>
<ul>
<li>下载 Nginx 配置文件的 Vim 语法高亮：<code>http://www.vim.org/scripts/script.php?script_id=1886</code></li>
<li>将下载的<code>nginx.vim</code>复制到<code>~/.vim/syntax/</code>文件夹下，并且在<code>~/.vim/filetype.vim</code>文件中</li>
<li><p><code>echo &quot;au BufRead,BufNewFile /usr/local/nginx/* set ft=nginx&quot; &gt;&gt; /root/.vim/filetype.vim</code></p>
<h3 id="配置Vim的Nginx配置文件语法高亮的脚本，写成脚本，免得每次都手动配置。"><a href="#配置Vim的Nginx配置文件语法高亮的脚本，写成脚本，免得每次都手动配置。" class="headerlink" title="配置Vim的Nginx配置文件语法高亮的脚本，写成脚本，免得每次都手动配置。"></a>配置Vim的Nginx配置文件语法高亮的脚本，写成脚本，免得每次都手动配置。</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">[[ -d ~/.vim/syntax ]] || mkdir  -p ~/.vim/syntax</div><div class="line">wget http://www.vim.org/scripts/download_script.php?src_id=19394 -O ~/.vim/syntaxnginx.vim/</div><div class="line">echo &quot;au BufRead,BufNewFile /usr/local/nginx/* set ft=nginx&quot; &gt;&gt; ~/.vim/filetype.vim</div></pre></td></tr></table></figure>
<p><a href="http://ofc9x1ccn.bkt.clouddn.com/upload/nginx/nginx.vim" target="_blank" rel="external">nginx.vim文件下载链接</a></p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://czero000.github.io/2015/10/21/vim-nginx-hight-light.html" data-id="civlqiucm00g0c15ms1qxl9v6" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nginx/">nginx</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nginx-vim/">nginx.vim</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-nginx-init-scripts" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/10/21/nginx-init-scripts.html" class="article-date">
  <time datetime="2015-10-21T02:33:09.000Z" itemprop="datePublished">2015-10-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Web/">Web</a>►<a class="article-category-link" href="/categories/Web/Nginx/">Nginx</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/21/nginx-init-scripts.html">Nginx INIT启动脚本</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="nginx服务自启动脚本"><a href="#nginx服务自启动脚本" class="headerlink" title="nginx服务自启动脚本"></a>nginx服务自启动脚本</h3><ul>
<li>CentOS/RHEL 5、6系列</li>
</ul>
<p>脚本内容<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">#</div><div class="line"># nginx - this script starts and stops the nginx daemin</div><div class="line">#</div><div class="line"># chkconfig:   - 85 15</div><div class="line"># description:  Nginx is an HTTP(S) server, HTTP(S) reverse</div><div class="line">#               proxy and IMAP/POP3 proxy server</div><div class="line"># processname: nginx</div><div class="line"># config:      /usr/local/nginx/conf/nginx.conf</div><div class="line"># pidfile:     /usr/local/nginx/logs/nginx.pid</div><div class="line"></div><div class="line"># Source function library.</div><div class="line">. /etc/rc.d/init.d/functions</div><div class="line"></div><div class="line"># Source networking configuration.</div><div class="line">. /etc/sysconfig/network</div><div class="line"></div><div class="line"># Check that networking is up.</div><div class="line">[ &quot;$NETWORKING&quot; = &quot;no&quot; ] &amp;&amp; exit 0</div><div class="line"></div><div class="line">nginx=&quot;/usr/local/nginx/sbin/nginx&quot;</div><div class="line">prog=$(basename $nginx)</div><div class="line">NGINX_CONF_FILE=&quot;/usr/local/nginx/conf/nginx.conf&quot;</div><div class="line">lockfile=/var/lock/subsys/nginx</div><div class="line">start() &#123;</div><div class="line">    [ -x $nginx ] || exit 5</div><div class="line">    [ -f $NGINX_CONF_FILE ] || exit 6</div><div class="line">    echo -n $&quot;Starting $prog: &quot;</div><div class="line">    daemon $nginx -c $NGINX_CONF_FILE</div><div class="line">    retval=$?</div><div class="line">    echo</div><div class="line">    [ $retval -eq 0 ] &amp;&amp; touch $lockfile</div><div class="line">    return $retval</div><div class="line">&#125;</div><div class="line"></div><div class="line">stop() &#123;</div><div class="line">    echo -n $&quot;Stopping $prog: &quot;</div><div class="line">    killproc $prog -QUIT</div><div class="line">    retval=$?</div><div class="line">    echo</div><div class="line">    [ $retval -eq 0 ] &amp;&amp; rm -f $lockfile</div><div class="line">    return $retval</div><div class="line">&#125;</div><div class="line"></div><div class="line">restart() &#123;</div><div class="line">    configtest || return $?</div><div class="line">    stop</div><div class="line">    start</div><div class="line">&#125;</div><div class="line"></div><div class="line">reload() &#123;</div><div class="line">    configtest || return $?</div><div class="line">    echo -n $&quot;Reloading $prog: &quot;</div><div class="line">    killproc $nginx -HUP</div><div class="line">    RETVAL=$?</div><div class="line">    echo</div><div class="line">&#125;</div><div class="line"></div><div class="line">force_reload() &#123;</div><div class="line">    restart</div><div class="line">&#125;</div><div class="line"></div><div class="line">configtest() &#123;</div><div class="line">  $nginx -t -c $NGINX_CONF_FILE</div><div class="line">&#125;</div><div class="line"></div><div class="line">rh_status() &#123;</div><div class="line">    status $prog</div><div class="line">&#125;</div><div class="line"></div><div class="line">rh_status_q() &#123;</div><div class="line">    rh_status &gt;/dev/null 2&gt;&amp;1</div><div class="line">&#125;</div><div class="line"></div><div class="line">case &quot;$1&quot; in</div><div class="line">    start)</div><div class="line">        rh_status_q &amp;&amp; exit 0</div><div class="line">        $1</div><div class="line">        ;;</div><div class="line">    stop)</div><div class="line">        rh_status_q || exit 0</div><div class="line">        $1</div><div class="line">        ;;</div><div class="line">    restart|configtest)</div><div class="line">        $1</div><div class="line">        ;;</div><div class="line">    reload)</div><div class="line">        rh_status_q || exit 7</div><div class="line">        $1</div><div class="line">        ;;</div><div class="line">    force-reload)</div><div class="line">        force_reload</div><div class="line">        ;;</div><div class="line">    status)</div><div class="line">        rh_status</div><div class="line">        ;;</div><div class="line">    condrestart|try-restart)</div><div class="line">        rh_status_q || exit 0</div><div class="line">            ;;</div><div class="line">    *)</div><div class="line">        echo $&quot;Usage: $0 &#123;start|stop|status|restart|condrestart|try-restart|reload|force-reload|configtest&#125;&quot;</div><div class="line">        exit 2</div><div class="line">esac</div></pre></td></tr></table></figure></p>
<p>在Centos7 或者 相应的Ubuntu版本中添加如下内容<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">vim /lib/systemd/system/nginx.service   </div><div class="line">[Unit]  </div><div class="line">Description=nginx  </div><div class="line">After=network.target  </div><div class="line"></div><div class="line">[Service]  </div><div class="line">Type=forking  </div><div class="line">ExecStart=/etc/init.d/nginx start  </div><div class="line">ExecReload=/etc/init.d/nginx restart  </div><div class="line">ExecStop=/etc/init.d/nginx  stop  </div><div class="line">PrivateTmp=true  </div><div class="line"></div><div class="line">[Install]  </div><div class="line">WantedBy=multi-user.target</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"># Stop dance for nginx</div><div class="line"># =======================</div><div class="line">#</div><div class="line"># ExecStop sends SIGSTOP (graceful stop) to the nginx process.</div><div class="line"># If, after 5s (--retry QUIT/5) nginx is still running, systemd takes control</div><div class="line"># and sends SIGTERM (fast shutdown) to the main process.</div><div class="line"># After another 5s (TimeoutStopSec=5), and if nginx is alive, systemd sends</div><div class="line"># SIGKILL to all the remaining processes in the process group (KillMode=mixed).</div><div class="line">#</div><div class="line"># nginx signals reference doc:</div><div class="line"># http://nginx.org/en/docs/control.html</div><div class="line">#</div><div class="line">[Unit]</div><div class="line">Description=A high performance web server and a reverse proxy server</div><div class="line">After=network.target</div><div class="line"></div><div class="line">[Service]</div><div class="line">Type=forking</div><div class="line">PIDFile=/usr/local/nginx/logs/nginx.pid</div><div class="line">ExecStartPre=/usr/local/nginx/sbin/nginx -t -q -g &apos;daemon on; master_process on;&apos;</div><div class="line">ExecStart=/usr/local/nginx/sbin/nginx -g &apos;daemon on; master_process on;&apos;</div><div class="line">ExecReload=/usr/local/nginx/sbin/nginx -g &apos;daemon on; master_process on;&apos; -s reload</div><div class="line">ExecStop=-/sbin/start-stop-daemon --quiet --stop --retry QUIT/5 --pidfile /usr/local/nginx/logs/nginx.pid</div><div class="line">TimeoutStopSec=5</div><div class="line">KillMode=mixed</div><div class="line"></div><div class="line">[Install]</div><div class="line">WantedBy=multi-user.target</div></pre></td></tr></table></figure>
<ul>
<li>Ubuntu</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div></pre></td><td class="code"><pre><div class="line">#! /bin/sh</div><div class="line">### BEGIN INIT INFO</div><div class="line"># Provides:          nginx</div><div class="line"># Required-Start:    $remote_fs $syslog</div><div class="line"># Required-Stop:     $remote_fs $syslog</div><div class="line"># Default-Start:     2 3 4 5</div><div class="line"># Default-Stop:      0 1 6</div><div class="line"># Short-Description: nginx init.d dash script for Ubuntu or other *nix.</div><div class="line"># Description:       nginx init.d dash script for Ubuntu or other *nix.</div><div class="line">### END INIT INFO        </div><div class="line">#------------------------------------------------------------------------------</div><div class="line"># nginx - this Debian Almquist shell (dash) script, starts and stops the nginx</div><div class="line">#         daemon for Ubuntu and other *nix releases.</div><div class="line">#</div><div class="line"># description:  Nginx is an HTTP(S) server, HTTP(S) reverse \</div><div class="line">#               proxy and IMAP/POP3 proxy server.  This \</div><div class="line">#               script will manage the initiation of the \</div><div class="line">#               server and it&apos;s process state.</div><div class="line">#</div><div class="line"># processname: nginx</div><div class="line"># config:      /usr/local/nginx/conf/nginx.conf</div><div class="line"># pidfile:     /usr/local/nginx/logs/nginx.pid</div><div class="line"># Provides:    nginx</div><div class="line">#</div><div class="line"># Author:  Jason Giedymin</div><div class="line">#          &lt;jason.giedymin AT gmail.com&gt;.</div><div class="line">#</div><div class="line"># Version: 3.5.1 11-NOV-2013 jason.giedymin AT gmail.com</div><div class="line"># Notes: nginx init.d dash script for Ubuntu.</div><div class="line"># Tested with: Ubuntu 13.10, nginx-1.4.3</div><div class="line">#</div><div class="line"># This script&apos;s project home is:</div><div class="line">#   [url]http://github.com/JasonGiedymin/nginx-init-ubuntu[/url]</div><div class="line">#</div><div class="line">#------------------------------------------------------------------------------</div><div class="line">#                               MIT X11 License</div><div class="line">#------------------------------------------------------------------------------</div><div class="line">#</div><div class="line"># Copyright (c) 2008-2013 Jason Giedymin, [url]http://jasongiedymin.com[/url]</div><div class="line">#</div><div class="line"># Permission is hereby granted, free of charge, to any person obtaining</div><div class="line"># a copy of this software and associated documentation files (the</div><div class="line"># &quot;Software&quot;), to deal in the Software without restriction, including</div><div class="line"># without limitation the rights to use, copy, modify, merge, publish,</div><div class="line"># distribute, sublicense, and/or sell copies of the Software, and to</div><div class="line"># permit persons to whom the Software is furnished to do so, subject to</div><div class="line"># the following conditions:</div><div class="line">#</div><div class="line"># The above copyright notice and this permission notice shall be</div><div class="line"># included in all copies or substantial portions of the Software.</div><div class="line">#</div><div class="line"># THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND,</div><div class="line"># EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF</div><div class="line"># MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND</div><div class="line"># NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE</div><div class="line"># LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION</div><div class="line"># OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION</div><div class="line"># WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</div><div class="line"></div><div class="line">#------------------------------------------------------------------------------</div><div class="line">#------------------------------------------------------------------------------</div><div class="line">#                               Functions</div><div class="line">#------------------------------------------------------------------------------</div><div class="line"></div><div class="line">LSB_FUNC=/lib/lsb/init-functions</div><div class="line"># Test that init functions exists</div><div class="line">test -r $LSB_FUNC || &#123;</div><div class="line">    echo &quot;$0: Cannot find $LSB_FUNC! Script exiting.&quot; 1&gt;&amp;2</div><div class="line">    exit 5</div><div class="line">&#125;</div><div class="line"></div><div class="line">. $LSB_FUNC</div><div class="line">#------------------------------------------------------------------------------</div><div class="line">#                               Consts</div><div class="line">#------------------------------------------------------------------------------</div><div class="line">PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin</div><div class="line">DAEMON=/usr/local/nginx/sbin/nginx</div><div class="line"></div><div class="line">PS=&quot;nginx&quot;</div><div class="line">PIDNAME=&quot;nginx&quot;                     #lets you do $PS-slave</div><div class="line">PIDFILE=$PIDNAME.pid                #pid file</div><div class="line">PIDSPATH=/usr/local/nginx/logs      #default pid location, you should change it</div><div class="line">DESCRIPTION=&quot;Nginx Server...&quot;</div><div class="line">RUNAS=root                          #user to run as</div><div class="line">SCRIPT_OK=0                         #ala error codes</div><div class="line">SCRIPT_ERROR=1                      #ala error codes</div><div class="line">TRUE=1                              #boolean</div><div class="line">FALSE=0                             #boolean</div><div class="line"></div><div class="line">lockfile=/var/lock/subsys/nginx</div><div class="line">NGINX_CONF_FILE=&quot;/usr/local/nginx/conf/nginx.conf&quot;</div><div class="line">#------------------------------------------------------------------------------</div><div class="line">#                               Simple Tests</div><div class="line">#------------------------------------------------------------------------------</div><div class="line"></div><div class="line"># Test if nginx is a file and executable</div><div class="line">test -x $DAEMON || &#123;</div><div class="line">    echo &quot;$0: You don&apos;t have permissions to execute nginx.&quot; 1&gt;&amp;2</div><div class="line">    exit 4</div><div class="line">&#125;</div><div class="line"></div><div class="line"># Include nginx defaults if available</div><div class="line">if [ -f /etc/default/nginx ]; then</div><div class="line">    . /etc/default/nginx</div><div class="line">fi</div><div class="line"></div><div class="line">#set exit condition</div><div class="line">#set -e</div><div class="line">#------------------------------------------------------------------------------</div><div class="line">#                               Functions</div><div class="line">#------------------------------------------------------------------------------</div><div class="line">setFilePerms()&#123;</div><div class="line">    if [ -f $PIDSPATH/$PIDFILE ]; then</div><div class="line">        chmod 400 $PIDSPATH/$PIDFILE</div><div class="line">    fi</div><div class="line">&#125;</div><div class="line"></div><div class="line">configtest() &#123;</div><div class="line">    $DAEMON -t -c $NGINX_CONF_FILE</div><div class="line">&#125;</div><div class="line"></div><div class="line">getPSCount() &#123;</div><div class="line">    return `pgrep -f $PS | wc -l`</div><div class="line">&#125;</div><div class="line"></div><div class="line">isRunning() &#123;</div><div class="line">    if [ $1 ]; then</div><div class="line">        pidof_daemon $1</div><div class="line">        PID=$?</div><div class="line">        if [ $PID -gt 0 ]; then</div><div class="line">            return 1</div><div class="line">        else</div><div class="line">            return 0</div><div class="line">        fi</div><div class="line">    else</div><div class="line">        pidof_daemon</div><div class="line">        PID=$?</div><div class="line"></div><div class="line">        if [ $PID -gt 0 ]; then</div><div class="line">            return 1</div><div class="line">        else</div><div class="line">            return 0</div><div class="line">        fi</div><div class="line">    fi</div><div class="line">&#125;         </div><div class="line"></div><div class="line">#courtesy of php-fpm</div><div class="line">wait_for_pid () &#123;</div><div class="line">    try=0         </div><div class="line">    while test $try -lt 35 ; do</div><div class="line">        case &quot;$1&quot; in</div><div class="line">            &apos;created&apos;)</div><div class="line">            if [ -f &quot;$2&quot; ]; then</div><div class="line">                try=&apos;&apos;</div><div class="line">                break</div><div class="line">            fi</div><div class="line">            ;;</div><div class="line"></div><div class="line">            &apos;removed&apos;)</div><div class="line">            if [ ! -f &quot;$2&quot; ]; then</div><div class="line">                try=&apos;&apos;</div><div class="line">                break</div><div class="line">            fi</div><div class="line">            ;;</div><div class="line">        esac</div><div class="line">        try=`expr $try + 1`</div><div class="line">        sleep 1</div><div class="line">    done</div><div class="line">&#125;</div><div class="line"></div><div class="line">status()&#123;</div><div class="line">    isRunning</div><div class="line">    isAlive=$?</div><div class="line"></div><div class="line">    if [ &quot;$&#123;isAlive&#125;&quot; -eq $TRUE ]; then</div><div class="line">        log_warning_msg &quot;$DESCRIPTION found running with processes:  `pidof $PS`&quot;</div><div class="line">        rc=0</div><div class="line">    else</div><div class="line">        log_warning_msg &quot;$DESCRIPTION is NOT running.&quot;</div><div class="line">        rc=3</div><div class="line">    fi</div><div class="line">    return</div><div class="line">&#125;</div><div class="line"></div><div class="line">removePIDFile()&#123;</div><div class="line">    if [ $1 ]; then</div><div class="line">        if [ -f $1 ]; then</div><div class="line">            rm -f $1</div><div class="line">        fi</div><div class="line">    else</div><div class="line">        #Do default removal</div><div class="line">        if [ -f $PIDSPATH/$PIDFILE ]; then</div><div class="line">            rm -f $PIDSPATH/$PIDFILE</div><div class="line">        fi</div><div class="line">    fi</div><div class="line">&#125;</div><div class="line"></div><div class="line">start() &#123;</div><div class="line">    log_daemon_msg &quot;Starting $DESCRIPTION&quot;</div><div class="line">    isRunning</div><div class="line">    isAlive=$?</div><div class="line">    if [ &quot;$&#123;isAlive&#125;&quot; -eq $TRUE ]; then</div><div class="line">        log_end_msg $SCRIPT_ERROR</div><div class="line">        rc=0</div><div class="line">     else</div><div class="line">        start-stop-daemon --start --quiet --chuid \</div><div class="line">        $RUNAS --pidfile $PIDSPATH/$PIDFILE --exec $DAEMON \</div><div class="line">        -- -c $NGINX_CONF_FILE</div><div class="line">        setFilePerms</div><div class="line">        log_end_msg $SCRIPT_OK</div><div class="line">        rc=0</div><div class="line">    fi</div><div class="line"></div><div class="line">    return</div><div class="line">&#125;</div><div class="line"></div><div class="line">stop() &#123;</div><div class="line">    log_daemon_msg &quot;Stopping $DESCRIPTION&quot;</div><div class="line">    isRunning</div><div class="line">    isAlive=$?</div><div class="line">    if [ &quot;$&#123;isAlive&#125;&quot; -eq $TRUE ]; then</div><div class="line">        start-stop-daemon --stop --quiet --pidfile $PIDSPATH/$PIDFILE</div><div class="line">        wait_for_pid &apos;removed&apos; $PIDSPATH/$PIDFILE</div><div class="line"></div><div class="line">        if [ -n &quot;$try&quot; ]; then</div><div class="line">            log_end_msg $SCRIPT_ERROR</div><div class="line">            rc=0 # lsb states 1, but under status it is 2 (which is more prescriptive). Deferring to standard.</div><div class="line">        else</div><div class="line">            removePIDFile</div><div class="line">            log_end_msg $SCRIPT_OK</div><div class="line">            rc=0</div><div class="line">        fi</div><div class="line">    else</div><div class="line">        log_end_msg $SCRIPT_ERROR</div><div class="line">        rc=7</div><div class="line">    fi</div><div class="line"></div><div class="line">    return</div><div class="line">&#125;</div><div class="line"></div><div class="line">reload() &#123;</div><div class="line">    configtest || return $?</div><div class="line">    log_daemon_msg &quot;Reloading (via HUP) $DESCRIPTION&quot;</div><div class="line">    isRunning</div><div class="line">    if [ $? -eq $TRUE ]; then</div><div class="line">        kill -HUP `cat $PIDSPATH/$PIDFILE`</div><div class="line">        log_end_msg $SCRIPT_OK</div><div class="line">        rc=0</div><div class="line">    else</div><div class="line">        log_end_msg $SCRIPT_ERROR</div><div class="line">        rc=7</div><div class="line">    fi</div><div class="line">    return</div><div class="line">&#125;</div><div class="line"></div><div class="line">quietupgrade() &#123;</div><div class="line">    log_daemon_msg &quot;Peforming Quiet Upgrade $DESCRIPTION&quot;</div><div class="line">    isRunning</div><div class="line">    isAlive=$?</div><div class="line">    if [ &quot;$&#123;isAlive&#125;&quot; -eq $TRUE ]; then</div><div class="line">        kill -USR2 `cat $PIDSPATH/$PIDFILE`</div><div class="line">        kill -WINCH `cat $PIDSPATH/$PIDFILE.oldbin`</div><div class="line">        isRunning</div><div class="line">        isAlive=$?</div><div class="line">        if [ &quot;$&#123;isAlive&#125;&quot; -eq $TRUE ]; then</div><div class="line">            kill -QUIT `cat $PIDSPATH/$PIDFILE.oldbin`</div><div class="line">            wait_for_pid &apos;removed&apos; $PIDSPATH/$PIDFILE.oldbin</div><div class="line">            removePIDFile $PIDSPATH/$PIDFILE.oldbin</div><div class="line">            log_end_msg $SCRIPT_OK</div><div class="line">            rc=0</div><div class="line">        else</div><div class="line">            log_end_msg $SCRIPT_ERROR</div><div class="line">            log_daemon_msg &quot;ERROR! Reverting back to original $DESCRIPTION&quot;</div><div class="line">            kill -HUP `cat $PIDSPATH/$PIDFILE`</div><div class="line">            kill -TERM `cat $PIDSPATH/$PIDFILE.oldbin`</div><div class="line">            kill -QUIT `cat $PIDSPATH/$PIDFILE.oldbin`</div><div class="line">            wait_for_pid &apos;removed&apos; $PIDSPATH/$PIDFILE.oldbin</div><div class="line">            removePIDFile $PIDSPATH/$PIDFILE.oldbin</div><div class="line">            log_end_msg $SCRIPT_OK</div><div class="line">            rc=0</div><div class="line">        fi</div><div class="line">    else</div><div class="line">        log_end_msg $SCRIPT_ERROR</div><div class="line">        rc=7</div><div class="line">    fi</div><div class="line">    return</div><div class="line">&#125;</div><div class="line"></div><div class="line">terminate() &#123;</div><div class="line">    log_daemon_msg &quot;Force terminating (via KILL) $DESCRIPTION&quot;</div><div class="line">    PIDS=`pidof $PS` || true</div><div class="line">    [ -e $PIDSPATH/$PIDFILE ] &amp;&amp; PIDS2=`cat $PIDSPATH/$PIDFILE`</div><div class="line">    for i in $PIDS; do</div><div class="line">        if [ &quot;$i&quot; = &quot;$PIDS2&quot; ]; then</div><div class="line">            kill $i</div><div class="line">            wait_for_pid &apos;removed&apos; $PIDSPATH/$PIDFILE</div><div class="line">            removePIDFile</div><div class="line">        fi</div><div class="line">    done</div><div class="line">    log_end_msg $SCRIPT_OK</div><div class="line">    rc=0</div><div class="line">&#125;</div><div class="line"></div><div class="line">destroy() &#123;</div><div class="line">    log_daemon_msg &quot;Force terminating and may include self (via KILLALL) $DESCRIPTION&quot;</div><div class="line">    killall $PS -q &gt;&gt; /dev/null 2&gt;&amp;1</div><div class="line">    log_end_msg $SCRIPT_OK</div><div class="line">    rc=0</div><div class="line">&#125;</div><div class="line"></div><div class="line">pidof_daemon() &#123;</div><div class="line">    PIDS=`pidof $PS` || true</div><div class="line">    [ -e $PIDSPATH/$PIDFILE ] &amp;&amp; PIDS2=`cat $PIDSPATH/$PIDFILE`</div><div class="line"></div><div class="line">    for i in $PIDS; do</div><div class="line">        if [ &quot;$i&quot; = &quot;$PIDS2&quot; ]; then</div><div class="line">            return 1</div><div class="line">        fi</div><div class="line">    done</div><div class="line">    return 0</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">action=&quot;$1&quot;</div><div class="line">case &quot;$1&quot; in</div><div class="line">    start)</div><div class="line">        start</div><div class="line">        ;;</div><div class="line">    stop)</div><div class="line">        stop</div><div class="line">        ;;</div><div class="line">    restart|force-reload)</div><div class="line">        stop</div><div class="line">        # if [ $rc -ne 0 ]; then</div><div class="line">        #     script_exit</div><div class="line">        # fi</div><div class="line">        sleep 1</div><div class="line">        start</div><div class="line">        ;;</div><div class="line">    reload)</div><div class="line">        $1</div><div class="line">        ;;</div><div class="line">    status)</div><div class="line">        status</div><div class="line">        ;;</div><div class="line">    configtest)</div><div class="line">        $1</div><div class="line">        ;;</div><div class="line">    quietupgrade)</div><div class="line">        $1</div><div class="line">        ;;</div><div class="line">    terminate)</div><div class="line">        $1</div><div class="line">        ;;</div><div class="line">    destroy)</div><div class="line">        $1</div><div class="line">        ;;</div><div class="line">    *)</div><div class="line">        FULLPATH=/etc/init.d/$PS</div><div class="line">        echo &quot;Usage: $FULLPATH &#123;start|stop|restart|force-reload|status|configtest|quietupgrade|terminate|destroy&#125;&quot;</div><div class="line">        echo &quot;       The &apos;destroy&apos; command should only be used as a last resort.&quot;</div><div class="line">        exit 3</div><div class="line">        ;;</div><div class="line">esac</div><div class="line">exit $rc</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://czero000.github.io/2015/10/21/nginx-init-scripts.html" data-id="civlr7zfb0000935mdpx2kaoc" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nginx/">nginx</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-install-bind-ms" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/10/19/install-bind-ms.html" class="article-date">
  <time datetime="2015-10-19T09:43:54.000Z" itemprop="datePublished">2015-10-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/System/">System</a>►<a class="article-category-link" href="/categories/System/DNS/">DNS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/19/install-bind-ms.html">Centos6配置主辅DNS</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>主辅DN数据同步，首先master修改完成并重启服务后，将传送notify给slave。slave将查询master的SOA记录，master收到请求后将SOA记录发送给Slave，Slave收到后同时对比查询结果中的serial值，如果serial值不大于本机的话将结束数据同步过程；但是如果serial值大于本机的话，slave将发送zone transfer请求要求（AXFR/IXFR）。Master响应zone transfer请求并传送结果，直到整个slave更新完成。</p>
<h2 id="安装软件包-主从服务器"><a href="#安装软件包-主从服务器" class="headerlink" title="安装软件包(主从服务器)"></a>安装软件包(主从服务器)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum install bind bind-chroot bind-utils bind-libs</div></pre></td></tr></table></figure>
<h2 id="配置Master服务器"><a href="#配置Master服务器" class="headerlink" title="配置Master服务器"></a>配置Master服务器</h2><h3 id="编辑bind主配置文件"><a href="#编辑bind主配置文件" class="headerlink" title="编辑bind主配置文件"></a>编辑bind主配置文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line">cat /var/named/chroot/etc/named.conf</div><div class="line">//</div><div class="line">// named.conf</div><div class="line">//</div><div class="line">// Provided by Red Hat bind package to configure the ISC BIND named(8) DNS</div><div class="line">// server as a caching only nameserver (as a localhost DNS resolver only).</div><div class="line">//</div><div class="line">// See /usr/share/doc/bind*/sample/ for example named configuration files.</div><div class="line">//</div><div class="line"></div><div class="line">options &#123;</div><div class="line">        listen-on port 53 &#123; 162.243.134.106; &#125;;                    \\监听ip及端口</div><div class="line">        directory       &quot;/var/named&quot;;                              \\dns工作目录</div><div class="line">        dump-file       &quot;/var/named/data/cache_dump.db&quot;;           \\ 缓存转存文件</div><div class="line">        statistics-file &quot;/var/named/data/named_stats.txt&quot;;         \\内存使用统计信息</div><div class="line">        allow-query     &#123; any; &#125;;                                  \\ 允许查询的主机，默认是localhost</div><div class="line">        recursion no;                                              \\是否递归查询</div><div class="line">        allow-transfer  &#123; 162.243.134.107; &#125;;                      \\允许同步ip</div><div class="line"></div><div class="line">&#125;;</div><div class="line"></div><div class="line">logging &#123;                                                          \\定义bind服务日志</div><div class="line">        channel &quot;named_log&quot; &#123;</div><div class="line">        file &quot;logs/named.log&quot; versions 10 size 5m;</div><div class="line">        severity dynamic;</div><div class="line">        print-category yes;</div><div class="line">        print-severity yes;</div><div class="line">        print-time yes;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">channel &quot;query_log&quot; &#123;                                              \\定义查询日志</div><div class="line">        file &quot;logs/query.log&quot; versions 10 size 5m;</div><div class="line">        severity debug;</div><div class="line">        print-severity yes;</div><div class="line">        print-time yes;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">category default &#123; named_log; &#125;;</div><div class="line">category queries &#123; query_log; &#125;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">zone &quot;.&quot; IN &#123;</div><div class="line">        type hint;                                                 \\定义根区域</div><div class="line">        file &quot;named.ca&quot;;                                           \\区域文件  </div><div class="line">&#125;;</div><div class="line"></div><div class="line">include &quot;/etc/rndc.key&quot;; </div><div class="line"></div><div class="line">zone &quot;zerounix.com&quot; IN &#123;                                           \\用户区域文件                    </div><div class="line">        type master;</div><div class="line">        masters &#123; 162.243.134.106; &#125;;</div><div class="line">        file &quot;zerounix.com.db&quot;;</div><div class="line">&#125;;</div><div class="line">rm -f /etc/named.conf</div><div class="line">ls -s /var/named/chroot/etc/named.conf /etc/named.conf</div></pre></td></tr></table></figure>
<h3 id="增加zerounix-com区域文件"><a href="#增加zerounix-com区域文件" class="headerlink" title="增加zerounix.com区域文件"></a>增加zerounix.com区域文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">cat /var/named/chroot/var/named/zerounix.com.db </div><div class="line">$TTL    60</div><div class="line">@       IN      SOA     ns1.zerounix.com.    hostmaster.zerounix.com. (</div><div class="line">                        2015101702</div><div class="line">                        3600</div><div class="line">                        300</div><div class="line">                        604800</div><div class="line">                        600</div><div class="line">                        )</div><div class="line"></div><div class="line">                IN      NS      ns1.zerounix.com.</div><div class="line">                IN      NS      ns2.zerounix.com.</div><div class="line">                IN      MX      5       mail.zerounix.com.</div><div class="line">                IN              A       162.243.134.106</div><div class="line">www             IN              CNAME   web.zerounix.com</div><div class="line">web             IN              A       162.243.134.106</div></pre></td></tr></table></figure>
<h3 id="启动bind服务"><a href="#启动bind服务" class="headerlink" title="启动bind服务"></a>启动bind服务</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/etc/init.d/named start</div></pre></td></tr></table></figure>
<h3 id="测试解析是否正常"><a href="#测试解析是否正常" class="headerlink" title="测试解析是否正常"></a>测试解析是否正常</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">dig www.zerounix.com @162.243.134.106</div><div class="line"></div><div class="line">; &lt;&lt;&gt;&gt; DiG 9.8.2rc1-RedHat-9.8.2-0.37.rc1.el6_7.4 &lt;&lt;&gt;&gt; www.zerounix.com</div><div class="line">;; global options: +cmd</div><div class="line">;; Got answer:</div><div class="line">;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 20243</div><div class="line">;; flags: qr rd ra; QUERY: 1, ANSWER: 2, AUTHORITY: 0, ADDITIONAL: 0</div><div class="line"></div><div class="line">;; QUESTION SECTION:</div><div class="line">;www.zerounix.com.              IN      A</div><div class="line"></div><div class="line">;; ANSWER SECTION:</div><div class="line">www.zerounix.com.       9       IN      CNAME   web.zerounix.com.</div><div class="line">web.zerounix.com.       9       IN      A       162.243.134.106</div><div class="line"></div><div class="line">;; Query time: 362 msec</div><div class="line">;; SERVER: 162.243.134.106#53(162.243.134.106)</div><div class="line">;; WHEN: Mon Oct 19 17:22:21 2015</div><div class="line">;; MSG SIZE  rcvd: 68</div></pre></td></tr></table></figure>
<h2 id="配置Slave服务器"><a href="#配置Slave服务器" class="headerlink" title="配置Slave服务器"></a>配置Slave服务器</h2><h3 id="编辑bind配置文件"><a href="#编辑bind配置文件" class="headerlink" title="编辑bind配置文件"></a>编辑bind配置文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"> cat /var/named/chroot/etc/named.conf</div><div class="line">//</div><div class="line">// named.conf</div><div class="line">//</div><div class="line">// Provided by Red Hat bind package to configure the ISC BIND named(8) DNS</div><div class="line">// server as a caching only nameserver (as a localhost DNS resolver only).</div><div class="line">//</div><div class="line">// See /usr/share/doc/bind*/sample/ for example named configuration files.</div><div class="line">//</div><div class="line"></div><div class="line">options &#123;</div><div class="line">        listen-on port 53 &#123; 162.243.134.107; &#125;;</div><div class="line">        directory       &quot;/var/named&quot;;</div><div class="line">        dump-file       &quot;/var/named/data/cache_dump.db&quot;;</div><div class="line">        statistics-file &quot;/var/named/data/named_stats.txt&quot;;</div><div class="line">        allow-query     &#123; any; &#125;;</div><div class="line">        recursion no;</div><div class="line">        allow-transfer  &#123; 162.243.134.106; 162.243.134.107;&#125;;</div><div class="line"></div><div class="line">&#125;;</div><div class="line"></div><div class="line">logging &#123;</div><div class="line">        channel &quot;named_log&quot; &#123;</div><div class="line">        file &quot;logs/named.log&quot; versions 10 size 5m;</div><div class="line">        severity dynamic;</div><div class="line">        print-category yes;</div><div class="line">        print-severity yes;</div><div class="line">        print-time yes;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">channel &quot;query_log&quot; &#123;</div><div class="line">        file &quot;logs/query.log&quot; versions 10 size 5m;</div><div class="line">        severity debug;</div><div class="line">        print-severity yes;</div><div class="line">        print-time yes;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">category default &#123; named_log; &#125;;</div><div class="line">category queries &#123; query_log; &#125;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">zone &quot;.&quot; IN &#123;</div><div class="line">        type hint;</div><div class="line">        file &quot;named.ca&quot;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">include &quot;/etc/rndc.key&quot;;</div><div class="line"></div><div class="line">zone &quot;zerounix.com&quot; IN &#123;</div><div class="line">        type slave;</div><div class="line">        masters &#123; 162.243.134.106; &#125;;</div><div class="line">        file &quot;zerounix.com.db&quot;;</div><div class="line">        transfer-source 162.243.134.107;</div><div class="line">&#125;;</div><div class="line">rm -f /etc/named.conf</div><div class="line">ls -s /var/named/chroot/etc/named.conf /etc/named.conf</div></pre></td></tr></table></figure>
<h3 id="启动bind服务-1"><a href="#启动bind服务-1" class="headerlink" title="启动bind服务"></a>启动bind服务</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/etc/init.d/named start</div></pre></td></tr></table></figure>
<h3 id="验证主辅同步"><a href="#验证主辅同步" class="headerlink" title="验证主辅同步"></a>验证主辅同步</h3><h4 id="查看日志"><a href="#查看日志" class="headerlink" title="查看日志"></a>查看日志</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">tail -f /var/named/chroot/var/named/logs/named.log</div><div class="line">19-Oct-2015 17:39:42.825 notify: info: client 162.243.134.106#3133: received notify for zone &apos;zerounix.com&apos;</div><div class="line">19-Oct-2015 17:39:42.827 general: info: zone zerounix.com/IN: Transfer started.</div><div class="line">19-Oct-2015 17:39:42.828 xfer-in: info: transfer of &apos;zerounix.com/IN&apos; from 162.243.134.106#53: connected using 162.243.134.107#50919</div><div class="line">19-Oct-2015 17:39:42.830 general: info: zone zerounix.com/IN: transferred serial 2015101701</div><div class="line">19-Oct-2015 17:39:42.830 xfer-in: info: transfer of &apos;zerounix.com&apos; from 162.243.134.106#53: Transfer completed: 1 messages, 7 record</div><div class="line">s, 222 bytes, 0.001 secs (222000 bytes/sec)</div></pre></td></tr></table></figure>
<h4 id="查看zone文件"><a href="#查看zone文件" class="headerlink" title="查看zone文件"></a>查看zone文件</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">cat /var/named/chroot/var/named/zerounix.com.db </div><div class="line">$ORIGIN .</div><div class="line">$ORIGIN .</div><div class="line">$TTL 60 ; 1 minute</div><div class="line">zerounix.com              IN SOA  ns1.zerounix.com. hostmaster.zerounix.com. (</div><div class="line">                                2015101702 ; serial</div><div class="line">                                3600       ; refresh (1 hour)</div><div class="line">                                300        ; retry (5 minutes)</div><div class="line">                                604800     ; expire (1 week)</div><div class="line">                                600        ; minimum (10 minutes)</div><div class="line">                                )</div><div class="line">                        NS      ns1.zerounix.com.</div><div class="line">                        NS      ns2.zerounix.com.</div><div class="line">                        A       162.243.134.106</div><div class="line">                        MX      5 mail.zerounix.com.</div><div class="line">$ORIGIN zerounix.com.</div><div class="line">www                     CNAME   web.zerounix.com.</div><div class="line">web                     A       162.243.134.106</div></pre></td></tr></table></figure>
<h3 id="测试解析"><a href="#测试解析" class="headerlink" title="测试解析"></a>测试解析</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">dig www.zerounix.com @162.243.134.107</div><div class="line"></div><div class="line">; &lt;&lt;&gt;&gt; DiG 9.8.2rc1-RedHat-9.8.2-0.37.rc1.el6_7.4 &lt;&lt;&gt;&gt; www.zerounix.com</div><div class="line">;; global options: +cmd</div><div class="line">;; Got answer:</div><div class="line">;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 20272</div><div class="line">;; flags: qr rd ra; QUERY: 1, ANSWER: 2, AUTHORITY: 0, ADDITIONAL: 0</div><div class="line"></div><div class="line">;; QUESTION SECTION:</div><div class="line">;www.zerounix.com.              IN      A</div><div class="line"></div><div class="line">;; ANSWER SECTION:</div><div class="line">www.zerounix.com.       9       IN      CNAME   web.zerounix.com.</div><div class="line">web.zerounix.com.       9       IN      A       162.243.134.106</div><div class="line"></div><div class="line">;; Query time: 379 msec</div><div class="line">;; SERVER: 162.243.134.107#53(162.243.134.107)</div><div class="line">;; WHEN: Mon Oct 19 17:35:21 2015</div><div class="line">;; MSG SIZE  rcvd: 68</div></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://czero000.github.io/2015/10/19/install-bind-ms.html" data-id="civlqiu6q003yc15mbg947ydo" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/bind/">bind</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-install-redis" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/10/14/install-redis.html" class="article-date">
  <time datetime="2015-10-14T10:26:05.000Z" itemprop="datePublished">2015-10-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Database/">Database</a>►<a class="article-category-link" href="/categories/Database/Redis/">Redis</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/14/install-redis.html">安装Redis</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Redis 是一个开源的使用 ANSI C 语言编写、支持网络、可基于内存亦可持久化的日志型、 Key-Value 数据库，并提供多种语言的 API</p>
<h1 id="下载安装-redis"><a href="#下载安装-redis" class="headerlink" title="下载安装 redis"></a>下载安装 redis</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">wget http://download.redis.io/releases/redis-3.0.2.tar.gz </div><div class="line">tar -zxf redis-3.0.2.tar.gz</div><div class="line">cd redis-3.0.2</div><div class="line">make &amp;&amp; make install </div><div class="line">cp redis.conf /etc/</div></pre></td></tr></table></figure>
<p>参数介绍：<br><code>make install</code> 命令执行完成后，会在 <code>/usr/local/bin</code> 目录下生成本个可执行文件，分别是 <code>redis-server、redis-cli、redis-benchmark、redis-check-aof 、redis-check-dump</code>，它们的作用如下：</p>
<ul>
<li><code>redis-server</code>：Redis 服务器的 daemon启动程序</li>
<li><code>redis-cli</code>：Redis 命令行操作工具。也可以用 telnet 根据其纯文本协议来操作</li>
<li><code>redis-benchmark</code>：Redis 性能测试工具，测试 Redis 在当前系统下的读写性能</li>
<li><code>redis-check-aof</code>：数据修复</li>
<li><code>redis-check-dump</code>：检查导出工具</li>
</ul>
<h1 id="修改系统配置"><a href="#修改系统配置" class="headerlink" title="修改系统配置"></a>修改系统配置</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">echo vm.overcommit_memory=1 &gt;&gt; /etc/sysctl.conf</div><div class="line">sysctl vm.overcommit_memory=1 或执行 echo vm.overcommit_memory=1 &gt;&gt;/proc/sys/vm/overcommit_memory</div></pre></td></tr></table></figure>
<p>使用数字含义：</p>
<ul>
<li>0，表示内核将检查是否有足够的可用内存供应用进程使用；如果有足够的可用内存，内存申请允许；否则，内存申请失败，并把错误返回给应用进程。</li>
<li>1，表示内核允许分配所有的物理内存，而不管当前的内存状态如何。</li>
<li>2，表示内核允许分配超过所有物理内存和交换空间总和的内存</li>
</ul>
<h2 id="修改配置文件："><a href="#修改配置文件：" class="headerlink" title="修改配置文件："></a>修改配置文件：</h2><p>edit /etc/redis.conf<br>daemonize yes<br>参数说明：参数介绍：</p>
<ul>
<li><code>daemonize</code>：是否以后台 daemon 方式运行</li>
<li><code>pidfile</code>：pid 文件位置</li>
<li><code>port</code>：监听的端口号</li>
<li><code>timeout</code>：请求超时时间</li>
<li><code>loglevel</code>：log 信息级别</li>
<li><code>logfile</code>：log 文件位置</li>
<li><code>databases</code>：开启数据库的数量</li>
<li><code>save</code> <em> ：保存快照的频率，第一个\</em>表示多长时间，第三个*表示执行多少次写操作。在一定时间内执行一定数量的写操作时，自动保存快照。可设置多个条件。</li>
<li><code>rdbcompression</code>：是否使用压缩</li>
<li><code>dbfilename</code>：数据快照文件名（只是文件名，不包括目录）</li>
<li><code>dir</code>：数据快照的保存目录（这个是目录）</li>
<li><code>appendonly</code>：是否开启 appendonlylog，开启的话每次写操作会记一条 log，这会提高数据抗风险能力，但影响效率。</li>
<li><code>appendfsync</code>：appendonlylog 如何同步到磁盘（三个选项，分别是每次写都强制调用 fsync、每秒启用一次 fsync、不调用 fsync等待系统自己同步）</li>
</ul>
<h2 id="启动redis"><a href="#启动redis" class="headerlink" title="启动redis"></a>启动redis</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/usr/local/bin/redis-server /etc/redis.conf</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://czero000.github.io/2015/10/14/install-redis.html" data-id="civlqiu3r000sc15mqb39v7xx" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/redis/">redis</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-elasticsearch-config-file-explain-in-detail" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/10/13/elasticsearch-config-file-explain-in-detail.html" class="article-date">
  <time datetime="2015-10-13T10:12:58.000Z" itemprop="datePublished">2015-10-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/运维技术/">运维技术</a>►<a class="article-category-link" href="/categories/运维技术/ELK/">ELK</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/13/elasticsearch-config-file-explain-in-detail.html">Elasticsearch配置文件详解</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p> elasticsearch的config文件夹里面有两个配置文件：elasticsearch.yml和logging.yml，第一个是es的基本配置文件，第二个是日志配置文件，es也是使用log4j来记录日志的，所以logging.yml里的设置按普通log4j配置文件来设置就行了。下面主要讲解下elasticsearch.yml这个文件中可配置的东西。</p>
<ul>
<li>cluster.name: elasticsearch</li>
</ul>
<p>配置es的集群名称，默认是elasticsearch，es会自动发现在同一网段下的es，如果在同一网段下有多个集群，就可以用这个属性来区分不同的集群。</p>
<ul>
<li>node.name: “Franz Kafka”</li>
</ul>
<p>节点名，默认随机指定一个name列表中名字，该列表在es的jar包中config文件夹里name.txt文件中，其中有很多作者添加的有趣名字。</p>
<ul>
<li>node.master: true</li>
</ul>
<p>指定该节点是否有资格被选举成为node，默认是true，es是默认集群中的第一台机器为master，如果这台机挂了就会重新选举master。</p>
<ul>
<li>node.data: true</li>
</ul>
<p>指定该节点是否存储索引数据，默认为true。</p>
<ul>
<li>index.number_of_shards: 6</li>
</ul>
<p>设置默认索引分片个数，默认为5片。</p>
<ul>
<li>index.number_of_replicas: 1</li>
</ul>
<p>设置默认索引副本个数，默认为1个副本。</p>
<ul>
<li>path.conf: /path/to/conf</li>
</ul>
<p>设置配置文件的存储路径，默认是es根目录下的config文件夹。</p>
<ul>
<li>path.data: /path/to/data</li>
</ul>
<p>设置索引数据的存储路径，默认是es根目录下的data文件夹，可以设置多个存储路径，用逗号隔开，例：<code>path.data: /path/to/data1,/path/to/data2</code></p>
<ul>
<li>path.work: /path/to/work</li>
</ul>
<p>设置临时文件的存储路径，默认是es根目录下的work文件夹。</p>
<ul>
<li>path.logs: /path/to/logs</li>
</ul>
<p>设置日志文件的存储路径，默认是es根目录下的logs文件夹</p>
<ul>
<li>path.plugins: /path/to/plugins</li>
</ul>
<p>设置插件的存放路径，默认是es根目录下的plugins文件夹</p>
<ul>
<li>bootstrap.mlockall: true</li>
</ul>
<p>设置为true来锁住内存。因为当jvm开始swapping时es的效率会降低，所以要保证它不swap，可以把ES_MIN_MEM和ES_MAX_MEM两个环境变量设置成同一个值，并且保证机器有足够的内存分配给es。同时也要允许elasticsearch的进程可以锁住内存，linux下可以通过<code>ulimit -l unlimited</code>命令。</p>
<ul>
<li>network.bind_host: 192.168.0.1</li>
</ul>
<p>设置绑定的ip地址，可以是ipv4或ipv6的，默认为0.0.0.0。</p>
<ul>
<li>network.publish_host: 192.168.0.1</li>
</ul>
<p>设置其它节点和该节点交互的ip地址，如果不设置它会自动判断，值必须是个真实的ip地址。</p>
<ul>
<li>network.host: 192.168.0.1</li>
</ul>
<p>这个参数是用来同时设置bind_host和publish_host上面两个参数。</p>
<ul>
<li>vtransport.tcp.port: 9300</li>
</ul>
<p>设置节点间交互的tcp端口，默认是9300。</p>
<ul>
<li>transport.tcp.compress: true</li>
</ul>
<p>设置是否压缩tcp传输时的数据，默认为false，不压缩。</p>
<ul>
<li>http.port: 9200</li>
</ul>
<p>设置对外服务的http端口，默认为9200。</p>
<ul>
<li>http.max_content_length: 100mb</li>
</ul>
<p>设置内容的最大容量，默认100mb</p>
<ul>
<li>http.enabled: false</li>
</ul>
<p>是否使用http协议对外提供服务，默认为true，开启。</p>
<ul>
<li>gateway.type: local</li>
</ul>
<p>gateway的类型，默认为local即为本地文件系统，可以设置为本地文件系统，分布式文件系统，hadoop的HDFS，和amazon的s3服务器，其它文件系统的设置方法下次再详细说。</p>
<ul>
<li>gateway.recover_after_nodes: 1</li>
</ul>
<p>设置集群中N个节点启动时进行数据恢复，默认为1。</p>
<ul>
<li>gateway.recover_after_time: 5m</li>
</ul>
<p>设置初始化数据恢复进程的超时时间，默认是5分钟。</p>
<ul>
<li>gateway.expected_nodes: 2</li>
</ul>
<p>设置这个集群中节点的数量，默认为2，一旦这N个节点启动，就会立即进行数据恢复。</p>
<ul>
<li>cluster.routing.allocation.node_initial_primaries_recoveries: 4</li>
</ul>
<p>初始化数据恢复时，并发恢复线程的个数，默认为4。</p>
<ul>
<li>cluster.routing.allocation.node_concurrent_recoveries: 2</li>
</ul>
<p>添加删除节点或负载均衡时并发恢复线程的个数，默认为4。</p>
<ul>
<li>indices.recovery.max_size_per_sec: 0</li>
</ul>
<p>设置数据恢复时限制的带宽，如入100mb，默认为0，即无限制。</p>
<ul>
<li>indices.recovery.concurrent_streams: 5</li>
</ul>
<p>设置这个参数来限制从其它分片恢复数据时最大同时打开并发流的个数，默认为5。</p>
<ul>
<li>discovery.zen.minimum_master_nodes: 1</li>
</ul>
<p>设置这个参数来保证集群中的节点可以知道其它N个有master资格的节点。默认为1，对于大的集群来说，可以设置大一点的值（2-4）</p>
<ul>
<li>discovery.zen.ping.timeout: 3s</li>
</ul>
<p>设置集群中自动发现其它节点时ping连接超时时间，默认为3秒，对于比较差的网络环境可以高点的值来防止自动发现时出错。</p>
<ul>
<li>discovery.zen.ping.multicast.enabled: false</li>
</ul>
<p>设置是否打开多播发现节点，默认是true。</p>
<ul>
<li>discovery.zen.ping.unicast.hosts: [“host1”, “host2:port”, “host3[portX-portY]”]</li>
</ul>
<p>设置集群中master节点的初始列表，可以通过这些节点来自动发现新加入集群的节点。<br>下面是一些查询时的慢日志参数设置<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">index.search.slowlog.level: TRACE</div><div class="line">index.search.slowlog.threshold.query.warn: 10s</div><div class="line">index.search.slowlog.threshold.query.info: 5s</div><div class="line">index.search.slowlog.threshold.query.debug: 2s</div><div class="line">index.search.slowlog.threshold.query.trace: 500ms</div><div class="line">index.search.slowlog.threshold.fetch.warn: 1s</div><div class="line">index.search.slowlog.threshold.fetch.info: 800ms</div><div class="line">index.search.slowlog.threshold.fetch.debug:500ms</div><div class="line">index.search.slowlog.threshold.fetch.trace: 200ms</div></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://czero000.github.io/2015/10/13/elasticsearch-config-file-explain-in-detail.html" data-id="civlqiubt00euc15mp46z70v3" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/elasticsearch-elk/">elasticsearch.elk</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/page/18/">&laquo; __('prev')</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/17/">17</a><a class="page-number" href="/page/18/">18</a><span class="page-number current">19</span><a class="page-number" href="/page/20/">20</a><a class="page-number" href="/page/21/">21</a><a class="extend next" rel="next" href="/page/20/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Blog/">Blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Database/">Database</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Database/MySQL/">MySQL</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Database/Redis/">Redis</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Markdown/">Markdown</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/">System</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/System/Bash/">Bash</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/CentOS/">CentOS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/Command/">Command</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/DNS/">DNS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/Debian/">Debian</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/Git/">Git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/Gitlab/">Gitlab</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/IPTABLES/">IPTABLES</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/L2TP/">L2TP</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/Monitor/">Monitor</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/NFS/">NFS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/Other/">Other</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/Proxy/">Proxy</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/RRDTOOL/">RRDTOOL</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/Security/">Security</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Web/">Web</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Web/Apache/">Apache</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Web/Nginx/">Nginx</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/虚拟化/">虚拟化</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/虚拟化/KVM/">KVM</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/运维技术/">运维技术</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/运维技术/Docker/">Docker</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/运维技术/ELK/">ELK</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/运维技术/GlusterFS/">GlusterFS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/运维技术/MooseFS/">MooseFS</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/运维自动化/">运维自动化</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/运维自动化/Ansible/">Ansible</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/运维自动化/Cobbler/">Cobbler</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/运维自动化/SaltStack/">SaltStack</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/随笔/">随笔</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Blog/">Blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP状态码/">HTTP状态码</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/">Hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MooseFS/">MooseFS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ansible/">ansible</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apache/">apache</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/awk/">awk</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bash/">bash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bind/">bind</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cacti/">cacti</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/centos/">centos</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/chinese/">chinese</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/chromium/">chromium</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cobbler/">cobbler</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/curl/">curl</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/debian/">debian</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/download/">download</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dropbox/">dropbox</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/elasticsearch/">elasticsearch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/elasticsearch-elk/">elasticsearch.elk</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/elk/">elk</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/em1/">em1</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/epel/">epel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/eth0/">eth0</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fishshell/">fishshell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gitlab/">gitlab</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gitolite/">gitolite</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/glances/">glances</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/glibc/">glibc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/glusterfs/">glusterfs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gpt/">gpt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/https/">https</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iftop/">iftop</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/inotify/">inotify</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iptables/">iptables</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kernel/">kernel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kibana/">kibana</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kvm/">kvm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/l2tp/">l2tp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/logrotate/">logrotate</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/logstash/">logstash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/logstash-forwarder/">logstash-forwarder</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/markdown/">markdown</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/megacli/">megacli</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mindmap/">mindmap</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/monitor/">monitor</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mycli/">mycli</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nfs/">nfs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/">nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx-vim/">nginx.vim</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ntp/">ntp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/openssl/">openssl</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/parted/">parted</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/passwd/">passwd</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php/">php</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php-fpm/">php-fpm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pptp/">pptp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/proxy/">proxy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/raid/">raid</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redis/">redis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rrdtool/">rrdtool</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rsync/">rsync</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/saltstack/">saltstack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/security/">security</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/servicewrapper/">servicewrapper</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shadowsocks/">shadowsocks</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/smokeping/">smokeping</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/socks5/">socks5</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ss5/">ss5</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/transmission/">transmission</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ubuntu/">ubuntu</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/virsh/">virsh</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vncserver/">vncserver</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xz/">xz</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/yum/">yum</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/zsh/">zsh</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/书写指南/">书写指南</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Blog/" style="font-size: 10px;">Blog</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/HTTP状态码/" style="font-size: 10px;">HTTP状态码</a> <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/MooseFS/" style="font-size: 10px;">MooseFS</a> <a href="/tags/ansible/" style="font-size: 17.5px;">ansible</a> <a href="/tags/apache/" style="font-size: 10px;">apache</a> <a href="/tags/awk/" style="font-size: 11.25px;">awk</a> <a href="/tags/bash/" style="font-size: 18.75px;">bash</a> <a href="/tags/bind/" style="font-size: 11.25px;">bind</a> <a href="/tags/cacti/" style="font-size: 10px;">cacti</a> <a href="/tags/centos/" style="font-size: 12.5px;">centos</a> <a href="/tags/chinese/" style="font-size: 11.25px;">chinese</a> <a href="/tags/chromium/" style="font-size: 10px;">chromium</a> <a href="/tags/cobbler/" style="font-size: 11.25px;">cobbler</a> <a href="/tags/curl/" style="font-size: 10px;">curl</a> <a href="/tags/debian/" style="font-size: 10px;">debian</a> <a href="/tags/docker/" style="font-size: 12.5px;">docker</a> <a href="/tags/download/" style="font-size: 10px;">download</a> <a href="/tags/dropbox/" style="font-size: 10px;">dropbox</a> <a href="/tags/elasticsearch/" style="font-size: 10px;">elasticsearch</a> <a href="/tags/elasticsearch-elk/" style="font-size: 10px;">elasticsearch.elk</a> <a href="/tags/elk/" style="font-size: 12.5px;">elk</a> <a href="/tags/em1/" style="font-size: 10px;">em1</a> <a href="/tags/epel/" style="font-size: 10px;">epel</a> <a href="/tags/eth0/" style="font-size: 10px;">eth0</a> <a href="/tags/fishshell/" style="font-size: 10px;">fishshell</a> <a href="/tags/git/" style="font-size: 13.75px;">git</a> <a href="/tags/gitlab/" style="font-size: 10px;">gitlab</a> <a href="/tags/gitolite/" style="font-size: 10px;">gitolite</a> <a href="/tags/glances/" style="font-size: 10px;">glances</a> <a href="/tags/glibc/" style="font-size: 10px;">glibc</a> <a href="/tags/glusterfs/" style="font-size: 12.5px;">glusterfs</a> <a href="/tags/gpt/" style="font-size: 10px;">gpt</a> <a href="/tags/https/" style="font-size: 10px;">https</a> <a href="/tags/iftop/" style="font-size: 10px;">iftop</a> <a href="/tags/inotify/" style="font-size: 11.25px;">inotify</a> <a href="/tags/iptables/" style="font-size: 10px;">iptables</a> <a href="/tags/kernel/" style="font-size: 10px;">kernel</a> <a href="/tags/kibana/" style="font-size: 10px;">kibana</a> <a href="/tags/kvm/" style="font-size: 10px;">kvm</a> <a href="/tags/l2tp/" style="font-size: 10px;">l2tp</a> <a href="/tags/logrotate/" style="font-size: 10px;">logrotate</a> <a href="/tags/logstash/" style="font-size: 11.25px;">logstash</a> <a href="/tags/logstash-forwarder/" style="font-size: 10px;">logstash-forwarder</a> <a href="/tags/markdown/" style="font-size: 10px;">markdown</a> <a href="/tags/megacli/" style="font-size: 11.25px;">megacli</a> <a href="/tags/mindmap/" style="font-size: 11.25px;">mindmap</a> <a href="/tags/monitor/" style="font-size: 15px;">monitor</a> <a href="/tags/mycli/" style="font-size: 10px;">mycli</a> <a href="/tags/mysql/" style="font-size: 10px;">mysql</a> <a href="/tags/nfs/" style="font-size: 10px;">nfs</a> <a href="/tags/nginx/" style="font-size: 20px;">nginx</a> <a href="/tags/nginx-vim/" style="font-size: 10px;">nginx.vim</a> <a href="/tags/ntp/" style="font-size: 10px;">ntp</a> <a href="/tags/openssl/" style="font-size: 10px;">openssl</a> <a href="/tags/parted/" style="font-size: 10px;">parted</a> <a href="/tags/passwd/" style="font-size: 10px;">passwd</a> <a href="/tags/php/" style="font-size: 10px;">php</a> <a href="/tags/php-fpm/" style="font-size: 10px;">php-fpm</a> <a href="/tags/pptp/" style="font-size: 11.25px;">pptp</a> <a href="/tags/proxy/" style="font-size: 15px;">proxy</a> <a href="/tags/python/" style="font-size: 12.5px;">python</a> <a href="/tags/raid/" style="font-size: 10px;">raid</a> <a href="/tags/redis/" style="font-size: 10px;">redis</a> <a href="/tags/rrdtool/" style="font-size: 10px;">rrdtool</a> <a href="/tags/rsync/" style="font-size: 10px;">rsync</a> <a href="/tags/saltstack/" style="font-size: 16.25px;">saltstack</a> <a href="/tags/security/" style="font-size: 10px;">security</a> <a href="/tags/servicewrapper/" style="font-size: 10px;">servicewrapper</a> <a href="/tags/shadowsocks/" style="font-size: 10px;">shadowsocks</a> <a href="/tags/smokeping/" style="font-size: 13.75px;">smokeping</a> <a href="/tags/socks5/" style="font-size: 11.25px;">socks5</a> <a href="/tags/ss5/" style="font-size: 10px;">ss5</a> <a href="/tags/transmission/" style="font-size: 10px;">transmission</a> <a href="/tags/ubuntu/" style="font-size: 10px;">ubuntu</a> <a href="/tags/virsh/" style="font-size: 10px;">virsh</a> <a href="/tags/vncserver/" style="font-size: 10px;">vncserver</a> <a href="/tags/xz/" style="font-size: 10px;">xz</a> <a href="/tags/yum/" style="font-size: 10px;">yum</a> <a href="/tags/zsh/" style="font-size: 10px;">zsh</a> <a href="/tags/书写指南/" style="font-size: 10px;">书写指南</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">July 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">June 2015</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/11/17/Git-basic.html">Git基础</a>
          </li>
        
          <li>
            <a href="/2016/10/26/ansible-managment-windows.html">使用ansible管理windows主机</a>
          </li>
        
          <li>
            <a href="/2016/10/20/git-different-sshkey.html">配置不同ssh-key访问不同git仓库</a>
          </li>
        
          <li>
            <a href="/2016/10/20/l2tp-vpn.html">IPsec和L2TP搭建VPN</a>
          </li>
        
          <li>
            <a href="/2016/10/20/ansible-dynamic-create-vhost.html">通过jinja2生成虚拟主机配置</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 C.c<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>